(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{118:function(e,t,r){"use strict";r.r(t);const o={pluralize:e=>1===e?0:1,strings:{addMore:"Adicione mais",addMoreFiles:"Adicionar mais arquivos",addingMoreFiles:"Adicionando mais arquivos",allowAccessDescription:"Para poder tirar fotos e gravar vídeos com sua câmera, por favor permita o acesso a câmera para esse site.",allowAccessTitle:"Por favor permita o acesso a sua câmera",authenticateWith:"Conectar com %{pluginName}",authenticateWithTitle:"Por favor conecte com %{pluginName} para selecionar arquivos",back:"Voltar",browse:"navegue",browseFiles:"navegue",cancel:"Cancelar",cancelUpload:"Cancelar envio de arquivos",chooseFiles:"Selecionar arquivos",closeModal:"Fechar Modal",companionError:"Conexão com serviço falhou",complete:"Concluído",connectedToInternet:"Conectado á internet",copyLink:"Copiar link",copyLinkToClipboardFallback:"Copiar URL abaixo",copyLinkToClipboardSuccess:"Link copiado para a área de transferência",creatingAssembly:"Preparando envio de arquivos...",creatingAssemblyFailed:"Transloadit: Não foi possível criar o Assembly",dashboardTitle:"Envio de arquivos",dashboardWindowTitle:"Janela para envio de arquivos (Pressione esc para fechar)",dataUploadedOfTotal:"%{complete} de %{total}",done:"Concluir",dropHereOr:"Arraste arquivos aqui ou %{browse}",dropHint:"Solte seus arquivos aqui",dropPasteBoth:"Solte arquivos aqui, cole ou %{browse}",dropPasteFiles:"Solte arquivos aqui, cole ou %{browse}",dropPasteFolders:"Solte arquivos aqui, cole ou %{browse}",dropPasteImportBoth:"Solte arquivos aqui, cole, %{browse} ou importe de",dropPasteImportFiles:"Solte arquivos aqui, cole, %{browse} ou importe de",dropPasteImportFolders:"Solte arquivos aqui, cole, %{browse} ou importe de",editFile:"Editar arquivo",editing:"Editando %{file}",emptyFolderAdded:"Nenhum arquivo foi adicionado da pasta vazia",encoding:"Codificando...",enterCorrectUrl:"URL incorreta: Por favor tenha certeza que inseriu um link direto para um arquivo",enterUrlToImport:"Coloque a URL para importar um arquivo",exceedsSize:"Esse arquivo excedeu o tamanho máximo permitido %{size}",failedToFetch:"Serviço falhou para buscar essa URL, por favor tenha certeza que a URL está correta",failedToUpload:"Falha para enviar %{file}",fileSource:"Origem do arquivo: %{name}",filesUploadedOfTotal:{0:"%{complete} de %{smart_count} arquivo enviado",1:"%{complete} de %{smart_count} arquivos enviados"},filter:"Filtrar",finishEditingFile:"Finalizar edição de arquivo",folderAdded:{0:"Adicionado %{smart_count} arquivo de %{folder}",1:"Adicionado %{smart_count} arquivos de %{folder}"},import:"Importar",importFrom:"Importar de %{name}",loading:"Carregando...",logOut:"Deslogar",myDevice:"Meu dispositivo",noFilesFound:"Você não possui arquivos ou pastas aqui",noInternetConnection:"Sem conexão com a internet",pause:"Pausar",pauseUpload:"Pausar envio de arquivos",paused:"Pausado",poweredBy:"Desenvolvido por %{uppy}",processingXFiles:{0:"Processando %{smart_count} arquivo",1:"Processando %{smart_count} arquivos"},removeFile:"Remover arquivo",resetFilter:"Resetar filtro",resume:"Retomar",resumeUpload:"Retomar envio de arquivos",retry:"Tentar novamente",retryUpload:"Tentar enviar novamente",saveChanges:"Salvar alterações",selectX:{0:"Selecionar %{smart_count}",1:"Selecionar %{smart_count}"},smile:"Sorria!",startRecording:"Começar gravação de vídeo",stopRecording:"Parar gravação de vídeo",takePicture:"Tirar uma foto",timedOut:"Envio de arquivos parado por %{seconds} segundos, abortando.",upload:"Enviar arquivos",uploadComplete:"Envio de arquivos finalizado",uploadFailed:"Envio de arquivos falhou",uploadPaused:"Envio de arquivos pausado",uploadXFiles:{0:"Enviar %{smart_count} arquivo",1:"Enviar %{smart_count} arquivos"},uploadXNewFiles:{0:"Enviar +%{smart_count} arquivo",1:"Enviar +%{smart_count} arquivos"},uploading:"Enviando",uploadingXFiles:{0:"Enviando %{smart_count} arquivo",1:"Enviando %{smart_count} arquivos"},xFilesSelected:{0:"%{smart_count} arquivo selecionado",1:"%{smart_count} arquivos selecionados"},xMoreFilesAdded:{0:"%{smart_count} arquivo adicionados",1:"%{smart_count} arquivos adicionados"},xTimeLeft:"%{time} restantes",youCanOnlyUploadFileTypes:"Você pode enviar apenas arquivos: %{types}",youCanOnlyUploadX:{0:"Você pode enviar apenas %{smart_count} arquivo",1:"Você pode enviar apenas %{smart_count} arquivos"},youHaveToAtLeastSelectX:{0:"Você precisa selecionar pelo menos %{smart_count} arquivo",1:"Você precisa selecionar pelo menos %{smart_count} arquivos"},selectFileNamed:"Selecione o arquivo %{name}",unselectFileNamed:"Deselecionar arquivo %{name}",openFolderNamed:"Pasta aberta %{name}"}};"undefined"!=typeof Uppy&&(globalThis.Uppy.locales.pt_BR=o),t.default=o},164:function(e,t,r){"use strict";r.r(t);const o={pluralize:e=>1===e?0:1,strings:{addMoreFiles:"Agregar más archivos",addingMoreFiles:"Agregando más archivos",allowAccessDescription:"Para tomar fotos o grabar video con tu cámara, por favor permite a este sitio el acceso a la cámara.",allowAccessTitle:"Por favor permite el acceso a tu cámara",authenticateWith:"Conectar a %{pluginName}",authenticateWithTitle:"Por favor autentícate con %{pluginName} para seleccionar archivos",back:"Atrás",addMore:"Agregar más",browse:"navegar",browseFiles:"navegar",cancel:"Cancelar",cancelUpload:"Cancelar subida",chooseFiles:"Seleccionar archivos",closeModal:"Cerrar ventana flotante",companionError:"Conexión con Companion falló",complete:"Completado",connectedToInternet:"Conectado a Internet",copyLink:"Copiar enlace",copyLinkToClipboardFallback:"Copia la siguiente URL",copyLinkToClipboardSuccess:"Enlace copiado al portapapeles",creatingAssembly:"Preparando subida...",creatingAssemblyFailed:"Transloadit: No se pudo crear un Assembly",dashboardTitle:"Cargador de archivos",dashboardWindowTitle:"Ventana para cargar archivos (Presiona escape para cerrar)",dataUploadedOfTotal:"%{complete} de %{total}",done:"Hecho",dropHereOr:"Soltar archivos aquí o %{browse}",dropHint:"Suelta tus archivos aquí",dropPasteBoth:"Soltar archivos aquí, pegar o %{browse}",dropPasteFiles:"Soltar archivos aquí, pegar o %{browse}",dropPasteFolders:"Soltar archivos aquí, pegar o %{browse}",dropPasteImportBoth:"Soltar archivos aquí, pegar, %{browse} o importar desde",dropPasteImportFiles:"Soltar archivos aquí, pegar, %{browse} o importar desde",dropPasteImportFolders:"Soltar archivos aquí, pegar, %{browse} o importar desde",editFile:"Editar archivo",editing:"Editando %{file}",emptyFolderAdded:"Ningún archivo fue agregado desde la carpeta vacía",encoding:"Codificando...",enterCorrectUrl:"URL incorrecta: Por favor asegúrate que estás ingresando un enlace a un archivo",enterUrlToImport:"Ingresa una URL para importar un archivo",exceedsSize:"Este archivo excede el tamaño máximo de %{size}",failedToFetch:"Companion no ha podido recuperar esta URL, por favor asegúrate que sea correcta",failedToUpload:"Error al subir %{file}",fileSource:"Fuente de archivo: %{name}",filesUploadedOfTotal:{0:"%{complete} de %{smart_count} archivo subido",1:"%{complete} de %{smart_count} archivos subidos",2:"%{complete} de %{smart_count} archivos subidos"},filter:"Filtrar",finishEditingFile:"Terminar edición de archivo",folderAdded:{0:"Agregado %{smart_count} archivo desde %{folder}",1:"Agregados %{smart_count} archivos desde %{folder}",2:"Agregados %{smart_count} archivos desde %{folder}"},import:"Importar",importFrom:"Importar desde %{name}",loading:"Cargando...",logOut:"Cerrar sesión",missingRequiredMetaField:"Faltan metacampos obligatorios",missingRequiredMetaFieldOnFile:"Faltan metacampos obligatorios en %{fileName}",myDevice:"Mi Dispositivo",noFilesFound:"No existen archivos o carpetas aquí",noInternetConnection:"Sin conexión a Internet",pause:"Pausar",pauseUpload:"Pausar subida",paused:"En pausa",poweredBy:"Soportado por %{uppy}",processingXFiles:{0:"Procesando %{smart_count} archivo",1:"Procesando %{smart_count} archivos",2:"Procesando %{smart_count} archivos"},recordingLength:"Duración de grabación %{recording_length}",removeFile:"Eliminar archivo",resetFilter:"Limpiar filtro",resume:"Reanudar",resumeUpload:"Reanudar subida",retry:"Intentar nuevamente",retryUpload:"Intentar subida nuevamente",save:"Guardar",saveChanges:"Guardar cambios",selectX:{0:"Seleccionar %{smart_count}",1:"Seleccionar %{smart_count}",2:"Seleccionar %{smart_count}"},smile:"Sonríe!",startRecording:"Comenzar la grabación de video",stopRecording:"Detener la grabación de video",takePicture:"Tomar una foto",timedOut:"Subida estancada por %{seconds} segundos, anulando.",upload:"Subir",uploadComplete:"Subida terminada",uploadFailed:"Subida falló",uploadPaused:"Subida pausada",uploadXFiles:{0:"Subir %{smart_count} archivo",1:"Subir %{smart_count} archivos",2:"Subir %{smart_count} archivos"},uploadXNewFiles:{0:"Subir +%{smart_count} archivo",1:"Subir +%{smart_count} archivos",2:"Subir +%{smart_count} archivos"},uploading:"Subiendo",uploadingXFiles:{0:"Subiendo %{smart_count} archivo",1:"Subiendo %{smart_count} archivos",2:"Subiendo %{smart_count} archivos"},xFilesSelected:{0:"%{smart_count} archivo seleccionado",1:"%{smart_count} archivos seleccionados",2:"%{smart_count} archivos seleccionados"},xMoreFilesAdded:{0:"%{smart_count} archivo más agregado",1:"%{smart_count} archivos más agregados",2:"%{smart_count} archivos más agregados"},xTimeLeft:"%{time} restantes",youCanOnlyUploadFileTypes:"Solo puedes subir: %{types}",youCanOnlyUploadX:{0:"Solo puedes subir %{smart_count} archivo",1:"Solo puedes subir %{smart_count} archivos",2:"Solo puedes subir %{smart_count} archivos"},youHaveToAtLeastSelectX:{0:"Tienes que seleccionar al menos %{smart_count} archivo",1:"Tienes que seleccionar al menos %{smart_count} archivos",2:"Tienes que seleccionar al menos %{smart_count} archivos"},selectFileNamed:"Seleccione archivo %{name}",unselectFileNamed:"Deseleccionar archivo %{name}",openFolderNamed:"Carpeta abierta %{name}"}};"undefined"!=typeof Uppy&&(globalThis.Uppy.locales.es_ES=o),t.default=o},218:function(e,t,r){"use strict";r.d(t,"a",(function(){return V}));var o=r(58),n=r(824),l=r(825),c=r(398),d={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},h=r(1),m=r(79),y=r.n(m);function f(e){const t=[];let r,o;for(const{progress:progress}of Object.values(e)){const{preprocess:e,postprocess:n}=progress;null==o&&(e||n)&&({mode:r,message:o}=e||n),"determinate"===(null==e?void 0:e.mode)&&t.push(e.value),"determinate"===(null==n?void 0:n.mode)&&t.push(n.value)}return{mode:r,message:o,value:t.reduce(((e,r)=>e+r/t.length),0)}}var v=r(279),w=r.n(v),P=r(245),S=r.n(P),O=r(921);function F(e){const{newFiles:t,isUploadStarted:r,recoveredState:o,i18n:n,uploadState:l,isSomeGhost:c,startUpload:m}=e,f=y()("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":l===d.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":c}),v=n(t&&r&&!o?"uploadXNewFiles":"uploadXFiles",{smart_count:t});return Object(h.e)("button",{type:"button",className:f,"aria-label":n("uploadXFiles",{smart_count:t}),onClick:m,disabled:c,"data-uppy-super-focusable":!0},v)}function j(e){const{i18n:t,uppy:r}=e;return Object(h.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>r.retryAll(),"data-uppy-super-focusable":!0},Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},Object(h.e)("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t("retry"))}function A(e){const{i18n:t,uppy:r}=e;return Object(h.e)("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>r.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},Object(h.e)("g",{fill:"none",fillRule:"evenodd"},Object(h.e)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),Object(h.e)("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function T(e){const{isAllPaused:t,i18n:r,isAllComplete:o,resumableUploads:n,uppy:l}=e,title=r(t?"resume":"pause");return Object(h.e)("button",{title:title,"aria-label":title,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){return o?null:n?t?l.resumeAll():l.pauseAll():l.cancelAll()},"data-uppy-super-focusable":!0},Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},Object(h.e)("g",{fill:"none",fillRule:"evenodd"},Object(h.e)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),Object(h.e)("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function E(e){const{i18n:t,doneButtonHandler:r}=e;return Object(h.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:r,"data-uppy-super-focusable":!0},t("done"))}function R(){return Object(h.e)("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},Object(h.e)("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function U(e){const{progress:progress}=e,{value:t,mode:r,message:o}=progress,n=Math.round(100*t);return Object(h.e)("div",{className:"uppy-StatusBar-content"},Object(h.e)(R,null),"determinate"===r?`${n}% · `:"",o)}function _(e){const{i18n:t,complete:r,numUploads:o}=e;return Object(h.e)("div",{className:"uppy-StatusBar-statusSecondary"},t("filesUploadedOfTotal",{complete:r,smart_count:o}))}function I(e){const{i18n:t,newFiles:r,startUpload:o}=e,n=y()("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return Object(h.e)("div",{className:"uppy-StatusBar-statusSecondary"},Object(h.e)("div",{className:"uppy-StatusBar-statusSecondaryHint"},t("xMoreFilesAdded",{smart_count:r})),Object(h.e)("button",{type:"button",className:n,"aria-label":t("uploadXFiles",{smart_count:r}),onClick:o},t("upload")))}const C=w()((function(e){const{numUploads:t,complete:r,totalUploadedSize:o,totalSize:n,totalETA:l,i18n:c}=e,d=t>1;return Object(h.e)("div",{className:"uppy-StatusBar-statusSecondary"},d&&c("filesUploadedOfTotal",{complete:r,smart_count:t}),Object(h.e)("span",{className:"uppy-StatusBar-additionalInfo"},d&&" · ",c("dataUploadedOfTotal",{complete:S()(o),total:S()(n)})," · ",c("xTimeLeft",{time:Object(O.a)(l)})))}),500,{leading:!0,trailing:!0});function k(e){const{i18n:t,supportsUploadProgress:r,totalProgress:o,showProgressDetails:n,isUploadStarted:l,isAllComplete:c,isAllPaused:d,newFiles:m,numUploads:y,complete:f,totalUploadedSize:v,totalSize:w,totalETA:P,startUpload:S}=e,O=m&&l;if(!l||c)return null;const title=t(d?"paused":"uploading");return Object(h.e)("div",{className:"uppy-StatusBar-content","aria-label":title,title:title},d?null:Object(h.e)(R,null),Object(h.e)("div",{className:"uppy-StatusBar-status"},Object(h.e)("div",{className:"uppy-StatusBar-statusPrimary"},r?`${title}: ${o}%`:title),d||O||!n?null:r?Object(h.e)(C,{numUploads:y,complete:f,totalUploadedSize:v,totalSize:w,totalETA:P,i18n:t}):Object(h.e)(_,{i18n:t,complete:f,numUploads:y}),O?Object(h.e)(I,{i18n:t,newFiles:m,startUpload:S}):null))}function N(e){const{i18n:t}=e;return Object(h.e)("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},Object(h.e)("div",{className:"uppy-StatusBar-status"},Object(h.e)("div",{className:"uppy-StatusBar-statusPrimary"},Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},Object(h.e)("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))}function B(e){const{error:t,i18n:r,complete:o,numUploads:n}=e;return Object(h.e)("div",{className:"uppy-StatusBar-content",title:r("uploadFailed")},Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},Object(h.e)("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),Object(h.e)("div",{className:"uppy-StatusBar-status"},Object(h.e)("div",{className:"uppy-StatusBar-statusPrimary"},r("uploadFailed"),Object(h.e)("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":r("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:function(){const e=`${r("uploadFailed")} \n\n ${t}`;alert(e)},type:"button"},"?")),Object(h.e)(_,{i18n:r,complete:o,numUploads:n})))}const{STATE_ERROR:x,STATE_WAITING:L,STATE_PREPROCESSING:M,STATE_UPLOADING:z,STATE_POSTPROCESSING:D,STATE_COMPLETE:H}=d;var $={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function G(e){const t=function(e){let t=0;return e.forEach((e=>{t+=Object(n.a)(e.progress)})),t}(e);if(0===t)return 0;const r=e.reduce(((e,t)=>e+Object(l.a)(t.progress)),0);return Math.round(r/t*10)/10}function W(e,t,r,o){if(e&&!t)return d.STATE_ERROR;if(t)return d.STATE_COMPLETE;if(r)return d.STATE_WAITING;let n=d.STATE_WAITING;const l=Object.keys(o);for(let i=0;i<l.length;i++){const{progress:progress}=o[l[i]];if(progress.uploadStarted&&!progress.uploadComplete)return d.STATE_UPLOADING;progress.preprocess&&n!==d.STATE_UPLOADING&&(n=d.STATE_PREPROCESSING),progress.postprocess&&n!==d.STATE_UPLOADING&&n!==d.STATE_PREPROCESSING&&(n=d.STATE_POSTPROCESSING)}return n}class V extends o.a{constructor(e,t){super(e,t),this.startUpload=()=>{const{recoveredState:e}=this.uppy.getState();if(!e)return this.uppy.upload().catch((()=>{}));this.uppy.emit("restore-confirmed")},this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=$;this.opts={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null,...t},this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:t,files:r,allowNewUpload:o,totalProgress:n,error:l,recoveredState:c}=e,{newFiles:d,startedFiles:m,completeFiles:v,inProgressNotPausedFiles:w,isUploadStarted:P,isAllComplete:S,isAllErrored:O,isAllPaused:R,isUploadInProgress:_,isSomeGhost:I}=this.uppy.getObjectOfFilesPerState(),C=c?Object.values(r):d,$=G(w),V=!!t.resumableUploads,Q=!1!==t.uploadProgress;let X=0,K=0;return m.forEach((e=>{X+=e.progress.bytesTotal||0,K+=e.progress.bytesUploaded||0})),function(e){const{newFiles:t,allowNewUpload:r,isUploadInProgress:o,isAllPaused:n,resumableUploads:l,error:c,hideUploadButton:d,hidePauseResumeButton:m,hideCancelButton:v,hideRetryButton:w,recoveredState:P,uploadState:S,totalProgress:O,files:R,supportsUploadProgress:_,hideAfterFinish:I,isSomeGhost:C,doneButtonHandler:$,isUploadStarted:G,i18n:W,startUpload:V,uppy:Q,isAllComplete:X,showProgressDetails:K,numUploads:J,complete:Y,totalSize:Z,totalETA:ee,totalUploadedSize:te}=e,se=function(){switch(S){case D:case M:{const progress=f(R);return"determinate"===progress.mode?100*progress.value:O}case x:return null;case z:return _?O:null;default:return O}}(),ie=function(){if(P)return!1;switch(S){case L:return d||0===t;case H:return I;default:return!1}}(),re=null!=se?se:100,oe=!c&&t&&!o&&!n&&r&&!d,ae=!v&&S!==L&&S!==H,ne=l&&!m&&S===z,le=c&&!X&&!w,ue=$&&S===H,ce=y()("uppy-StatusBar-progress",{"is-indeterminate":function(){switch(S){case D:case M:{const{mode:e}=f(R);return"indeterminate"===e}case z:return!_;default:return!1}}()}),de=y()("uppy-StatusBar",`is-${S}`,{"has-ghosts":C});return Object(h.e)("div",{className:de,"aria-hidden":ie},Object(h.e)("div",{className:ce,style:{width:`${re}%`},role:"progressbar","aria-label":`${re}%`,"aria-valuetext":`${re}%`,"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":se}),(()=>{switch(S){case M:case D:return Object(h.e)(U,{progress:f(R)});case H:return Object(h.e)(N,{i18n:W});case x:return Object(h.e)(B,{error:c,i18n:W,numUploads:J,complete:Y});case z:return Object(h.e)(k,{i18n:W,supportsUploadProgress:_,totalProgress:O,showProgressDetails:K,isUploadStarted:G,isAllComplete:X,isAllPaused:n,newFiles:t,numUploads:J,complete:Y,totalUploadedSize:te,totalSize:Z,totalETA:ee,startUpload:V});default:return null}})(),Object(h.e)("div",{className:"uppy-StatusBar-actions"},P||oe?Object(h.e)(F,{newFiles:t,isUploadStarted:G,recoveredState:P,i18n:W,isSomeGhost:C,startUpload:V,uploadState:S}):null,le?Object(h.e)(j,{i18n:W,uppy:Q}):null,ne?Object(h.e)(T,{isAllPaused:n,i18n:W,isAllComplete:X,resumableUploads:l,uppy:Q}):null,ae?Object(h.e)(A,{i18n:W,uppy:Q}):null,ue?Object(h.e)(E,{i18n:W,doneButtonHandler:$}):null))}({error:l,uploadState:W(l,S,c,e.files||{}),allowNewUpload:o,totalProgress:n,totalSize:X,totalUploadedSize:K,isAllComplete:!1,isAllPaused:R,isAllErrored:O,isUploadStarted:P,isUploadInProgress:_,isSomeGhost:I,recoveredState:c,complete:v.length,newFiles:C.length,numUploads:m.length,totalETA:$,files:r,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:V,supportsUploadProgress:Q,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const element=this.el;Object(c.a)(element)||(element.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}V.VERSION="3.0.1"},410:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var o=r(1);function n(){return Object(o.e)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},Object(o.e)("g",{fill:"none","fill-rule":"evenodd"},Object(o.e)("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),Object(o.e)("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),Object(o.e)("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),Object(o.e)("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),Object(o.e)("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),Object(o.e)("path",{d:"M4 4h18v18H4z"})))}var l=function(e){const{pluginName:t,pluginIcon:r,i18nArray:l,handleAuth:c}=e,d="Google Drive"===t,h=Object(o.e)("span",{className:"uppy-Provider-authTitleName"},t,Object(o.e)("br",null));return Object(o.e)("div",{className:"uppy-Provider-auth"},Object(o.e)("div",{className:"uppy-Provider-authIcon"},r()),Object(o.e)("div",{className:"uppy-Provider-authTitle"},l("authenticateWithTitle",{pluginName:h})),d?Object(o.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google",onClick:c,"data-uppy-super-focusable":!0},Object(o.e)(n,null),l("signInWithGoogle")):Object(o.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onClick:c,"data-uppy-super-focusable":!0},l("authenticateWith",{pluginName:t})))};const c=e=>{const{getFolder:t,title:title,isLast:r}=e;return Object(o.e)(o.b,null,Object(o.e)("button",{type:"button",className:"uppy-u-reset",onClick:t},title),r?"":" / ")};var d=e=>{const t=[];return e.showBreadcrumbs&&t.push((e=>{const{getFolder:t,title:title,breadcrumbsIcon:r,directories:n}=e;return Object(o.e)("div",{className:"uppy-Provider-breadcrumbs"},Object(o.e)("div",{className:"uppy-Provider-breadcrumbsIcon"},r),n.map(((e,i)=>Object(o.e)(c,{key:e.id,getFolder:()=>t(e.id),title:0===i?title:e.title,isLast:i+1===n.length}))))})({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title})),t.push((e=>{let{i18n:t,logout:r,username:n}=e;return[Object(o.e)("span",{className:"uppy-ProviderBrowser-user",key:"username"},n),Object(o.e)("button",{type:"button",onClick:r,className:"uppy-u-reset uppy-ProviderBrowser-userLogout",key:"logout"},t("logOut"))]})({logout:e.logout,username:e.username,i18n:e.i18n})),t},h=r(79),m=r.n(h),y=r(403);class f extends o.a{constructor(e){super(e),this.preventEnterPress=this.preventEnterPress.bind(this)}preventEnterPress(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())}render(){const{i18n:e,filterInput:t,filterQuery:r}=this.props;return Object(o.e)("div",{className:"uppy-ProviderBrowser-filter"},Object(o.e)("input",{className:"uppy-u-reset uppy-ProviderBrowser-filterInput",type:"text",placeholder:e("filter"),"aria-label":e("filter"),onKeyUp:this.preventEnterPress,onKeyDown:this.preventEnterPress,onKeyPress:this.preventEnterPress,onInput:e=>r(e),value:t}),Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-filterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},Object(o.e)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),t&&Object(o.e)("button",{className:"uppy-u-reset uppy-ProviderBrowser-filterClose",type:"button","aria-label":e("resetFilter"),title:e("resetFilter"),onClick:r},Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},Object(o.e)("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))}}var v=e=>{let{cancel:t,done:r,i18n:n,selected:l}=e;return Object(o.e)("div",{className:"uppy-ProviderBrowser-footer"},Object(o.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onClick:r,type:"button"},n("selectX",{smart_count:l})),Object(o.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:t,type:"button"},n("cancel")))};function w(){return Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},Object(o.e)("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function P(){return Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},Object(o.e)("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function S(){return Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},Object(o.e)("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),Object(o.e)("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}var O=e=>{const{itemIconString:t}=e;if(null!==t)switch(t){case"file":return Object(o.e)(w,null);case"folder":return Object(o.e)(P,null);case"video":return Object(o.e)(S,null);default:{const{alt:r}=e;return Object(o.e)("img",{src:t,alt:r})}}};var F=function(e){const{className:t,isDisabled:r,restrictionError:n,isChecked:l,title:title,itemIconEl:c,showTitles:d,toggleCheckbox:h,recordShiftKeyPress:m,id:y,children:f}=e;return Object(o.e)("li",{className:t,title:r?null==n?void 0:n.message:null},Object(o.e)("input",{type:"checkbox",className:`uppy-u-reset uppy-ProviderBrowserItem-checkbox ${l?"uppy-ProviderBrowserItem-checkbox--is-checked":""} uppy-ProviderBrowserItem-checkbox--grid`,onChange:h,onKeyDown:m,name:"listitem",id:y,checked:l,disabled:r,"data-uppy-super-focusable":!0}),Object(o.e)("label",{htmlFor:y,"aria-label":title,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},Object(o.e)("span",{className:"uppy-ProviderBrowserItem-inner-relative"},c,d&&title,f)))};var j=function(e){const{className:t,isDisabled:r,restrictionError:n,isCheckboxDisabled:l,isChecked:c,toggleCheckbox:d,recordShiftKeyPress:h,type:m,id:y,itemIconEl:f,title:title,handleFolderClick:v,showTitles:w,i18n:P}=e;return Object(o.e)("li",{className:t,title:r?null==n?void 0:n.message:null},l?null:Object(o.e)("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox "+(c?"uppy-ProviderBrowserItem-checkbox--is-checked":""),onChange:d,onKeyDown:h,name:"listitem",id:y,checked:c,"aria-label":"file"===m?null:P("allFilesFromFolderNamed",{name:title}),disabled:r,"data-uppy-super-focusable":!0}),"file"===m?Object(o.e)("label",{htmlFor:y,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},Object(o.e)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},f),w&&title):Object(o.e)("button",{type:"button",className:"uppy-u-reset uppy-ProviderBrowserItem-inner",onClick:v,"aria-label":P("openFolderNamed",{name:title})},Object(o.e)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},f),w&&Object(o.e)("span",null,title)))};function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}var T=e=>{const{author:t,getItemIcon:r,isChecked:n,isDisabled:l,viewType:c}=e,d=r(),h=m()("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":n},{"uppy-ProviderBrowserItem--disabled":l},{"uppy-ProviderBrowserItem--noPreview":"video"===d}),y=Object(o.e)(O,{itemIconString:d});switch(c){case"grid":return Object(o.e)(F,A({},e,{className:h,itemIconEl:y}));case"list":return Object(o.e)(j,A({},e,{className:h,itemIconEl:y}));case"unsplash":return Object(o.e)(F,A({},e,{className:h,itemIconEl:y}),Object(o.e)("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author"},t.name));default:throw new Error(`There is no such type ${c}`)}};var E=function(e){const{currentSelection:t,folders:r,files:n,uppyFiles:l,viewType:c,headerComponent:d,showBreadcrumbs:h,isChecked:w,toggleCheckbox:P,recordShiftKeyPress:S,handleScroll:O,showTitles:F,i18n:j,validateRestrictions:A,showFilter:E,filterQuery:R,filterInput:U,getNextFolder:_,cancel:I,done:C,columns:k}=e,N=t.length;return Object(o.e)("div",{className:m()("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${c}`)},Object(o.e)("div",{className:"uppy-ProviderBrowser-header"},Object(o.e)("div",{className:m()("uppy-ProviderBrowser-headerBar",!h&&"uppy-ProviderBrowser-headerBar--simple")},d)),E&&Object(o.e)(f,{i18n:j,filterQuery:R,filterInput:U}),r.length||n.length?Object(o.e)("div",{className:"uppy-ProviderBrowser-body"},Object(o.e)("ul",{className:"uppy-ProviderBrowser-list",onScroll:O,role:"listbox",tabIndex:"-1"},r.map((e=>{var t;return T({columns:k,showTitles:F,viewType:c,i18n:j,id:e.id,title:e.name,getItemIcon:()=>e.icon,isChecked:w(e),toggleCheckbox:t=>P(t,e),recordShiftKeyPress:S,type:"folder",isDisabled:null==(t=w(e))?void 0:t.loading,isCheckboxDisabled:"shared-with-me"===e.id,handleFolderClick:()=>_(e)})})),n.map((e=>{const r=A(Object(y.a)(e),[...l,...t]);return T({id:e.id,title:e.name,author:e.author,getItemIcon:()=>e.icon,isChecked:w(e),toggleCheckbox:t=>P(t,e),recordShiftKeyPress:S,columns:k,showTitles:F,viewType:c,i18n:j,type:"file",isDisabled:r&&!w(e),restrictionError:r})})))):Object(o.e)("div",{className:"uppy-Provider-empty"},j("noFilesFound")),N>0&&Object(o.e)(v,{selected:N,done:C,cancel:I,i18n:j}))},R=e=>{let{i18n:t}=e;return Object(o.e)("div",{className:"uppy-Provider-loading"},Object(o.e)("span",null,t("loading")))};class U extends o.a{componentWillUnmount(){const{onUnmount:e}=this.props;e()}render(){const{children:e}=this.props;return Object(o.g)(e)[0]}}var _=r(416),I=r(335),C=r(396);class k{constructor(e){this.plugin=e,this.filterItems=this.filterItems.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.recordShiftKeyPress=this.recordShiftKeyPress.bind(this),this.isChecked=this.isChecked.bind(this),this.loaderWrapper=this.loaderWrapper.bind(this)}filterItems(e){const t=this.plugin.getPluginState();return t.filterInput&&""!==t.filterInput?e.filter((e=>-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase()))):e}recordShiftKeyPress(e){this.isShiftKeyPressed=e.shiftKey}toggleCheckbox(e,t){e.stopPropagation(),e.preventDefault(),e.currentTarget.focus();const{folders:r,files:o}=this.plugin.getPluginState(),n=this.filterItems(r.concat(o));if(this.lastCheckbox&&this.isShiftKeyPressed){const e=n.indexOf(this.lastCheckbox),r=n.indexOf(t),o=e<r?n.slice(e,r+1):n.slice(r,e+1),l=[];for(const e of o){const{uppy:t}=this.plugin,r=t.validateRestrictions(Object(y.a)(e),[...t.getFiles(),...l]);r?t.info({message:r.message},"error",t.opts.infoTimeout):l.push(e)}return void this.plugin.setPluginState({currentSelection:l})}this.lastCheckbox=t;const{currentSelection:l}=this.plugin.getPluginState();this.isChecked(t)?this.plugin.setPluginState({currentSelection:l.filter((e=>e.id!==t.id))}):this.plugin.setPluginState({currentSelection:l.concat([t])})}isChecked(e){const{currentSelection:t}=this.plugin.getPluginState();return t.some((t=>t.id===e.id))}loaderWrapper(e,t,r){e.then((e=>{this.plugin.setPluginState({loading:!1}),t(e)})).catch((e=>{this.plugin.setPluginState({loading:!1}),r(e)})),this.plugin.setPluginState({loading:!0})}}class N{constructor(e,t){this.plugin=e,this.provider=t.provider,this.sharedHandler=new k(e),this.isHandlingScroll=!1,this.preFirstRender=this.preFirstRender.bind(this),this.handleError=this.handleError.bind(this),this.addFile=this.addFile.bind(this),this.clearSelection=this.clearSelection.bind(this),this.cancelPicking=this.cancelPicking.bind(this)}providerFileToId(e){return Object(C.a)({data:e,name:e.name||e.id,type:e.mimetype})}preFirstRender(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()}shouldHandleScroll(e){const{scrollHeight:t,scrollTop:r,offsetHeight:o}=e.target;return t-(r+o)<50&&!this.isHandlingScroll}clearSelection(){this.plugin.setPluginState({currentSelection:[],filterInput:""})}cancelPicking(){this.clearSelection();const e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()}handleError(e){const{uppy:t}=this.plugin,r=t.i18n("companionError");t.log(e.toString()),e.isAuthError||t.info({message:r,details:e.toString()},"error",5e3)}addFile(e){const t={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,meta:{},body:{fileId:e.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:`${this.provider.fileUrl(e.requestPath)}`,body:{fileId:e.id},providerOptions:this.provider.opts,providerName:this.provider.name}},r=Object(_.a)(t);r&&Object(I.a)(r)&&(t.preview=e.thumbnail),e.author&&(null!=e.author.name&&(t.meta.authorName=String(e.author.name)),e.author.url&&(t.meta.authorUrl=e.author.url)),this.plugin.uppy.log("Adding remote file");try{return this.plugin.uppy.addFile(t),!0}catch(e){return e.isRestriction||this.plugin.uppy.log(e),!1}}}function B(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var x=0;function L(e){return"__private_"+x+++"_"+e}function M(e){return"string"==typeof e?new RegExp(`^${e}$`):e instanceof RegExp?e:void 0}var z=L("updateFilesAndFolders");class D extends N{constructor(e,t){super(e,t),Object.defineProperty(this,z,{value:H});this.opts={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,...t},this.filterQuery=this.filterQuery.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.listAllFiles=this.listAllFiles.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1,currentSelection:[]})}tearDown(){}getFolder(e,t){return this.sharedHandler.loaderWrapper(this.provider.list(e),(r=>{let o;const n=this.plugin.getPluginState(),l=n.directories.findIndex((t=>e===t.id));o=-1!==l?n.directories.slice(0,l+1):n.directories.concat([{id:e,title:t}]),this.username=r.username||this.username,B(this,z)[z](r,[],[]),this.plugin.setPluginState({directories:o,filterInput:""})}),this.handleError)}getNextFolder(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0}logout(){this.provider.logout().then((e=>{if(e.ok){if(!e.revoked){const t=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:e.manual_revoke_url});this.plugin.uppy.info(t,"info",7e3)}const t={authenticated:!1,files:[],folders:[],directories:[],filterInput:""};this.plugin.setPluginState(t)}})).catch(this.handleError)}filterQuery(e){const t=this.plugin.getPluginState();this.plugin.setPluginState({...t,filterInput:e?e.target.value:""})}addFolder(e){const t=this.providerFileToId(e),r={...this.plugin.getPluginState().selectedFolders};if(!(t in r)||!r[t].loading)return r[t]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:{...r}}),this.listAllFiles(e.requestPath).then((o=>{let n=0;o.forEach((e=>{const t=this.providerFileToId(e);this.plugin.uppy.checkIfFileAlreadyExists(t)||n++})),n>0&&o.forEach((e=>this.addFile(e)));const l=o.map(this.providerFileToId);let c;r[t]={loading:!1,files:l},this.plugin.setPluginState({selectedFolders:r,filterInput:""}),c=0===n?this.plugin.uppy.i18n("folderAlreadyAdded",{folder:e.name}):o.length?this.plugin.uppy.i18n("folderAdded",{smart_count:n,folder:e.name}):this.plugin.uppy.i18n("emptyFolderAdded"),this.plugin.uppy.info(c)})).catch((e=>{const r={...this.plugin.getPluginState().selectedFolders};delete r[t],this.plugin.setPluginState({selectedFolders:r}),this.handleError(e)}))}async handleAuth(){await this.provider.ensurePreAuth();const e=btoa(JSON.stringify({origin:location.origin})),t=`@uppy/provider-views=${D.VERSION}`,link=this.provider.authUrl({state:e,uppyVersions:t}),r=window.open(link,"_blank"),o=e=>{if(e.source!==r)return void this.plugin.uppy.log("rejecting event from unknown source");var t,n;t=e.origin,n=this.plugin.opts.companionAllowedHosts,(Array.isArray(n)?n.map(M):[M(n)]).some((pattern=>(null==pattern?void 0:pattern.test(t))||(null==pattern?void 0:pattern.test(`${t}/`))))&&e.source===r||this.plugin.uppy.log(`rejecting event from ${e.origin} vs allowed pattern ${this.plugin.opts.companionAllowedHosts}`);const data="string"==typeof e.data?JSON.parse(e.data):e.data;if(data.error){this.plugin.uppy.log("auth aborted","warning");const{uppy:e}=this.plugin,t=e.i18n("authAborted");e.info({message:t},"warning",5e3)}else data.token?(r.close(),window.removeEventListener("message",o),this.provider.setAuthToken(data.token),this.preFirstRender()):this.plugin.uppy.log("did not receive token from auth window","error")};window.addEventListener("message",o)}async handleScroll(e){const path=this.nextPagePath||null;if(this.shouldHandleScroll(e)&&path){this.isHandlingScroll=!0;try{const e=await this.provider.list(path),{files:t,folders:r}=this.plugin.getPluginState();B(this,z)[z](e,t,r)}catch(e){this.handleError(e)}finally{this.isHandlingScroll=!1}}}async listAllFiles(path,e){void 0===e&&(e=null),e=e||[];const t=await this.provider.list(path);t.items.forEach((t=>{t.isFolder?this.addFolder(t):e.push(t)}));const r=t.nextPagePath;return r?this.listAllFiles(r,e):e}donePicking(){const{currentSelection:e}=this.plugin.getPluginState(),t=e.map((e=>e.isFolder?this.addFolder(e):this.addFile(e)));this.sharedHandler.loaderWrapper(Promise.all(t),(()=>{this.clearSelection()}),(()=>{}))}render(e,t){var r=this;void 0===t&&(t={});const{authenticated:n,didFirstRender:c}=this.plugin.getPluginState();c||this.preFirstRender();const h={...this.opts,...t},{files:m,folders:y,filterInput:f,loading:v,currentSelection:w}=this.plugin.getPluginState(),{isChecked:P,toggleCheckbox:S,recordShiftKeyPress:O,filterItems:F}=this.sharedHandler,j=""!==f,A={showBreadcrumbs:h.showBreadcrumbs,getFolder:this.getFolder,directories:this.plugin.getPluginState().directories,pluginIcon:this.plugin.icon,title:this.plugin.title,logout:this.logout,username:this.username,i18n:this.plugin.uppy.i18n},T={isChecked:P,toggleCheckbox:S,recordShiftKeyPress:O,currentSelection:w,files:j?F(m):m,folders:j?F(y):y,username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.sharedHandler.filterItems,filterQuery:this.filterQuery,logout:this.logout,handleScroll:this.handleScroll,listAllFiles:this.listAllFiles,done:this.donePicking,cancel:this.cancelPicking,headerComponent:d(A),title:this.plugin.title,viewType:h.viewType,showTitles:h.showTitles,showFilter:h.showFilter,showBreadcrumbs:h.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){return r.plugin.uppy.validateRestrictions(...arguments)}};return v?Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)(R,{i18n:this.plugin.uppy.i18n})):n?Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)(E,T)):Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)(l,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}))}}function H(e,t,r){this.nextPagePath=e.nextPagePath,e.items.forEach((e=>{e.isFolder?r.push(e):t.push(e)})),this.plugin.setPluginState({folders:r,files:t})}D.VERSION="3.0.1";var $=e=>{let input,{i18n:t,search:r}=e;const n=()=>{input.value&&r(input.value)};return Object(o.e)("div",{className:"uppy-SearchProvider"},Object(o.e)("input",{className:"uppy-u-reset uppy-c-textInput uppy-SearchProvider-input",type:"search","aria-label":t("enterTextToSearch"),placeholder:t("enterTextToSearch"),onKeyUp:e=>{13===e.keyCode&&n()},ref:e=>{input=e},"data-uppy-super-focusable":!0}),Object(o.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-SearchProvider-searchButton",type:"button",onClick:n},t("searchImages")))};var G=e=>{const{searchTerm:t,i18n:r,search:n}=e;return Object(o.e)("div",{class:"uppy-ProviderBrowser-search"},Object(o.e)("input",{class:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:r("search"),"aria-label":r("search"),value:t,onKeyUp:e=>{13===e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e.target.value))},"data-uppy-super-focusable":!0}),Object(o.e)("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-c-icon uppy-ProviderBrowser-searchIcon",width:"12",height:"12",viewBox:"0 0 12 12"},Object(o.e)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})))};function W(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var V=0;function Q(e){return"__private_"+V+++"_"+e}var X=Q("updateFilesAndInputMode");function K(e,t){this.nextPageQuery=e.nextPageQuery,e.items.forEach((e=>{t.push(e)})),this.plugin.setPluginState({isInputMode:!1,files:t,searchTerm:e.searchedFor})}(class extends N{constructor(e,t){super(e,t),Object.defineProperty(this,X,{value:K});this.opts={viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1,...t},this.search=this.search.bind(this),this.triggerSearchInput=this.triggerSearchInput.bind(this),this.addFile=this.addFile.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.plugin.setPluginState({isInputMode:!0,files:[],folders:[],directories:[],filterInput:"",currentSelection:[],searchTerm:null})}tearDown(){}clearSelection(){this.plugin.setPluginState({currentSelection:[],isInputMode:!0,files:[],searchTerm:null})}search(e){const{searchTerm:t}=this.plugin.getPluginState();if(!e||e!==t)return this.sharedHandler.loaderWrapper(this.provider.search(e),(e=>{W(this,X)[X](e,[])}),this.handleError)}triggerSearchInput(){this.plugin.setPluginState({isInputMode:!0})}async handleScroll(e){const t=this.nextPageQuery||null;if(this.shouldHandleScroll(e)&&t){this.isHandlingScroll=!0;try{const{files:e,searchTerm:r}=this.plugin.getPluginState(),o=await this.provider.search(r,t);W(this,X)[X](o,e)}catch(e){this.handleError(e)}finally{this.isHandlingScroll=!1}}}donePicking(){const{currentSelection:e}=this.plugin.getPluginState(),t=e.map((e=>this.addFile(e)));this.sharedHandler.loaderWrapper(Promise.all(t),(()=>{this.clearSelection()}),(()=>{}))}render(e,t){var r=this;void 0===t&&(t={});const{didFirstRender:n,isInputMode:l,searchTerm:c}=this.plugin.getPluginState();n||this.preFirstRender();const d={...this.opts,...t},{files:h,folders:m,filterInput:y,loading:f,currentSelection:v}=this.plugin.getPluginState(),{isChecked:w,toggleCheckbox:P,filterItems:S}=this.sharedHandler,O=""!==y,F={isChecked:w,toggleCheckbox:P,currentSelection:v,files:O?S(h):h,folders:O?S(m):m,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,headerComponent:G({search:this.search,i18n:this.plugin.uppy.i18n,searchTerm:c}),title:this.plugin.title,viewType:d.viewType,showTitles:d.showTitles,showFilter:d.showFilter,showBreadcrumbs:d.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){return r.plugin.uppy.validateRestrictions(...arguments)}};return f?Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)(R,{i18n:this.plugin.uppy.i18n})):l?Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)($,{search:this.search,i18n:this.plugin.uppy.i18n})):Object(o.e)(U,{onUnmount:this.clearSelection},Object(o.e)(E,F))}}).VERSION="3.0.1"},68:function(e,t,r){"use strict";r.d(t,"a",(function(){return St}));var o=r(155),n=r(241),l=r(399),c=r(152),d=r(411),h=r(187),m=r(817),y=r(818),f=r(819),v=r(509),w=r(281),P=r(820);function S(e){return(t,r)=>{if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)||"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return d.b.fingerprint(t,r);const o=["tus",e.id,r.endpoint].join("-");return Promise.resolve(o)}}function O(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var F=0;function j(e){return"__private_"+F+++"_"+e}const A={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1};var T=j("retryDelayIterator"),E=j("queueRequestSocketToken"),R=j("requestSocketToken");class U extends c.a{constructor(e,t){var r,o;super(e,t),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:async e=>{const t=new(e.remote.providerOptions.provider?h.a:h.b)(this.uppy,e.remote.providerOptions),r={...this.opts};e.tus&&Object.assign(r,e.tus);return(await t.post(e.remote.url,{...e.remote.body,endpoint:r.endpoint,uploadUrl:r.uploadUrl,protocol:"tus",size:e.data.size,headers:r.headers,metadata:e.meta})).token}}),this.type="uploader",this.id=this.opts.id||"Tus",this.title="Tus";const n={useFastRemoteRetry:!0,limit:20,retryDelays:A.retryDelays,withCredentials:!1};if(this.opts={...n,...t},void 0===(null==t?void 0:t.allowedMetaFields)&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=null!=(r=this.opts.rateLimitedQueue)?r:new l.a(this.opts.limit),O(this,T)[T]=null==(o=this.opts.retryDelays)?void 0:o.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null),this.uploaderSockets=Object.create(null),this.handleResetProgress=this.handleResetProgress.bind(this),this.handleUpload=this.handleUpload.bind(this),O(this,E)[E]=this.requests.wrapPromiseFunction(O(this,R)[R])}handleResetProgress(){const e={...this.uppy.getState().files};Object.keys(e).forEach((t=>{if(e[t].tus&&e[t].tus.uploadUrl){const r={...e[t].tus};delete r.uploadUrl,e[t]={...e[t],tus:r}}})),this.uppy.setState({files:e})}resetUploaderReferences(e,t){if(void 0===t&&(t={}),this.uploaders[e]){const r=this.uploaders[e];r.abort(),t.abort&&r.abort(!0),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)}upload(e){var t=this;return this.resetUploaderReferences(e.id),new Promise(((r,n)=>{let l,c,h;this.uppy.emit("upload-started",e);const m={...this.opts,...e.tus||{}};"function"==typeof m.headers&&(m.headers=m.headers(e));const y={...A,...m};y.fingerprint=S(e),y.onBeforeRequest=t=>{let r;if(t.getUnderlyingObject().withCredentials=!!m.withCredentials,"function"==typeof m.onBeforeRequest&&(r=m.onBeforeRequest(t,e)),Object(o.a)(l,"shouldBeRequeued")){if(!l.shouldBeRequeued)return Promise.reject();let t;const p=new Promise((e=>{t=e}));return l=this.requests.run((()=>(e.isPaused&&l.abort(),t(),()=>{}))),Promise.all([p,r])}return r},y.onError=t=>{var r;this.uppy.log(t);const o=t.originalRequest?t.originalRequest.getUnderlyingObject():null;Object(P.a)(o)&&(t=new w.a(t,o)),this.resetUploaderReferences(e.id),null==(r=l)||r.abort(),this.uppy.emit("upload-error",e,t),n(t)},y.onProgress=(t,r)=>{this.onReceiveUploadUrl(e,h.url),this.uppy.emit("upload-progress",e,{uploader:this,bytesUploaded:t,bytesTotal:r})},y.onSuccess=()=>{const t={uploadURL:h.url};this.resetUploaderReferences(e.id),l.done(),this.uppy.emit("upload-success",e,t),h.url&&this.uppy.log(`Download ${h.file.name} from ${h.url}`),r(h)};const f=e=>{var t;const r=null==e||null==(t=e.originalResponse)?void 0:t.getStatus();if(429===r){if(!this.requests.isPaused){var o;const e=null==(o=O(this,T)[T])?void 0:o.next();if(null==e||e.done)return!1;this.requests.rateLimit(e.value)}}else{if(r>400&&r<500&&409!==r)return!1;"undefined"!=typeof navigator&&!1===navigator.onLine&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",(()=>{this.requests.resume()}),{once:!0})))}return l.abort(),l={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};null!=m.onShouldRetry?y.onShouldRetry=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.onShouldRetry(...t,f)}:y.onShouldRetry=f;const F=(e,t,r)=>{Object(o.a)(e,t)&&!Object(o.a)(e,r)&&(e[r]=e[t])},meta={};(Array.isArray(m.allowedMetaFields)?m.allowedMetaFields:Object.keys(e.meta)).forEach((t=>{meta[t]=e.meta[t]})),F(meta,"type","filetype"),F(meta,"name","filename"),y.metadata=meta,h=new d.a(e.data,y),this.uploaders[e.id]=h,this.uploaderEvents[e.id]=new v.a(this.uppy),c=()=>(e.isPaused||h.start(),()=>{}),h.findPreviousUploads().then((t=>{const r=t[0];r&&(this.uppy.log(`[Tus] Resuming upload of ${e.id} started at ${r.creationTime}`),h.resumeFromPreviousUpload(r))})),l=this.requests.run(c),this.onFileRemove(e.id,(t=>{l.abort(),this.resetUploaderReferences(e.id,{abort:!!h.url}),r(`upload ${t} was removed`)})),this.onPause(e.id,(e=>{l.abort(),e?h.abort():l=this.requests.run(c)})),this.onPauseAll(e.id,(()=>{l.abort(),h.abort()})),this.onCancelAll(e.id,(function(o){let{reason:n}=void 0===o?{}:o;"user"===n&&(l.abort(),t.resetUploaderReferences(e.id,{abort:!!h.url})),r(`upload ${e.id} was canceled`)})),this.onResumeAll(e.id,(()=>{l.abort(),e.error&&h.abort(),l=this.requests.run(c)}))})).catch((t=>{throw this.uppy.emit("upload-error",e,t),t}))}async uploadRemote(e){this.resetUploaderReferences(e.id),e.progress.uploadStarted&&e.isRestored||this.uppy.emit("upload-started",e);try{if(e.serverToken)return this.connectToServerSocket(e);const t=await O(this,E)[E](e);return this.uppy.setFileState(e.id,{serverToken:t}),this.connectToServerSocket(this.uppy.getFile(e.id))}catch(t){throw this.uppy.emit("upload-error",e,t),t}}connectToServerSocket(e){var t=this;return new Promise(((r,o)=>{const n=e.serverToken,l=Object(y.a)(e.remote.companionUrl),c=new h.c({target:`${l}/api/${n}`});let d;this.uploaderSockets[e.id]=c,this.uploaderEvents[e.id]=new v.a(this.uppy),this.onFileRemove(e.id,(()=>{d.abort(),c.send("cancel",{}),this.resetUploaderReferences(e.id),r(`upload ${e.id} was removed`)})),this.onPause(e.id,(e=>{e?(d.abort(),c.send("pause",{})):(d.abort(),d=this.requests.run((()=>(c.send("resume",{}),()=>{}))))})),this.onPauseAll(e.id,(()=>{d.abort(),c.send("pause",{})})),this.onCancelAll(e.id,(function(o){let{reason:n}=void 0===o?{}:o;"user"===n&&(d.abort(),c.send("cancel",{}),t.resetUploaderReferences(e.id)),r(`upload ${e.id} was canceled`)})),this.onResumeAll(e.id,(()=>{d.abort(),e.error&&c.send("pause",{}),d=this.requests.run((()=>(c.send("resume",{}),()=>{})))})),this.onRetry(e.id,(()=>{c.isOpen&&(c.send("pause",{}),c.send("resume",{}))})),this.onRetryAll(e.id,(()=>{c.isOpen&&(c.send("pause",{}),c.send("resume",{}))})),c.on("progress",(t=>Object(m.a)(this,t,e))),c.on("error",(t=>{const{message:r}=t.error,n=Object.assign(new Error(r),{cause:t.error});this.opts.useFastRemoteRetry?c.close():(this.resetUploaderReferences(e.id),this.uppy.setFileState(e.id,{serverToken:null})),this.uppy.emit("upload-error",e,n),d.done(),o(n)})),c.on("success",(data=>{const t={uploadURL:data.url};this.uppy.emit("upload-success",e,t),this.resetUploaderReferences(e.id),d.done(),r()})),d=this.requests.run((()=>(e.isPaused&&c.send("pause",{}),()=>{})))}))}onReceiveUploadUrl(e,t){const r=this.uppy.getFile(e.id);r&&(r.tus&&r.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(r.id,{tus:{...r.tus,uploadUrl:t}})))}onFileRemove(e,t){this.uploaderEvents[e].on("file-removed",(r=>{e===r.id&&t(r.id)}))}onPause(e,t){this.uploaderEvents[e].on("upload-pause",((r,o)=>{e===r&&t(o)}))}onRetry(e,t){this.uploaderEvents[e].on("upload-retry",(r=>{e===r&&t()}))}onRetryAll(e,t){this.uploaderEvents[e].on("retry-all",(()=>{this.uppy.getFile(e)&&t()}))}onPauseAll(e,t){this.uploaderEvents[e].on("pause-all",(()=>{this.uppy.getFile(e)&&t()}))}onCancelAll(e,t){var r=this;this.uploaderEvents[e].on("cancel-all",(function(){r.uppy.getFile(e)&&t(...arguments)}))}onResumeAll(e,t){this.uploaderEvents[e].on("resume-all",(()=>{this.uppy.getFile(e)&&t()}))}uploadFiles(e){const t=e.map(((t,i)=>{const r=i+1,o=e.length;return"error"in t&&t.error?Promise.reject(new Error(t.error)):t.isRemote?(t.progress.uploadStarted&&t.isRestored||this.uppy.emit("upload-started",t),this.uploadRemote(t,r,o)):(t.progress.uploadStarted&&t.isRestored||this.uppy.emit("upload-started",t),this.upload(t,r,o))}));return Object(f.a)(t)}handleUpload(e){if(0===e.length)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const t=e.map((e=>this.uppy.getFile(e)));return this.uploadFiles(t).then((()=>null))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress)}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(this.handleUpload)}}U.VERSION="3.0.2";var _=r(400),I=r.n(_),C=r(881),k=r(223);function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var B=0;function x(e){return"__private_"+B+++"_"+e}const L="ASSEMBLY_EXECUTING",M="ASSEMBLY_COMPLETED",z=["ASSEMBLY_UPLOADING",L,M];function D(e,t){return z.indexOf(e)>=z.indexOf(t)}var H=x("rateLimitedQueue"),$=x("fetchWithNetworkError"),G=x("previousFetchStatusStillPending"),W=x("onFinished"),V=x("connectSocket"),Q=x("onError"),X=x("beginPolling"),K=x("fetchStatus"),J=x("diffStatus");class Y extends I.a{constructor(e,t){super(),Object.defineProperty(this,J,{value:re}),Object.defineProperty(this,K,{value:ie}),Object.defineProperty(this,X,{value:se}),Object.defineProperty(this,Q,{value:te}),Object.defineProperty(this,V,{value:ee}),Object.defineProperty(this,W,{value:Z}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:!1}),this.status=e,this.socket=null,this.pollInterval=null,this.closed=!1,N(this,H)[H]=t,N(this,$)[$]=t.wrapPromiseFunction(k.a)}connect(){N(this,V)[V](),N(this,X)[X]()}update(){return N(this,K)[K]({diff:!0})}updateStatus(e){N(this,J)[J](this.status,e),this.status=e}close(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval),this.pollInterval=null}}function Z(){this.emit("finished"),this.close()}function ee(){const e=function(e){const t=/^\w+:\/\//.exec(e);let i=0;t&&(i=t[0].length+1);const r=e.indexOf("/",i);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}}(this.status.websocket_url),t=Object(C.a)(e.origin,{transports:["websocket"],path:e.pathname});t.on("connect",(()=>{t.emit("assembly_connect",{id:this.status.assembly_id}),this.emit("connect")})),t.on("connect_error",(()=>{t.disconnect(),this.socket=null})),t.on("assembly_finished",(()=>{N(this,W)[W]()})),t.on("assembly_upload_finished",(e=>{this.emit("upload",e),this.status.uploads.push(e)})),t.on("assembly_uploading_finished",(()=>{this.emit("executing")})),t.on("assembly_upload_meta_data_extracted",(()=>{this.emit("metadata"),N(this,K)[K]({diff:!1})})),t.on("assembly_result_finished",((e,t)=>{this.emit("result",e,t),this.status.results[e]||(this.status.results[e]=[]),this.status.results[e].push(t)})),t.on("assembly_error",(e=>{N(this,Q)[Q](e),N(this,K)[K]({diff:!1})})),this.socket=t}function te(e){this.emit("error",Object.assign(new Error(e.message),e)),this.close()}function se(){this.pollInterval=setInterval((()=>{this.socket&&this.socket.connected||N(this,K)[K]()}),2e3)}async function ie(e){let{diff:t=!0}=void 0===e?{}:e;if(!(this.closed||N(this,H)[H].isPaused||N(this,G)[G]))try{N(this,G)[G]=!0;const e=await N(this,$)[$](this.status.assembly_ssl_url);if(N(this,G)[G]=!1,this.closed)return;if(429===e.status)return void N(this,H)[H].rateLimit(2e3);if(!e.ok)return void N(this,Q)[Q](new w.a(e.statusText));const r=await e.json();if(this.closed)return;this.emit("status",r),t?this.updateStatus(r):this.status=r}catch(e){N(this,Q)[Q](e)}}function re(e,t){const r=e.ok,n=t.ok;if(t.error&&!e.error)return N(this,Q)[Q](t);const l=D(n,L)&&!D(r,L);l&&this.emit("executing"),Object.keys(t.uploads).filter((t=>!Object(o.a)(e.uploads,t))).forEach((e=>{this.emit("upload",t.uploads[e])})),l&&this.emit("metadata"),Object.keys(t.results).forEach((r=>{const o=t.results[r],n=e.results[r];o.filter((e=>!n||!n.some((p=>p.id===e.id)))).forEach((e=>{this.emit("result",r,e)}))})),D(n,M)&&!D(r,M)&&this.emit("finished")}var oe=Y;function ae(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ne=0;function le(e){return"__private_"+ne+++"_"+e}const ue="/assemblies";var ce=le("headers"),de=le("fetchWithNetworkError"),pe=le("fetchJSON"),he=le("reportError");class me{constructor(e){void 0===e&&(e={}),Object.defineProperty(this,pe,{value:be}),Object.defineProperty(this,ce,{writable:!0,value:{}}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:(e,t)=>{if(!1===this.opts.errorReporting)throw e;const r={type:t.type};throw t.assembly&&(r.assembly=t.assembly.assembly_id,r.instance=t.assembly.instance),t.url&&(r.endpoint=t.url),this.submitError(e,r).catch((()=>{})),e}}),this.opts=e,null!=this.opts.client&&(ae(this,ce)[ce]["Transloadit-Client"]=this.opts.client),ae(this,de)[de]=this.opts.rateLimitedQueue.wrapPromiseFunction(k.a)}createAssembly(e){let{params:t,fields:r,signature:o,expectedFiles:n}=e;const data=new FormData;data.append("params","string"==typeof t?t:JSON.stringify(t)),o&&data.append("signature",o),Object.keys(r).forEach((e=>{data.append(e,r[e])})),data.append("num_expected_upload_files",n);const l=new URL(ue,`${this.opts.service}`).href;return ae(this,pe)[pe](l,{method:"post",headers:ae(this,ce)[ce],body:data}).catch((e=>ae(this,he)[he](e,{url:l,type:"API_ERROR"})))}reserveFile(e,t){const r=encodeURIComponent(t.size),o=`${e.assembly_ssl_url}/reserve_file?size=${r}`;return ae(this,pe)[pe](o,{method:"post",headers:ae(this,ce)[ce]}).catch((r=>ae(this,he)[he](r,{assembly:e,file:t,url:o,type:"API_ERROR"})))}addFile(e,t){if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));const r=encodeURIComponent(t.size),o=encodeURIComponent(t.uploadURL),n=`size=${r}&filename=${encodeURIComponent(t.name)}&fieldname=file&s3Url=${o}`,l=`${e.assembly_ssl_url}/add_file?${n}`;return ae(this,pe)[pe](l,{method:"post",headers:ae(this,ce)[ce]}).catch((r=>ae(this,he)[he](r,{assembly:e,file:t,url:l,type:"API_ERROR"})))}updateNumberOfFilesInAssembly(e,t){const r=new URL(e.assembly_ssl_url);r.pathname="/update_assemblies";const body=JSON.stringify({assembly_updates:[{assembly_id:e.assembly_id,num_expected_upload_files:t}]});return ae(this,pe)[pe](r,{method:"post",headers:ae(this,ce)[ce],body:body}).catch((e=>ae(this,he)[he](e,{url:r,type:"API_ERROR"})))}cancelAssembly(e){const t=e.assembly_ssl_url;return ae(this,pe)[pe](t,{method:"delete",headers:ae(this,ce)[ce]}).catch((e=>ae(this,he)[he](e,{url:t,type:"API_ERROR"})))}getAssemblyStatus(e){return ae(this,pe)[pe](e,{headers:ae(this,ce)[ce]}).catch((t=>ae(this,he)[he](t,{url:e,type:"STATUS_ERROR"})))}submitError(e,t){let{endpoint:r,instance:o,assembly:n}=void 0===t?{}:t;const l=e.details?`${e.message} (${e.details})`:e.message;return ae(this,pe)[pe]("https://transloaditstatus.com/client_error",{method:"post",body:JSON.stringify({endpoint:r,instance:o,assembly_id:n,agent:"undefined"!=typeof navigator?navigator.userAgent:"",client:this.opts.client,error:l})})}}function be(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ae(this,de)[de](...t).then((e=>{if(429===e.status)return this.opts.rateLimitedQueue.rateLimit(2e3),ae(this,pe)[pe](...t);if(!e.ok){const r=new Error(e.statusText);return r.statusCode=e.status,`${t[0]}`.endsWith(ue)?e.json().then((e=>{if(!e.error)throw r;const t=new Error(e.error);throw t.details=e.message,t.assembly=e,e.assembly_id&&(t.details+=` Assembly ID: ${e.assembly_id}`),t}),(e=>{throw e.cause=r,e})):Promise.reject(r)}return e.json()}))}var ye=0;function ge(e){return"__private_"+ye+++"_"+e}function fe(e){if(null==e)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw new n.a("Transloadit: The `params` option is a malformed JSON string.",{cause:e})}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/c/template-credentials")}function ve(e){const t=Object.create(null);for(const{fileIDs:r,options:o}of e.filter(Boolean)){const e=JSON.stringify(o);e in t?t[e].fileIDArrays.push(r):t[e]={options:o,fileIDArrays:[r]}}return Object.values(t).map((e=>{let{options:t,fileIDArrays:r}=e;return{options:t,fileIDs:r.flat(1)}}))}var we=ge("getAssemblyOptions");async function Pe(e){if(null==e)return;const t=this.opts,r=await t.getAssemblyOptions(e,t);return null!=e?(Array.isArray(r.fields)?r.fields=Object.fromEntries(r.fields.map((t=>[t,e.meta[t]]))):null==r.fields&&(r.fields={}),fe(r.params),{fileIDs:[e.id],options:r}):void 0}var Se=class{constructor(e,t){Object.defineProperty(this,we,{value:Pe}),this.files=e,this.opts=t}async build(){const e=this.opts;if(this.files.length>0)return Promise.all(this.files.map((e=>function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,we)[we](e)))).then(ve);if(e.alwaysRunAssembly){const t=await e.getAssemblyOptions(null,e);return fe(t.params),[{fileIDs:this.files.map((e=>e.id)),options:t}]}return[]}};function Oe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Fe=0;function je(e){return"__private_"+Fe+++"_"+e}var Ae=je("assemblyIDs"),Te=je("reject"),Ee=je("remaining"),Re=je("resolve"),Ue=je("uppy"),_e=je("watching"),Ie=je("onAssemblyComplete"),Ce=je("onAssemblyCancel"),ke=je("onAssemblyError"),Ne=je("onImportError"),Be=je("checkAllComplete"),qe=je("removeListeners"),xe=je("addListeners");class Le extends I.a{constructor(e,t){super(),Object.defineProperty(this,xe,{value:He}),Object.defineProperty(this,qe,{value:De}),Object.defineProperty(this,Be,{value:ze}),Object.defineProperty(this,_e,{value:Me}),Object.defineProperty(this,Ae,{writable:!0,value:void 0}),Object.defineProperty(this,Te,{writable:!0,value:void 0}),Object.defineProperty(this,Ee,{writable:!0,value:void 0}),Object.defineProperty(this,Re,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,Ie,{writable:!0,value:e=>{Oe(this,_e)[_e](e.assembly_id)&&(Oe(this,Ue)[Ue].log(`[Transloadit] AssemblyWatcher: Got Assembly finish ${e.assembly_id}`),this.emit("assembly-complete",e.assembly_id),Oe(this,Be)[Be]())}}),Object.defineProperty(this,Ce,{writable:!0,value:e=>{Oe(this,_e)[_e](e.assembly_id)&&Oe(this,Be)[Be]()}}),Object.defineProperty(this,ke,{writable:!0,value:(e,t)=>{Oe(this,_e)[_e](e.assembly_id)&&(Oe(this,Ue)[Ue].log(`[Transloadit] AssemblyWatcher: Got Assembly error ${e.assembly_id}`),Oe(this,Ue)[Ue].log(t),this.emit("assembly-error",e.assembly_id,t),Oe(this,Be)[Be]())}}),Object.defineProperty(this,Ne,{writable:!0,value:(e,t,r)=>{Oe(this,_e)[_e](e.assembly_id)&&Oe(this,ke)[ke](e,r)}}),Oe(this,Ue)[Ue]=e,Oe(this,Ae)[Ae]=t,Oe(this,Ee)[Ee]=t.length,this.promise=new Promise(((e,t)=>{Oe(this,Re)[Re]=e,Oe(this,Te)[Te]=t})),Oe(this,xe)[xe]()}}function Me(e){return-1!==Oe(this,Ae)[Ae].indexOf(e)}function ze(){Oe(this,Ee)[Ee]-=1,0===Oe(this,Ee)[Ee]&&(Oe(this,qe)[qe](),Oe(this,Re)[Re]())}function De(){Oe(this,Ue)[Ue].off("transloadit:complete",Oe(this,Ie)[Ie]),Oe(this,Ue)[Ue].off("transloadit:assembly-cancel",Oe(this,Ce)[Ce]),Oe(this,Ue)[Ue].off("transloadit:assembly-error",Oe(this,ke)[ke]),Oe(this,Ue)[Ue].off("transloadit:import-error",Oe(this,Ne)[Ne])}function He(){Oe(this,Ue)[Ue].on("transloadit:complete",Oe(this,Ie)[Ie]),Oe(this,Ue)[Ue].on("transloadit:assembly-cancel",Oe(this,Ce)[Ce]),Oe(this,Ue)[Ue].on("transloadit:assembly-error",Oe(this,ke)[ke]),Oe(this,Ue)[Ue].on("transloadit:import-error",Oe(this,Ne)[Ne])}var $e=Le,Ge={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}};function We(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ve=0;function Qe(e){return"__private_"+Ve+++"_"+e}function Xe(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}const Ke=e=>t=>{const r=new n.a("Failed to send error to the client",{cause:t});console.error(r,e)},Je=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/;var Ye=Qe("rateLimitedQueue"),Ze=Qe("getClientVersion"),et=Qe("attachAssemblyMetadata"),tt=Qe("createAssembly"),st=Qe("createAssemblyWatcher"),it=Qe("shouldWaitAfterUpload"),ot=Qe("reserveFiles"),at=Qe("onFileUploadURLAvailable"),nt=Qe("findFile"),lt=Qe("onFileUploadComplete"),ut=Qe("onResult"),ct=Qe("onAssemblyFinished"),pt=Qe("cancelAssembly"),ht=Qe("onCancelAll"),mt=Qe("getPersistentData"),bt=Qe("onRestored"),yt=Qe("connectAssembly"),gt=Qe("prepareUpload"),ft=Qe("afterUpload"),vt=Qe("closeAssemblyIfExists"),wt=Qe("onError"),Pt=Qe("onTusError");class St extends c.a{constructor(e,t){var r;super(e,t),r=this,Object.defineProperty(this,yt,{value:kt}),Object.defineProperty(this,pt,{value:Ct}),Object.defineProperty(this,ct,{value:It}),Object.defineProperty(this,ut,{value:_t}),Object.defineProperty(this,lt,{value:Ut}),Object.defineProperty(this,nt,{value:Rt}),Object.defineProperty(this,ot,{value:Et}),Object.defineProperty(this,it,{value:Tt}),Object.defineProperty(this,st,{value:At}),Object.defineProperty(this,tt,{value:jt}),Object.defineProperty(this,et,{value:Ft}),Object.defineProperty(this,Ze,{value:Ot}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:e=>{var t;const r=this.uppy.getFile(e.id);if(null==r||null==(t=r.transloadit)||!t.assembly)return;const{assemblies:o}=this.getPluginState(),n=o[r.transloadit.assembly];this.client.addFile(n,r).catch((e=>{this.uppy.log(e),this.uppy.emit("transloadit:import-error",n,r.id,e)}))}}),Object.defineProperty(this,ht,{writable:!0,value:async function(e){let{reason:t}=void 0===e?{}:e;try{if("user"!==t)return;const{uploadsAssemblies:e}=r.getPluginState(),o=Object.values(e).flat(1).map((e=>r.getAssembly(e)));await Promise.all(o.map((e=>We(r,pt)[pt](e))))}catch(e){r.uppy.log(e)}}}),Object.defineProperty(this,mt,{writable:!0,value:e=>{const{assemblies:t,uploadsAssemblies:r}=this.getPluginState();e({[this.id]:{assemblies:t,uploadsAssemblies:r}})}}),Object.defineProperty(this,bt,{writable:!0,value:e=>{const t=e&&e[this.id]?e[this.id]:{},r=t.assemblies||{},o=t.uploadsAssemblies||{};if(0===Object.keys(o).length)return;const n=e=>{const t={},r=[];for(const[o,n]of Object.entries(e)){n.uploads.forEach((e=>{const r=We(this,nt)[nt](e);t[e.id]={id:r.id,assembly:o,uploadedFile:e}}));const e=this.getPluginState();Object.keys(n.results).forEach((t=>{for(const l of n.results[t]){const n=e.files[l.original_id];l.localId=n?n.id:null,r.push({id:l.id,result:l,stepName:t,assembly:o})}}))}this.setPluginState({assemblies:e,files:t,results:r,uploadsAssemblies:o})},l=()=>{const{assemblies:e,uploadsAssemblies:t}=this.getPluginState();Object.keys(t).forEach((e=>{const r=t[e];We(this,st)[st](r,e)}));Object.keys(e).forEach((t=>{const r=new oe(e[t],We(this,Ye)[Ye]);We(this,yt)[yt](r)}))},c=()=>{const{assemblies:e}=this.getPluginState();return Promise.all(Object.keys(e).map((e=>this.activeAssemblies[e].update())))};this.restored=Promise.resolve().then((()=>(n(r),l(),c()))),this.restored.then((()=>{this.restored=null}))}}),Object.defineProperty(this,gt,{writable:!0,value:(e,t)=>{const r=e.map((e=>this.uppy.getFile(e))).filter((e=>!e.error&&(this.uppy.emit("preprocess-progress",e,{mode:"indeterminate",message:this.i18n("creatingAssembly")}),!0))),o=async e=>{let{fileIDs:r,options:o}=e;try{const e=await We(this,tt)[tt](r,t,o);return this.opts.importFromUploadURLs&&await We(this,ot)[ot](e,r),r.forEach((e=>{const t=this.uppy.getFile(e);this.uppy.emit("preprocess-complete",t)})),e}catch(e){throw r.forEach((t=>{const r=this.uppy.getFile(t);this.uppy.emit("preprocess-complete",r),this.uppy.emit("upload-error",r,e)})),e}},{uploadsAssemblies:n}=this.getPluginState();this.setPluginState({uploadsAssemblies:{...n,[t]:[]}});return new Se(r,this.opts).build().then((e=>Promise.all(e.map(o)))).then((e=>{const r=e.filter(Boolean),o=r.map((e=>e.status.assembly_id));return We(this,st)[st](o,t),Promise.all(r.map((e=>We(this,yt)[yt](e))))})).catch((e=>{throw r.forEach((t=>{this.uppy.emit("preprocess-complete",t),this.uppy.emit("upload-error",t,e)})),e}))}}),Object.defineProperty(this,ft,{writable:!0,value:(e,t)=>{const r=e.map((e=>this.uppy.getFile(e))),n=r.filter((e=>!e.error)).map((e=>e.id)),l=this.getPluginState();if(this.restored)return this.restored.then((()=>We(this,ft)[ft](n,t)));const c=l.uploadsAssemblies[t],d=()=>{c.forEach((e=>{this.activeAssemblies[e].close(),delete this.activeAssemblies[e]}))};if(!We(this,it)[it]()){d();const e=c.map((e=>this.getAssembly(e)));return this.uppy.addResultData(t,{transloadit:e}),Promise.resolve()}if(0===c.length)return this.uppy.addResultData(t,{transloadit:[]}),Promise.resolve();r.filter((e=>!Object(o.a)(this.completedFiles,e.id))).forEach((e=>{this.uppy.emit("postprocess-progress",e,{mode:"indeterminate",message:this.i18n("encoding")})}));return this.assemblyWatchers[t].promise.then((()=>{d();const e=c.map((e=>this.getAssembly(e))),r={...this.getPluginState().uploadsAssemblies};delete r[t],this.setPluginState({uploadsAssemblies:r}),this.uppy.addResultData(t,{transloadit:e})}))}}),Object.defineProperty(this,vt,{writable:!0,value:e=>{var t;null==(t=this.activeAssemblies[e])||t.close()}}),Object.defineProperty(this,wt,{writable:!0,value:function(e,t){void 0===e&&(e=null);const o=r.getPluginState().uploadsAssemblies[t];null==o||o.forEach(We(r,vt)[vt]),r.client.submitError(e).catch(Ke(e))}}),Object.defineProperty(this,Pt,{writable:!0,value:(e,t)=>{var r,o;if(We(this,vt)[vt](null==e||null==(r=e.transloadit)?void 0:r.assembly),null!=t&&null!=(o=t.message)&&o.startsWith("tus: ")){var n,l;const e=null==(n=t.originalRequest)||null==(l=n.getUnderlyingObject())?void 0:l.responseURL;this.client.submitError(t,{endpoint:e,type:"TUS_ERROR"}).catch(Ke(t))}}}),this.type="uploader",this.id=this.opts.id||"Transloadit",this.title="Transloadit",this.defaultLocale=Ge;const n={service:"https://api2.transloadit.com",errorReporting:!0,waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:Xe,limit:20,retryDelays:[7e3,1e4,15e3,2e4]};this.opts={...n,...t},We(this,Ye)[Ye]=new l.a(this.opts.limit),this.i18nInit();const c=this.opts.getAssemblyOptions!==n.getAssemblyOptions;this.opts.params?fe(this.opts.params):c||fe(null),this.client=new me({service:this.opts.service,client:We(this,Ze)[Ze](),errorReporting:this.opts.errorReporting,rateLimitedQueue:We(this,Ye)[Ye]}),this.activeAssemblies={},this.assemblyWatchers={},this.completedFiles=Object.create(null)}install(){this.uppy.addPreProcessor(We(this,gt)[gt]),this.uppy.addPostProcessor(We(this,ft)[ft]),this.uppy.on("error",We(this,wt)[wt]),this.uppy.on("cancel-all",We(this,ht)[ht]),this.uppy.on("upload-error",We(this,Pt)[Pt]),this.opts.importFromUploadURLs?this.uppy.on("upload-success",We(this,at)[at]):this.uppy.use(U,{storeFingerprintForResuming:!1,useFastRemoteRetry:!1,allowedMetaFields:["assembly_url","filename","fieldname"],limit:this.opts.limit,rateLimitedQueue:We(this,Ye)[Ye],retryDelays:this.opts.retryDelays}),this.uppy.on("restore:get-data",We(this,mt)[mt]),this.uppy.on("restored",We(this,bt)[bt]),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]});const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}uninstall(){this.uppy.removePreProcessor(We(this,gt)[gt]),this.uppy.removePostProcessor(We(this,ft)[ft]),this.uppy.off("error",We(this,wt)[wt]),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",We(this,at)[at]);const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}getAssembly(e){const{assemblies:t}=this.getPluginState();return t[e]}getAssemblyFiles(e){return this.uppy.getFiles().filter((t=>{var r;return(null==t||null==(r=t.transloadit)?void 0:r.assembly)===e}))}}function Ot(){const e=[`uppy-core:${this.uppy.constructor.VERSION}`,`uppy-transloadit:${this.constructor.VERSION}`,`uppy-tus:${U.VERSION}`],t=(t,r)=>{const o=this.uppy.getPlugin(t);o&&e.push(`${r}:${o.constructor.VERSION}`)};return this.opts.importFromUploadURLs&&(t("XHRUpload","uppy-xhr-upload"),t("AwsS3","uppy-aws-s3"),t("AwsS3Multipart","uppy-aws-s3-multipart")),t("Dropbox","uppy-dropbox"),t("Box","uppy-box"),t("Facebook","uppy-facebook"),t("GoogleDrive","uppy-google-drive"),t("Instagram","uppy-instagram"),t("OneDrive","uppy-onedrive"),t("Zoom","uppy-zoom"),t("Url","uppy-url"),e.join(",")}function Ft(e,t){const meta={...e.meta,assembly_url:t.assembly_url,filename:e.name,fieldname:"file"},r={...e.tus,endpoint:t.tus_url,addRequestId:!0};let{remote:o}=e;if(e.remote&&Je.test(e.remote.companionUrl)){const r=t.companion_url.replace(/\/$/,""),path=e.remote.url.replace(e.remote.companionUrl,"").replace(/^\//,"");o={...e.remote,companionUrl:r,url:`${r}/${path}`}}const n={...e,transloadit:{assembly:t.assembly_id}};return this.opts.importFromUploadURLs||Object.assign(n,{meta:meta,tus:r,remote:o}),n}function jt(e,t,r){return this.uppy.log("[Transloadit] Create Assembly"),this.client.createAssembly({params:r.params,fields:r.fields,expectedFiles:e.length,signature:r.signature}).then((async r=>{const o=this.uppy.getFiles().filter((t=>{let{id:r}=t;return e.includes(r)}));if(o.length!==e.length){if(0===o.length)return await this.client.cancelAssembly(r),null;await this.client.updateNumberOfFilesInAssembly(r,o.length)}const n=new oe(r,We(this,Ye)[Ye]),{status:l}=n,c=l.assembly_id,{assemblies:d,uploadsAssemblies:h}=this.getPluginState();this.setPluginState({assemblies:{...d,[c]:l},uploadsAssemblies:{...h,[t]:[...h[t],c]}});const m={};o.forEach((e=>{m[e.id]=We(this,et)[et](e,l)})),this.uppy.setState({files:{...this.uppy.getState().files,...m}});const y=(e,t)=>{if("cancel-all"===t)n.close(),this.uppy.off(y);else if(e.id in m){delete m[e.id];const t=Object.keys(m).length;0===t?(n.close(),We(this,pt)[pt](r).catch((()=>{})),this.uppy.off(y)):this.client.updateNumberOfFilesInAssembly(r,t).catch((()=>{}))}};return this.uppy.on("file-removed",y),this.uppy.emit("transloadit:assembly-created",l,e),this.uppy.log(`[Transloadit] Created Assembly ${c}`),n})).catch((e=>{const t=new n.a(`${this.i18n("creatingAssemblyFailed")}: ${e.message}`,{cause:e});throw"details"in e&&(t.details=e.details),"assembly"in e&&(t.assembly=e.assembly),t}))}function At(e,t){const r=new $e(this.uppy,e);r.on("assembly-complete",(e=>{this.getAssemblyFiles(e).forEach((e=>{this.completedFiles[e.id]=!0,this.uppy.emit("postprocess-complete",e)}))})),r.on("assembly-error",((e,t)=>{this.getAssemblyFiles(e).forEach((e=>{this.uppy.emit("upload-error",e,t),this.uppy.emit("postprocess-complete",e)}))})),this.assemblyWatchers[t]=r}function Tt(){return this.opts.waitForEncoding||this.opts.waitForMetadata}function Et(e,t){return Promise.all(t.map((t=>{const r=this.uppy.getFile(t);return this.client.reserveFile(e.status,r)})))}function Rt(e){const t=this.uppy.getFiles();for(let i=0;i<t.length;i++){const r=t[i];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}}function Ut(e,t){const r=this.getPluginState(),o=We(this,nt)[nt](t);o?(this.setPluginState({files:{...r.files,[t.id]:{assembly:e,id:o.id,uploadedFile:t}}}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn’t file the file, it was likely removed in the process")}function _t(e,t,r){const o=this.getPluginState(),n=o.files[r.original_id];r.localId=n?n.id:null;const l={result:r,stepName:t,id:r.id,assembly:e};this.setPluginState({results:[...o.results,l]}),this.uppy.emit("transloadit:result",t,r,this.getAssembly(e))}function It(e){const t=e.assembly_ssl_url;this.client.getAssemblyStatus(t).then((e=>{const t=e.assembly_id,r=this.getPluginState();this.setPluginState({assemblies:{...r.assemblies,[t]:e}}),this.uppy.emit("transloadit:complete",e)}))}async function Ct(e){await this.client.cancelAssembly(e),this.uppy.emit("transloadit:assembly-cancelled",e)}function kt(e){const{status:t}=e,r=t.assembly_id;return this.activeAssemblies[r]=e,e.on("status",(e=>{const{assemblies:t}=this.getPluginState();this.setPluginState({assemblies:{...t,[r]:e}})})),e.on("upload",(e=>{We(this,lt)[lt](r,e)})),e.on("error",(t=>{t.assembly=e.status,this.uppy.emit("transloadit:assembly-error",e.status,t)})),e.on("executing",(()=>{this.uppy.emit("transloadit:assembly-executing",e.status)})),this.opts.waitForEncoding&&e.on("result",((e,t)=>{We(this,ut)[ut](r,e,t)})),this.opts.waitForEncoding?e.on("finished",(()=>{We(this,ct)[ct](e.status)})):this.opts.waitForMetadata&&e.on("metadata",(()=>{We(this,ct)[ct](e.status)})),"ASSEMBLY_COMPLETE"===e.ok||e.connect(),e}St.VERSION="3.0.2",St.COMPANION="https://api2.transloadit.com/companion",St.COMPANION_PATTERN=/\.transloadit\.com$/},812:function(e,t,r){"use strict";function o(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var n=0;function l(e){return"__private_"+n+++"_"+e}var c=l("callbacks"),d=l("publish");class h{constructor(){Object.defineProperty(this,d,{value:m}),Object.defineProperty(this,c,{writable:!0,value:new Set}),this.state={}}getState(){return this.state}setState(e){const t={...this.state},r={...this.state,...e};this.state=r,o(this,d)[d](t,r,e)}subscribe(e){return o(this,c)[c].add(e),()=>{o(this,c)[c].delete(e)}}}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o(this,c)[c].forEach((e=>{e(...t)}))}h.VERSION="3.0.2",t.a=h},920:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var o=r(58),n=r(826),l=r(510),c=r(335),d=r(827),h={strings:{generatingThumbnails:"Generating thumbnails..."}};class m extends o.a{constructor(e,t){super(e,t),this.onFileAdded=e=>{!e.preview&&e.data&&Object(c.a)(e.type)&&!e.isRemote&&this.addToQueue(e.id)},this.onCancelRequest=e=>{const t=this.queue.indexOf(e.id);-1!==t&&this.queue.splice(t,1)},this.onFileRemoved=e=>{const t=this.queue.indexOf(e.id);-1!==t&&this.queue.splice(t,1),e.preview&&Object(l.a)(e.preview)&&URL.revokeObjectURL(e.preview)},this.onRestored=()=>{this.uppy.getFiles().filter((e=>e.isRestored)).forEach((e=>{e.preview&&!Object(l.a)(e.preview)||this.addToQueue(e.id)}))},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=e=>{e.forEach((e=>{const t=this.uppy.getFile(e);this.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})}));const t=()=>{e.forEach((e=>{const t=this.uppy.getFile(e);this.uppy.emit("preprocess-complete",t)}))};return new Promise((e=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",(()=>{t(),e()})):(t(),e())}))},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType||"image/jpeg",this.defaultLocale=h;if(this.opts={thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1,...t},this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,r){const o=URL.createObjectURL(e.data),l=new Promise(((e,t)=>{const image=new Image;image.src=o,image.addEventListener("load",(()=>{URL.revokeObjectURL(o),e(image)})),image.addEventListener("error",(e=>{URL.revokeObjectURL(o),t(e.error||new Error("Could not create thumbnail"))}))})),c=Object(d.a)(e.data).catch((()=>1));return Promise.all([l,c]).then((e=>{let[image,o]=e;const l=this.getProportionalDimensions(image,t,r,o.deg),c=function(image,e){let t=image.width,r=image.height;90!==e.deg&&270!==e.deg||(t=image.height,r=image.width);const canvas=document.createElement("canvas");canvas.width=t,canvas.height=r;const o=canvas.getContext("2d");return o.translate(t/2,r/2),e.canvas&&(o.rotate(e.rad),o.scale(e.scaleX,e.scaleY)),o.drawImage(image,-image.width/2,-image.height/2,image.width,image.height),canvas}(image,o);return function(canvas,e,t){try{canvas.getContext("2d").getImageData(0,0,1,1)}catch(e){if(18===e.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return canvas.toBlob?new Promise((r=>{canvas.toBlob(r,e,t)})).then((e=>{if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e})):Promise.resolve().then((()=>Object(n.a)(canvas.toDataURL(e,t),{}))).then((e=>{if(null===e)throw new Error("could not extract blob, probably an old browser");return e}))}(this.resizeImage(c,l.width,l.height),this.thumbnailType,80)})).then((e=>URL.createObjectURL(e)))}getProportionalDimensions(img,e,t,r){let o=img.width/img.height;return 90!==r&&270!==r||(o=img.height/img.width),null!=e?{width:e,height:Math.round(e/o)}:null!=t?{width:Math.round(t*o),height:t}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/o)}}resizeImage(image,e,t){let img=function(image){const e=image.width/image.height,t=5e6,r=4096;let o=Math.floor(Math.sqrt(t*e)),n=Math.floor(t/Math.sqrt(t*e));if(o>r&&(o=r,n=Math.round(o/e)),n>r&&(n=r,o=Math.round(e*n)),image.width>o){const canvas=document.createElement("canvas");return canvas.width=o,canvas.height=n,canvas.getContext("2d").drawImage(image,0,0,o,n),canvas}return image}(image),r=Math.ceil(Math.log2(img.width/e));r<1&&(r=1);let o=e*2**(r-1),n=t*2**(r-1);for(;r--;){const canvas=document.createElement("canvas");canvas.width=o,canvas.height=n,canvas.getContext("2d").drawImage(img,0,0,o,n),img=canvas,o=Math.round(o/2),n=Math.round(n/2)}return img}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch((()=>{})).then((()=>this.processQueue())):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Object(c.a)(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then((t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)})).catch((t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)})):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}m.VERSION="3.0.2"}}]);