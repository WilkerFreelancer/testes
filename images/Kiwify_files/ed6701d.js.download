(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{152:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o(394);class n{constructor(e,t){void 0===t&&(t={}),this.uppy=e,this.opts=t}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(),this.i18nInit()}i18nInit(){const e=new r.a([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}}},158:function(e,t,o){"use strict";o.d(t,"a",(function(){return Ve}));var r=o(1),n=o(58),l=o(218);class d extends r.a{constructor(){super(...arguments),this.ref=Object(r.d)()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,300)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,300)}render(){const{children:e}=this.props;return Object(r.e)("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}function h(e){const t={};for(let i=0;i<e.length;i++)if(null!=e[i]){t[(o=e[i],r=i.toString(36),n=void 0,null!=(n=null==o?void 0:o.key)?n:r)]=e[i]}var o,r,n;return t}function c(e,t){e=e||{},t=t||{};const o=o=>t.hasOwnProperty(o)?t[o]:e[o],r={};let n=[];for(const o in e)t.hasOwnProperty(o)?n.length&&(r[o]=n,n=[]):n.push(o);const l={};for(const e in t){if(r.hasOwnProperty(e))for(let i=0;i<r[e].length;i++){const t=r[e][i];l[r[e][i]]=o(t)}l[e]=o(e)}for(let i=0;i<n.length;i++)l[n[i]]=o(n[i]);return l}class m extends r.a{constructor(e,t){super(e,t),this.refs={},this.state={children:h(Object(r.g)(Object(r.g)(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=h(Object(r.g)(e.children)||[]),o=this.state.children;let n;for(n in this.setState((e=>({children:c(e.children,t)}))),t)if(t.hasOwnProperty(n)){const e=o&&o.hasOwnProperty(n);t[n]&&e&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):!t[n]||e||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(n in o)if(o.hasOwnProperty(n)){const e=t&&t.hasOwnProperty(n);!o[n]||e||this.currentlyTransitioningKeys[n]||this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);-1!==t&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const component=this.refs[e];component.componentWillAppear?component.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const component=this.refs[e];component.componentDidAppear&&component.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const t=h(Object(r.g)(this.props.children)||[]);t&&t.hasOwnProperty(e)||this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const component=this.refs[e];component.componentWillEnter?component.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const component=this.refs[e];component.componentDidEnter&&component.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const t=h(Object(r.g)(this.props.children)||[]);t&&t.hasOwnProperty(e)||this.performLeave(e)}performLeave(e){if(-1!==this.keysToAbortLeave.indexOf(e))return;this.currentlyTransitioningKeys[e]=!0;const component=this.refs[e];component.componentWillLeave?component.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(-1!==this.keysToAbortLeave.indexOf(e))return;const component=this.refs[e];component.componentDidLeave&&component.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const t=h(Object(r.g)(this.props.children)||[]);if(t&&t.hasOwnProperty(e))this.performEnter(e);else{const t=(o={},n=this.state.children,Object.assign(o,n));delete t[e],this.setState({children:t})}var o,n}render(e,t){let{childFactory:o,transitionLeave:n,transitionName:l,transitionAppear:d,transitionEnter:h,transitionLeaveTimeout:c,transitionEnterTimeout:m,transitionAppearTimeout:f,component:component,...y}=e,{children:v}=t;const w=Object.entries(v).map((e=>{let[t,n]=e;if(!n)return;const l=function(component,e){const t=component._ptgLinkedRefs||(component._ptgLinkedRefs={});return t[e]||(t[e]=t=>{component.refs[e]=t})}(this,t);return Object(r.c)(o(n),{ref:l,key:t})})).filter(Boolean);return Object(r.e)(component,y,w)}}m.defaultProps={component:"span",childFactory:i=>i};var f=m;class y extends n.a{constructor(e,t){super(e,t),this.render=e=>Object(r.e)("div",{className:"uppy uppy-Informer"},Object(r.e)(f,null,e.info.map((e=>Object(r.e)(d,{key:e.message},Object(r.e)("p",{role:"alert"},e.message," ",e.details&&Object(r.e)("span",{"aria-label":e.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${e.message} \n\n ${e.details}`)},"?"))))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer";this.opts={...t}}install(){const{target:e}=this.opts;e&&this.mount(e,this)}}y.VERSION="3.0.1";var v=o(920),w=o(511),O=o(183),F=o(413);let P=(e=21)=>{let t="",i=e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};var C=o(513),D=o(283);function j(e,t){if(t){const o=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(o)return o}return e}function S(e,t){const o=t[0];o&&(o.focus(),e.preventDefault())}function T(e,t,o){const r=j(o,t),n=Object(O.a)(r.querySelectorAll(D.a)),l=n.indexOf(document.activeElement);!function(e){return e.contains(document.activeElement)}(r)?S(e,n):e.shiftKey&&0===l?function(e,t){const o=t[t.length-1];o&&(o.focus(),e.preventDefault())}(e,n):e.shiftKey||l!==n.length-1||S(e,n)}var k=o(828),A=o.n(k);var E=o(79),N=o.n(E),I=o(402),M=o(829),R=o.n(M);function U(e){const t={color:"#838999",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("g",{fill:"#A7AFB7",fillRule:"nonzero"},Object(r.e)("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),Object(r.e)("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))};if(!e)return t;const o=e.split("/")[0],n=e.split("/")[1];if("text"===o)return{color:"#5a5e69",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))};if("image"===o)return{color:"#686de0",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("g",{fill:"#686DE0",fillRule:"evenodd"},Object(r.e)("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),Object(r.e)("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),Object(r.e)("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))};if("audio"===o)return{color:"#068dbb",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))};if("video"===o)return{color:"#19af67",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))};if("application"===o&&"pdf"===n)return{color:"#e25149",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))};return"application"===o&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(n)?{color:"#00C469",icon:Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},Object(r.e)("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}:t}function B(e){const{file:t}=e;if(t.preview)return Object(r.e)("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:o,icon:n}=U(t.type);return Object(r.e)("div",{className:"uppy-Dashboard-Item-previewIconWrap"},Object(r.e)("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:o}},n),Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},Object(r.e)("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}function L(e){const{file:t,toggleFileCard:o,i18n:n,metaFields:l}=e,{missingRequiredMetaFields:d}=t;if(null==d||!d.length)return null;const h=d.map((e=>((e,t)=>t.filter((t=>t.id===e))[0].name)(e,l))).join(", ");return Object(r.e)("div",{className:"uppy-Dashboard-Item-errorMessage"},n("missingRequiredMetaFields",{smart_count:d.length,fields:h})," ",Object(r.e)("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>o(!0,t.id)},n("editFile")))}function z(e){return Object(r.e)("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:U(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&Object(r.e)("a",{className:"uppy-Dashboard-Item-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name},Object(r.e)("span",{hidden:!0},e.file.meta.name)),Object(r.e)(B,{file:e.file}),Object(r.e)(L,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))}function x(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function $(e){return Object(r.e)("div",{className:"uppy-Dashboard-Item-progress"},Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":x(e),title:x(e),onClick:()=>function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id):e.uppy.retryUpload(e.file.id))}(e)},e.children))}function H(e){let{children:t}=e;return Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function _(e){let{progress:progress}=e;const t=2*Math.PI*15;return Object(r.e)("g",null,Object(r.e)("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),Object(r.e)("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*progress}))}function V(e){return e.file.progress.uploadStarted?e.isUploaded?Object(r.e)("div",{className:"uppy-Dashboard-Item-progress"},Object(r.e)("div",{className:"uppy-Dashboard-Item-progressIndicator"},Object(r.e)(H,null,Object(r.e)("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),Object(r.e)("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.recoveredState?void 0:e.error&&!e.hideRetryButton?Object(r.e)($,e,Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},Object(r.e)("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),Object(r.e)("path",{d:"M7.9 3H10v2H7.9z"}),Object(r.e)("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),Object(r.e)("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?Object(r.e)($,e,Object(r.e)(H,null,Object(r.e)(_,{progress:e.file.progress.percentage}),e.file.isPaused?Object(r.e)("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):Object(r.e)("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},Object(r.e)("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),Object(r.e)("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?Object(r.e)("div",{className:"uppy-Dashboard-Item-progress"},Object(r.e)("div",{className:"uppy-Dashboard-Item-progressIndicator"},Object(r.e)(H,null,Object(r.e)(_,{progress:e.file.progress.percentage})))):Object(r.e)($,e,Object(r.e)(H,null,Object(r.e)(_,{progress:e.file.progress.percentage}),Object(r.e)("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null}var W=o(830),K=o.n(W),G=o(512);const Y=e=>{let{file:t,onClick:o}=e;return t.error?Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:o,type:"button"},"?"):null};function X(e){const{file:t}=e;return Object(r.e)("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},Object(r.e)("div",{className:"uppy-Dashboard-Item-fileName"},(e=>{const{author:t,name:o}=e.file.meta;return Object(r.e)("div",{className:"uppy-Dashboard-Item-name",title:o},Object(G.a)(o,e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30))})(e),Object(r.e)(Y,{file:e.file,onClick:()=>alert(e.file.error)})),Object(r.e)("div",{className:"uppy-Dashboard-Item-status"},(e=>{const{author:t}=e.file.meta,{providerName:o}=e.file.remote;return t?Object(r.e)("div",{className:"uppy-Dashboard-Item-author"},Object(r.e)("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},Object(G.a)(t.name,13)),o?Object(r.e)(r.b,null," · ",o," · "):null):null})(e),(e=>e.file.size&&Object(r.e)("div",{className:"uppy-Dashboard-Item-statusSize"},K()(e.file.size)))(e),(e=>e.file.isGhost&&Object(r.e)("span",null," • ",Object(r.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:e.toggleAddFilesPanel},e.i18n("reSelect"))))(e)),Object(r.e)(L,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))}function J(e){let{file:t,uploadInProgressOrComplete:o,metaFields:n,canEditFile:l,i18n:d,onClick:h}=e;return!o&&n&&n.length>0||!o&&l(t)?Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":d("editFileWithFilename",{file:t.meta.name}),title:d("editFileWithFilename",{file:t.meta.name}),onClick:()=>h()},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},Object(r.e)("g",{fillRule:"evenodd"},Object(r.e)("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),Object(r.e)("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),Object(r.e)("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function Q(e){let{i18n:t,onClick:o,file:n}=e;return Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:n.meta.name}),title:t("removeFile",{file:n.meta.name}),onClick:()=>o()},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},Object(r.e)("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),Object(r.e)("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Z=(e,t)=>{var o,r;(o=t.file.uploadURL,r=t.i18n("copyLinkToClipboardFallback"),void 0===r&&(r="Copy the URL below"),new Promise((e=>{const t=document.createElement("textarea");t.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=o,document.body.appendChild(t),t.select();const n=()=>{document.body.removeChild(t),window.prompt(r,o),e()};try{return document.execCommand("copy")?(document.body.removeChild(t),e()):n()}catch(e){return document.body.removeChild(t),n()}}))).then((()=>{t.uppy.log("Link copied to clipboard."),t.uppy.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)})).catch(t.uppy.log).then((()=>e.target.focus({preventScroll:!0})))};function ee(e){const{i18n:t}=e;return Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:t=>Z(t,e)},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},Object(r.e)("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function te(e){const{uppy:t,file:o,uploadInProgressOrComplete:n,canEditFile:l,metaFields:d,showLinkToFileUploadResult:h,showRemoveButton:c,i18n:m,toggleFileCard:f,openFileEditor:y}=e;return Object(r.e)("div",{className:"uppy-Dashboard-Item-actionWrapper"},Object(r.e)(J,{i18n:m,file:o,uploadInProgressOrComplete:n,canEditFile:l,metaFields:d,onClick:()=>{d&&d.length>0?f(!0,o.id):y(o)}}),h&&o.uploadURL?Object(r.e)(ee,{file:o,uppy:t,i18n:m}):null,c?Object(r.e)(Q,{i18n:m,file:o,uppy:t,onClick:()=>e.uppy.removeFile(o.id,"removed-by-user")}):null)}class ie extends r.a{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!R()(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,o=e.progress.uploadComplete&&!t&&!e.error,n=e.progress.uploadStarted||t,l=e.progress.uploadStarted&&!e.progress.uploadComplete||t,d=e.error||!1,{isGhost:h}=e;let c=(this.props.individualCancellation||!l)&&!o;o&&this.props.showRemoveButtonAfterComplete&&(c=!0);const m=N()({"uppy-Dashboard-Item":!0,"is-inprogress":l&&!this.props.recoveredState,"is-processing":t,"is-complete":o,"is-error":!!d,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":h});return Object(r.e)("div",{className:m,id:`uppy_${e.id}`,role:this.props.role},Object(r.e)("div",{className:"uppy-Dashboard-Item-preview"},Object(r.e)(z,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),Object(r.e)(V,{uppy:this.props.uppy,file:e,error:d,isUploaded:o,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),Object(r.e)("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},Object(r.e)(X,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),Object(r.e)(te,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:c,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function se(){return(se=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}const oe={position:"relative",width:"100%",minHeight:"100%"},re={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class ae extends r.a{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:data,rowHeight:t,renderRow:o,overscanCount:n=10,...l}=e;const{offset:d,height:h}=this.state;let c=Math.floor(d/t),m=Math.floor(h/t);n&&(c=Math.max(0,c-c%n),m+=n);const f=c+m+4,y=data.slice(c,f),v={...oe,height:data.length*t},w={...re,top:c*t};return Object(r.e)("div",se({onScroll:this.handleScroll},l),Object(r.e)("div",{role:"presentation",style:v},Object(r.e)("div",{role:"presentation",style:w},y.map(o))))}}var ne=ae;function le(){return(le=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}var de=e=>{const t=0===e.totalFileCount,o=N()("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":t}),n=1===e.itemsPerRow?71:200,l={id:e.id,error:e.error,i18n:e.i18n,uppy:e.uppy,acquirers:e.acquirers,resumableUploads:e.resumableUploads,individualCancellation:e.individualCancellation,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,isWide:e.isWide,metaFields:e.metaFields,recoveredState:e.recoveredState,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail},d=Object.keys(e.files);e.recoveredState&&d.sort(((t,o)=>e.files[o].isGhost-e.files[t].isGhost));const h=function(e,t){const o=[];let r=[];return e.forEach((e=>{r.length<t?r.push(e):(o.push(r),r=[e])})),r.length&&o.push(r),o}(d,e.itemsPerRow);return Object(r.e)(ne,{class:o,role:"list",data:h,renderRow:t=>Object(r.e)("div",{role:"presentation",key:t[0]},t.map((t=>Object(r.e)(ie,le({key:t,uppy:e.uppy},l,{role:"listitem",openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,file:e.files[t]}))))),rowHeight:n})};let pe;pe=Symbol.for("uppy test: disable unused locale key warning");class he extends r.a{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,t)=>Object(r.e)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:t}),this.renderHiddenCameraInput=(e,t,o)=>{const n={photo:"image/*",video:"video/*"}[e];return Object(r.e)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:n,ref:o})},this.renderMyDeviceAcquirer=()=>Object(r.e)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},Object(r.e)("g",{fill:"none",fillRule:"evenodd"},Object(r.e)("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),Object(r.e)("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),Object(r.e)("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>Object(r.e)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},Object(r.e)("g",{fill:"none",fillRule:"evenodd"},Object(r.e)("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),Object(r.e)("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"}))),Object(r.e)("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>Object(r.e)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},Object(r.e)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},Object(r.e)("rect",{fill:"#1abc9c",width:"32",height:"32",rx:"16"}),Object(r.e)("path",{fill:"#FFF",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})),Object(r.e)("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(text,e)=>{const t=this.props.acquirers.length;return Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:e,"data-uppy-super-focusable":0===t},text)},this.renderDropPasteBrowseTagline=()=>{const e=this.props.acquirers.length,t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),o=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,l=n.charAt(0).toUpperCase()+n.slice(1);return Object(r.e)("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${l}`,{browseFiles:t,browseFolders:o,browse:t}):this.props.i18nArray(`dropPaste${l}`,{browseFiles:t,browseFolders:o,browse:t}))},this.renderAcquirer=e=>Object(r.e)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},e.icon(),Object(r.e)("div",{className:"uppy-DashboardTab-name"},e.name))),this.renderAcquirers=e=>{const t=[...e],o=t.splice(e.length-2,e.length);return Object(r.e)(r.b,null,t.map((e=>this.renderAcquirer(e))),Object(r.e)("span",{role:"presentation",style:{"white-space":"nowrap"}},o.map((e=>this.renderAcquirer(e)))))},this.renderSourcesList=(e,t)=>{const{showNativePhotoCameraButton:o,showNativeVideoCameraButton:n}=this.props;return Object(r.e)("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},!t&&this.renderMyDeviceAcquirer(),!t&&o&&this.renderPhotoCamera(),!t&&n&&this.renderVideoCamera(),e.length>0&&this.renderAcquirers(e))}}[pe](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,t=e("poweredBy",{uppy:Object(r.e)("span",null,Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},Object(r.e)("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),Object(r.e)("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy"))});return Object(r.e)("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},t)}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:o}=this.props;return Object(r.e)("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,(e=>{this.fileInput=e})),this.renderHiddenInput(!0,(e=>{this.folderInput=e})),e&&this.renderHiddenCameraInput("photo",o,(e=>{this.mobilePhotoFileInput=e})),t&&this.renderHiddenCameraInput("video",o,(e=>{this.mobileVideoFileInput=e})),this.renderDropPasteBrowseTagline(),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),Object(r.e)("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&Object(r.e)("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}var ce=he;var ue=e=>Object(r.e)("div",{className:N()("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},Object(r.e)("div",{className:"uppy-DashboardContent-bar"},Object(r.e)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),Object(r.e)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1)},e.i18n("back"))),Object(r.e)(ce,e));var me=function(e){const{tagName:t}=e.target;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()};var ge=function(e){let{activePickerPanel:t,className:o,hideAllPanels:n,i18n:l,state:d,uppy:h}=e;return Object(r.e)("div",{className:N()("uppy-DashboardContent-panel",o),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${t.id}`,onDragOver:me,onDragLeave:me,onDrop:me,onPaste:me},Object(r.e)("div",{className:"uppy-DashboardContent-bar"},Object(r.e)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},l("importFrom",{name:t.name})),Object(r.e)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n},l("cancel"))),Object(r.e)("div",{className:"uppy-DashboardContent-panelBody"},h.getPlugin(t.id).render(d)))};var fe=function(e){const t=e.files[e.fileCardFor];return Object(r.e)("div",{className:N()("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},Object(r.e)("div",{className:"uppy-DashboardContent-bar"},Object(r.e)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18nArray("editing",{file:Object(r.e)("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),Object(r.e)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("cancel")),Object(r.e)("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor},e.i18n("save"))),Object(r.e)("div",{className:"uppy-DashboardContent-panelBody"},e.editors.map((t=>e.uppy.getPlugin(t.id).render(e.state)))))};const be="error",ye="waiting",ve="preprocessing",we="uploading",Oe="postprocessing",Fe="complete",Pe="paused";function Ce(e){let{files:t,i18n:o,isAllComplete:r,isAllErrored:n,isAllPaused:l,inProgressNotPausedFiles:d,newFiles:h,processingFiles:c}=e;switch(function(e,t,o,r){if(void 0===r&&(r={}),e)return be;if(t)return Fe;if(o)return Pe;let n=ye;const l=Object.keys(r);for(let i=0;i<l.length;i++){const{progress:progress}=r[l[i]];if(progress.uploadStarted&&!progress.uploadComplete)return we;progress.preprocess&&n!==we&&(n=ve),progress.postprocess&&n!==we&&n!==ve&&(n=Oe)}return n}(n,r,l,t)){case"uploading":return o("uploadingXFiles",{smart_count:d.length});case"preprocessing":case"postprocessing":return o("processingXFiles",{smart_count:c.length});case"paused":return o("uploadPaused");case"waiting":return o("xFilesSelected",{smart_count:h.length});case"complete":return o("uploadComplete")}}var De=function(e){const{i18n:t,isAllComplete:o,hideCancelButton:n,maxNumberOfFiles:l,toggleAddFilesPanel:d,uppy:h}=e;let{allowNewUpload:c}=e;return c&&l&&(c=e.totalFileCount<e.maxNumberOfFiles),Object(r.e)("div",{className:"uppy-DashboardContent-bar"},o||n?Object(r.e)("div",null):Object(r.e)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>h.cancelAll()},t("cancel")),Object(r.e)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},Object(r.e)(Ce,e)),c?Object(r.e)("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>d(!0)},Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},Object(r.e)("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),Object(r.e)("span",{className:"uppy-DashboardContent-addMoreCaption"},t("addMore"))):Object(r.e)("div",null))};class je extends r.a{constructor(e){super(e),this.form=document.createElement("form"),this.updateMeta=(e,t)=>{this.setState((o=>{let{formState:r}=o;return{formState:{...r,[t]:e}}}))},this.handleSave=e=>{e.preventDefault();const t=this.props.fileCardFor;this.props.saveFileCard(this.state.formState,t)},this.handleCancel=()=>{const e=this.props.files[this.props.fileCardFor];this.props.uppy.emit("file-editor:cancel",e),this.props.toggleFileCard(!1)},this.saveOnEnter=e=>{if(13===e.keyCode){e.stopPropagation(),e.preventDefault();const t=this.props.files[this.props.fileCardFor];this.props.saveFileCard(this.state.formState,t.id)}},this.renderMetaFields=()=>{const e=this.getMetaFields()||[],t={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map((e=>{const o=`uppy-Dashboard-FileCard-input-${e.id}`,n=this.props.requiredMetaFields.includes(e.id);return Object(r.e)("fieldset",{key:e.id,className:"uppy-Dashboard-FileCard-fieldset"},Object(r.e)("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:o},e.name),void 0!==e.render?e.render({value:this.state.formState[e.id],onChange:t=>this.updateMeta(t,e.id),fieldCSSClasses:t,required:n,form:this.form.id},r.e):Object(r.e)("input",{className:t.text,id:o,form:this.form.id,type:e.type||"text",required:n,value:this.state.formState[e.id],placeholder:e.placeholder,onKeyUp:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyDown:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyPress:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onInput:t=>this.updateMeta(t.target.value,e.id),"data-uppy-super-focusable":!0}))}))};const t=this.props.files[this.props.fileCardFor],o=this.getMetaFields()||[],n={};o.forEach((e=>{n[e.id]=t.meta[e.id]||""})),this.state={formState:n},this.form.id=P()}componentWillMount(){this.form.addEventListener("submit",this.handleSave),document.body.appendChild(this.form)}componentWillUnmount(){this.form.removeEventListener("submit",this.handleSave),document.body.removeChild(this.form)}getMetaFields(){return"function"==typeof this.props.metaFields?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields}render(){const e=this.props.files[this.props.fileCardFor],t=this.props.canEditFile(e);return Object(r.e)("div",{className:N()("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:me,onDragLeave:me,onDrop:me,onPaste:me},Object(r.e)("div",{className:"uppy-DashboardContent-bar"},Object(r.e)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:Object(r.e)("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),Object(r.e)("button",{className:"uppy-DashboardContent-back",type:"button",form:this.form.id,title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),Object(r.e)("div",{className:"uppy-Dashboard-FileCard-inner"},Object(r.e)("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:U(e.type).color}},Object(r.e)(B,{file:e}),t&&Object(r.e)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:t=>{this.handleSave(t),this.props.openFileEditor(e)},form:this.form.id},this.props.i18n("editFile"))),Object(r.e)("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),Object(r.e)("div",{className:"uppy-Dashboard-FileCard-actions"},Object(r.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"form"in HTMLButtonElement.prototype?"submit":"button",onClick:"form"in HTMLButtonElement.prototype?void 0:this.handleSave,form:this.form.id},this.props.i18n("saveChanges")),Object(r.e)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel,form:this.form.id},this.props.i18n("cancel")))))}}var Se=je;const Te="uppy-transition-slideDownUp";class ke extends r.a{constructor(e){super(e),this.state={cachedChildren:null,className:""}}componentWillUpdate(e){const{cachedChildren:t}=this.state,o=Object(r.g)(e.children)[0];if(t===o)return null;const n={cachedChildren:o};o&&!t&&(n.className=`${Te}-enter`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame((()=>{this.setState({className:`${Te}-enter ${Te}-enter-active`}),this.enterTimeout=setTimeout((()=>{this.setState({className:""})}),250)}))),t&&!o&&void 0===this.leaveTimeout&&(n.cachedChildren=t,n.className=`${Te}-leave`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame((()=>{this.setState({className:`${Te}-leave ${Te}-leave-active`}),this.leaveTimeout=setTimeout((()=>{this.setState({cachedChildren:null,className:""})}),250)}))),this.setState(n)}render(){const{cachedChildren:e,className:t}=this.state;return e?Object(r.c)(e,{className:N()(t,e.props.className)}):null}}var Ae=ke;function Ee(){return(Ee=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}var Ne={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function Ie(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Me=0;function Re(e){return"__private_"+Me+++"_"+e}const Ue=C.a.default||C.a;function Be(){const e={};return e.promise=new Promise(((t,o)=>{e.resolve=t,e.reject=o})),e}function Le(){return Object(r.e)("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},Object(r.e)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var ze=Re("openFileEditorWhenFilesAdded"),xe=Re("attachRenderFunctionToTarget"),$e=Re("isTargetSupported"),He=Re("getAcquirers"),qe=Re("getProgressIndicators"),_e=Re("getEditors");class Ve extends n.a{constructor(e,t){var o;super(e,t),o=this,this.removeTarget=e=>{const t=this.getPluginState().targets.filter((t=>t.id!==e.id));this.setPluginState({targets:t})},this.addTarget=e=>{const t=e.id||e.constructor.name,o=e.title||t,r=e.type;if("acquirer"!==r&&"progressindicator"!==r&&"editor"!==r){const e="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";return void this.uppy.log(e,"error")}const n={id:t,name:o,type:r},l=this.getPluginState().targets.slice();return l.push(n),this.setPluginState({targets:l}),this.el},this.hideAllPanels=()=>{const e=this.getPluginState(),t={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||this.setPluginState(t)},this.showPanel=e=>{const{targets:t}=this.getPluginState(),o=t.filter((t=>"acquirer"===t.type&&t.id===e))[0];this.setPluginState({activePickerPanel:o,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)},this.canEditFile=e=>{const{targets:t}=this.getPluginState();return Ie(this,_e)[_e](t).some((t=>this.uppy.getPlugin(t.id).canEditFile(e)))},this.openFileEditor=e=>{const{targets:t}=this.getPluginState(),o=Ie(this,_e)[_e](t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),o.forEach((t=>{this.uppy.getPlugin(t.id).selectFile(e)}))},this.saveFileEditor=()=>{const{targets:e}=this.getPluginState();Ie(this,_e)[_e](e).forEach((e=>{this.uppy.getPlugin(e.id).save()})),this.hideAllPanels()},this.openModal=()=>{const{promise:e,resolve:t}=Be();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const e=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",e,!1),t()};this.el.addEventListener("animationend",e,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e},this.closeModal=function(e){void 0===e&&(e={});const{manualClose:t=!0}=e,{isHidden:r,isClosing:n}=o.getPluginState();if(r||n)return;const{promise:l,resolve:d}=Be();if(o.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),o.opts.animateOpenClose){o.setPluginState({isClosing:!0});const e=()=>{o.setPluginState({isHidden:!0,isClosing:!1}),o.superFocus.cancel(),o.savedActiveElement.focus(),o.el.removeEventListener("animationend",e,!1),d()};o.el.addEventListener("animationend",e,!1)}else o.setPluginState({isHidden:!0}),o.superFocus.cancel(),o.savedActiveElement.focus(),d();var h;(document.removeEventListener("keydown",o.handleKeyDownInModal),t)&&(o.opts.browserBackButtonClose&&null!=(h=history.state)&&h[o.modalName]&&history.back());return o.uppy.emit("dashboard:modal-closed"),l},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})},this.handleSystemDarkModeChange=e=>{const t=e.matches;this.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off")),this.setDarkModeCapability(t)},this.toggleFileCard=(e,t)=>{const o=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",o):this.uppy.emit("dashboard:file-edit-complete",o),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})},this.toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},this.addFiles=e=>{const t=e.map((e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||e.webkitRelativePath||null}})));try{this.uppy.addFiles(t)}catch(e){this.uppy.log(e)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver((e=>{const t=e[0],{width:o,height:r}=t.contentRect;this.uppy.log(`[Dashboard] resized: ${o} / ${r}`,"debug"),this.setPluginState({containerWidth:o,containerHeight:r,areInsidesReadyToBeVisible:!0})})),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout((()=>{const e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(this.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),this.setPluginState({areInsidesReadyToBeVisible:!0}))}),1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableAllFocusableElements=e=>{const t=Object(O.a)(this.el.querySelectorAll(D.a));e?t.forEach((e=>{const t=e.getAttribute("tabindex");t&&(e.dataset.inertTabindex=t),e.setAttribute("tabindex","-1")})):t.forEach((e=>{"inertTabindex"in e.dataset?e.setAttribute("tabindex",e.dataset.inertTabindex):e.removeAttribute("tabindex")})),this.dashboardIsDisabled=e},this.updateBrowserHistory=()=>{var e;null!=(e=history.state)&&e[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=e=>{var t;!this.isModalOpen()||e.state&&e.state[this.modalName]||this.closeModal({manualClose:!1}),!this.isModalOpen()&&null!=(t=e.state)&&t[this.modalName]&&history.back()},this.handleKeyDownInModal=e=>{27===e.keyCode&&this.requestCloseModal(e),9===e.keyCode&&T(e,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=e=>{this.uppy.iteratePlugins((t=>{"acquirer"===t.type&&(null==t.handleRootPaste||t.handleRootPaste(e))}));const t=Object(O.a)(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))},this.handleInputChange=e=>{e.preventDefault();const t=Object(O.a)(e.target.files);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))},this.handleDragOver=e=>{var t,o;e.preventDefault(),e.stopPropagation();const r=(()=>{let t=!0;return this.uppy.iteratePlugins((o=>{null!=o.canHandleRootDrop&&o.canHandleRootDrop(e)&&(t=!0)})),t})(),n=(()=>{const{types:t}=e.dataTransfer;return t.some((e=>"Files"===e))})();if(!r&&!n||this.opts.disabled||this.opts.disableLocalFiles&&(n||!r)||!this.uppy.getState().allowNewUpload)return e.dataTransfer.dropEffect="none",void clearTimeout(this.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),null==(t=(o=this.opts).onDragOver)||t.call(o,e)},this.handleDragLeave=e=>{var t,o;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout((()=>{this.setPluginState({isDraggingOver:!1})}),50),null==(t=(o=this.opts).onDragLeave)||t.call(o,e)},this.handleDrop=async e=>{var t,o;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins((t=>{"acquirer"===t.type&&(null==t.handleRootDrop||t.handleRootDrop(e))}));let r=!1;const n=await Object(F.a)(e.dataTransfer,{logDropError:e=>{this.uppy.log(e,"error"),r||(this.uppy.info(e.message,"error"),r=!0)}});n.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(n)),null==(t=(o=this.opts).onDrop)||t.call(o,e)},this.handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)},this.handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)},this.handleKeyDownInInline=e=>{9===e.keyCode&&function(e,t,o){null===t||T(e,t,o)}(e,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)},this.handleComplete=e=>{let{failed:t}=e;this.opts.closeAfterFinish&&0===t.length&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,ze,{writable:!0,value:e=>{const t=e[0];this.canEditFile(t)&&this.openFileEditor(t)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const e=Object(w.a)(this.opts.trigger);e?e.forEach((e=>e.addEventListener("click",this.openModal))):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("file-editor:complete",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.on("files-added",Ie(this,ze)[ze])},this.removeEvents=()=>{const e=Object(w.a)(this.opts.trigger);!this.opts.inline&&e&&e.forEach((e=>e.removeEventListener("click",this.openModal))),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("file-editor:complete",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.off("files-added",Ie(this,ze)[ze])},this.superFocusOnEachUpdate=()=>{const e=this.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,o=0===this.uppy.getState().info.length,r=!this.opts.inline;o&&(r||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{!this.opts.disabled||this.dashboardIsDisabled?(!this.opts.disabled&&this.dashboardIsDisabled&&this.disableAllFocusableElements(!1),this.superFocusOnEachUpdate()):this.disableAllFocusableElements(!0)},this.saveFileCard=(meta,e)=>{this.uppy.setFileMeta(e,meta),this.toggleFileCard(!1,e)},Object.defineProperty(this,xe,{writable:!0,value:e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}}}),Object.defineProperty(this,$e,{writable:!0,value:e=>{const t=this.uppy.getPlugin(e.id);return"function"!=typeof t.isSupported||t.isSupported()}}),Object.defineProperty(this,He,{writable:!0,value:Ue((e=>e.filter((e=>"acquirer"===e.type&&Ie(this,$e)[$e](e))).map(Ie(this,xe)[xe])))}),Object.defineProperty(this,qe,{writable:!0,value:Ue((e=>e.filter((e=>"progressindicator"===e.type)).map(Ie(this,xe)[xe])))}),Object.defineProperty(this,_e,{writable:!0,value:Ue((e=>e.filter((e=>"editor"===e.type)).map(Ie(this,xe)[xe])))}),this.render=e=>{const t=this.getPluginState(),{files:o,capabilities:n,allowNewUpload:l}=e,{newFiles:d,uploadStartedFiles:h,completeFiles:c,erroredFiles:m,inProgressFiles:f,inProgressNotPausedFiles:y,processingFiles:v,isUploadStarted:w,isAllComplete:O,isAllErrored:F,isAllPaused:P}=this.uppy.getObjectOfFilesPerState(),C=Ie(this,He)[He](t.targets),D=Ie(this,qe)[qe](t.targets),j=Ie(this,_e)[_e](t.targets);let S;return S="auto"===this.opts.theme?n.darkMode?"dark":"light":this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),function(e){const t=0===e.totalFileCount,o=e.containerWidth>576,n=N()({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>400,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible});let l=1;e.containerWidth>900?l=5:e.containerWidth>700?l=4:e.containerWidth>576&&(l=3);const d=e.showSelectedFiles&&!t,h=e.recoveredState?Object.keys(e.recoveredState.files).length:null,c=e.files?Object.keys(e.files).filter((t=>e.files[t].isGhost)).length:null;return Object(r.e)("div",{className:n,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&Object(I.a)(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},Object(r.e)("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),Object(r.e)("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:Object(r.e)("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},Object(r.e)("span",{"aria-hidden":"true"},"×")),Object(r.e)("div",{className:"uppy-Dashboard-innerWrap"},Object(r.e)("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),d&&Object(r.e)(De,e),h&&Object(r.e)("div",{className:"uppy-Dashboard-serviceMsg"},Object(r.e)("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},Object(r.e)("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},Object(r.e)("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),Object(r.e)("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),Object(r.e)("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),Object(r.e)("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),Object(r.e)("div",{className:"uppy-Dashboard-serviceMsg-text"},c>0?e.i18n("recoveredXFiles",{smart_count:c}):e.i18n("recoveredAllFiles"))),d?Object(r.e)(de,Ee({},e,{itemsPerRow:l})):Object(r.e)(ce,Ee({},e,{isSizeMD:o})),Object(r.e)(Ae,null,e.showAddFilesPanel?Object(r.e)(ue,Ee({key:"AddFiles"},e,{isSizeMD:o})):null),Object(r.e)(Ae,null,e.fileCardFor?Object(r.e)(Se,Ee({key:"FileCard"},e)):null),Object(r.e)(Ae,null,e.activePickerPanel?Object(r.e)(ge,Ee({key:"Picker"},e)):null),Object(r.e)(Ae,null,e.showFileEditor?Object(r.e)(fe,Ee({key:"Editor"},e)):null),Object(r.e)("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map((t=>e.uppy.getPlugin(t.id).render(e.state)))))))}({state:e,isHidden:t.isHidden,files:o,newFiles:d,uploadStartedFiles:h,completeFiles:c,erroredFiles:m,inProgressFiles:f,inProgressNotPausedFiles:y,processingFiles:v,isUploadStarted:w,isAllComplete:O,isAllErrored:F,isAllPaused:P,totalFileCount:Object.keys(o).length,totalProgress:e.totalProgress,allowNewUpload:l,acquirers:C,theme:S,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,disableAllFocusableElements:this.disableAllFocusableElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:D,editors:j,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:n.resumableUploads||!1,individualCancellation:n.individualCancellation,isMobileDevice:n.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},this.discoverProviderPlugins=()=>{this.uppy.iteratePlugins((e=>{e&&!e.target&&e.opts&&e.opts.target===this.constructor&&this.addTarget(e)}))},this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:o,allowMultipleUploadBatches:r}=this.uppy.opts;(o||r)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:n}=this.opts;n&&this.mount(n,this);(this.opts.plugins||[]).forEach((e=>{const t=this.uppy.getPlugin(e);t&&t.mount(this,t)})),this.opts.disableStatusBar||this.uppy.use(l.a,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(y,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(v.a,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const d=!!this.darkModeMediaQuery&&this.darkModeMediaQuery.matches;this.uppy.log("[Dashboard] Dark mode is "+(d?"on":"off")),this.setDarkModeCapability(d),"auto"===this.opts.theme&&this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange),this.discoverProviderPlugins(),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const e=this.uppy.getPlugin(`${this.id}:Informer`);e&&this.uppy.removePlugin(e)}if(!this.opts.disableStatusBar){const e=this.uppy.getPlugin(`${this.id}:StatusBar`);e&&this.uppy.removePlugin(e)}if(!this.opts.disableThumbnailGenerator){const e=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);e&&this.uppy.removePlugin(e)}(this.opts.plugins||[]).forEach((e=>{const t=this.uppy.getPlugin(e);t&&t.unmount()})),"auto"===this.opts.theme&&this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.modalName=`uppy-Dashboard-${P()}`,this.defaultLocale=Ne;const n={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Le,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:()=>{this.uppy.cancelAll(),this.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:()=>this.closeModal(),showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};this.opts={...n,...t},this.i18nInit(),this.superFocus=function(){let e=!1;return A()(((t,o)=>{const r=j(t,o),n=r.contains(document.activeElement);if(n&&e)return;const l=r.querySelector("[data-uppy-super-focusable]");if(!n||l)if(l)l.focus({preventScroll:!0}),e=!0;else{const t=r.querySelector(D.a);null==t||t.focus({preventScroll:!0}),e=!1}}),260)}(),this.ifFocusedOnUppyRecently=!1,this.makeDashboardInsidesVisibleAnywayTimeout=null,this.removeDragOverClassTimeout=null}}Ve.VERSION="3.1.0"},187:function(e,t,o){"use strict";o.d(t,"b",(function(){return C})),o.d(t,"a",(function(){return A})),o.d(t,"c",(function(){return _}));var r={};o.r(r),o.d(r,"setItem",(function(){return S})),o.d(r,"getItem",(function(){return T})),o.d(r,"removeItem",(function(){return k}));var n=o(223),l=o(241);class d extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}var h=d;let c;function m(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var f=0;function y(e){return"__private_"+f+++"_"+e}async function v(e){if(401===e.status)throw new h;const t=e.json();if(e.status<200||e.status>300){let o=`Failed request with status: ${e.status}. ${e.statusText}`;try{const e=await t;o=e.message?`${o} message: ${e.message}`:o,o=e.requestId?`${o} request-Id: ${e.requestId}`:o}finally{throw new Error(o)}}return t}var w=y("companionHeaders"),O=y("getPostResponseFunc"),F=y("getUrl"),P=y("errorHandler");c=Symbol.for("uppy test: getCompanionHeaders");class C{constructor(e,t){Object.defineProperty(this,P,{value:j}),Object.defineProperty(this,F,{value:D}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:e=>t=>e?t:this.onReceiveResponse(t)}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1,m(this,w)[w]=null==t?void 0:t.companionHeaders}setCompanionHeaders(e){m(this,w)[w]=e}[c](){return m(this,w)[w]}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}headers(){return Promise.resolve({...C.defaultHeaders,...m(this,w)[w]})}onReceiveResponse(e){const t=this.uppy.getState().companion||{},o=this.opts.companionUrl,{headers:r}=e;return r.has("i-am")&&r.get("i-am")!==t[o]&&this.uppy.setState({companion:{...t,[o]:r.get("i-am")}}),e}preflight(path){return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(m(this,F)[F](path),{method:"OPTIONS"}).then((e=>(e.headers.has("access-control-allow-headers")&&(this.allowedHeaders=e.headers.get("access-control-allow-headers").split(",").map((e=>e.trim().toLowerCase()))),this.preflightDone=!0,this.allowedHeaders.slice()))).catch((e=>(this.uppy.log(`[CompanionClient] unable to make preflight request ${e}`,"warning"),this.preflightDone=!0,this.allowedHeaders.slice())))}preflightAndHeaders(path){return Promise.all([this.preflight(path),this.headers()]).then((e=>{let[t,o]=e;return Object.keys(o).forEach((header=>{t.includes(header.toLowerCase())||(this.uppy.log(`[CompanionClient] excluding disallowed header ${header}`),delete o[header])})),o}))}get(path,e){return this.preflightAndHeaders(path).then((e=>Object(n.a)(m(this,F)[F](path),{method:"get",headers:e,credentials:this.opts.companionCookiesRule||"same-origin"}))).then(m(this,O)[O](e)).then(v).catch(m(this,P)[P]("get",path))}post(path,data,e){const t="post";return this.preflightAndHeaders(path).then((e=>Object(n.a)(m(this,F)[F](path),{method:t,headers:e,credentials:this.opts.companionCookiesRule||"same-origin",body:JSON.stringify(data)}))).then(m(this,O)[O](e)).then(v).catch(m(this,P)[P](t,path))}delete(path,data,e){const t="delete";return this.preflightAndHeaders(path).then((e=>Object(n.a)(`${this.hostname}/${path}`,{method:t,headers:e,credentials:this.opts.companionCookiesRule||"same-origin",body:data?JSON.stringify(data):null}))).then(m(this,O)[O](e)).then(v).catch(m(this,P)[P](t,path))}}function D(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}function j(e,path){return t=>{var o;return null!=(o=t)&&o.isAuthError||(t=new l.a(`Could not ${e} ${m(this,F)[F](path)}`,{cause:t})),Promise.reject(t)}}function S(e,t){return new Promise((o=>{localStorage.setItem(e,t),o()}))}function T(e){return Promise.resolve(localStorage.getItem(e))}function k(e){return new Promise((t=>{localStorage.removeItem(e),t()}))}C.VERSION="3.0.2",C.defaultHeaders={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${C.VERSION}`};class A extends C{constructor(e,t){super(e,t),this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||(e=>e.split("-").map((s=>s.charAt(0).toUpperCase()+s.slice(1))).join(" "))(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}headers(){return Promise.all([super.headers(),this.getAuthToken()]).then((e=>{let[t,o]=e;const r={};return o&&(r["uppy-auth-token"]=o),this.companionKeysParams&&(r["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...t,...r}}))}onReceiveResponse(e){e=super.onReceiveResponse(e);const t=this.uppy.getPlugin(this.pluginId),o=t.getPluginState().authenticated?401!==e.status:e.status<400;return t.setPluginState({authenticated:o}),e}setAuthToken(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}getAuthToken(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}async ensurePreAuth(){if(this.companionKeysParams&&!this.preAuthToken&&(await this.fetchPreAuthToken(),!this.preAuthToken))throw new Error("Could not load authentication data required for third-party login. Please try again later.")}authUrl(e){void 0===e&&(e={});const t=new URLSearchParams(e);return this.preAuthToken&&t.set("uppyPreAuthToken",this.preAuthToken),`${this.hostname}/${this.id}/connect?${t}`}fileUrl(e){return`${this.hostname}/${this.id}/get/${e}`}async fetchPreAuthToken(){if(this.companionKeysParams)try{const e=await this.post(`${this.id}/preauth/`,{params:this.companionKeysParams});this.preAuthToken=e.token}catch(e){this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${e}`,"warning")}}list(e){return this.get(`${this.id}/list/${e||""}`)}logout(){return this.get(`${this.id}/logout`).then((e=>Promise.all([e,this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)]))).then((e=>{let[t]=e;return t}))}static initPlugin(e,t,o){if(e.type="acquirer",e.files=[],o&&(e.opts={...o,...t}),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){const pattern=t.companionAllowedHosts;if(!("string"==typeof pattern||Array.isArray(pattern)||pattern instanceof RegExp))throw new TypeError(`${e.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);e.opts.companionAllowedHosts=pattern}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts=`https://${t.companionUrl.replace(/^\/\//,"")}`:e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||r}}var E=o(395),N=o.n(E);let I,M;function R(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var U=0;function B(e){return"__private_"+U+++"_"+e}var L=B("queued"),z=B("emitter"),x=B("isOpen"),$=B("socket"),H=B("handleMessage");I=Symbol.for("uppy test: getSocket"),M=Symbol.for("uppy test: getQueued");class _{constructor(e){Object.defineProperty(this,L,{writable:!0,value:[]}),Object.defineProperty(this,z,{writable:!0,value:N()()}),Object.defineProperty(this,x,{writable:!0,value:!1}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:e=>{try{const t=JSON.parse(e.data);this.emit(t.action,t.payload)}catch(e){console.log(e)}}}),this.opts=e,e&&!1===e.autoOpen||this.open()}get isOpen(){return R(this,x)[x]}[I](){return R(this,$)[$]}[M](){return R(this,L)[L]}open(){R(this,$)[$]=new WebSocket(this.opts.target),R(this,$)[$].onopen=()=>{for(R(this,x)[x]=!0;R(this,L)[L].length>0&&R(this,x)[x];){const e=R(this,L)[L].shift();this.send(e.action,e.payload)}},R(this,$)[$].onclose=()=>{R(this,x)[x]=!1},R(this,$)[$].onmessage=R(this,H)[H]}close(){var e;null==(e=R(this,$)[$])||e.close()}send(e,t){R(this,x)[x]?R(this,$)[$].send(JSON.stringify({action:e,payload:t})):R(this,L)[L].push({action:e,payload:t})}on(e,t){R(this,z)[z].on(e,t)}emit(e,t){R(this,z)[z].emit(e,t)}once(e,t){R(this,z)[z].once(e,t)}}},220:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var r=o(58),n=o(187),l=o(410),d=o(1),h={strings:{pluginNameDropbox:"Dropbox"}};class c extends r.a{constructor(e,t){super(e,t),this.id=this.opts.id||"Dropbox",n.a.initPlugin(this,t),this.title=this.opts.title||"Dropbox",this.icon=()=>Object(d.e)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},Object(d.e)("g",{fill:"none",fillRule:"evenodd"},Object(d.e)("rect",{className:"uppy-ProviderIconBg",fill:"#0D2481",width:"32",height:"32",rx:"16"}),Object(d.e)("path",{d:"M11 8l5 3.185-5 3.186-5-3.186L11 8zm10 0l5 3.185-5 3.186-5-3.186L21 8zM6 17.556l5-3.185 5 3.185-5 3.186-5-3.186zm15-3.185l5 3.185-5 3.186-5-3.186 5-3.185zm-10 7.432l5-3.185 5 3.185-5 3.186-5-3.186z",fill:"#FFF",fillRule:"nonzero"}))),this.provider=new n.a(e,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"dropbox",pluginId:this.id}),this.defaultLocale=h,this.i18nInit(),this.title=this.i18n("pluginNameDropbox"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new l.a(this,{provider:this.provider});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])}render(e){return this.view.render(e)}}c.VERSION="3.0.1"},245:function(e,t){e.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);const t=e<0,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";const r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),o.length-1);e=Number(e/Math.pow(1024,r));const n=o[r];return e>=10||e%1==0?`${(t?"-":"")+e.toFixed(0)} ${n}`:`${(t?"-":"")+e.toFixed(1)} ${n}`}},383:function(e,t,o){"use strict";var r=o(58),n=o(187),l=o(1),d=o(410);class h extends d.a{toggleCheckbox(e,t){e.stopPropagation(),e.preventDefault(),t.custom.isSharedDrive||super.toggleCheckbox(e,t)}}var c={strings:{pluginNameGoogleDrive:"Google Drive"}};class m extends r.a{constructor(e,t){super(e,t),this.id=this.opts.id||"GoogleDrive",this.title=this.opts.title||"Google Drive",n.a.initPlugin(this,t),this.title=this.opts.title||"Google Drive",this.icon=()=>Object(l.e)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},Object(l.e)("g",{fill:"none",fillRule:"evenodd"},Object(l.e)("rect",{className:"uppy-ProviderIconBg",fill:"#4285F4",width:"32",height:"32",rx:"16"}),Object(l.e)("path",{d:"M25.216 17.736L19.043 7h-6.086l6.175 10.736h6.084zm-11.275.896L10.9 24h11.723l3.04-5.368H13.942zm-1.789-10.29l-5.816 10.29L9.38 24l5.905-10.29-3.132-5.369z",fill:"#FFF"}))),this.provider=new n.a(e,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"drive",pluginId:this.id}),this.defaultLocale=c,this.i18nInit(),this.title=this.i18n("pluginNameGoogleDrive"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new h(this,{provider:this.provider});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("root","/")])}render(e){return this.view.render(e)}}m.VERSION="3.0.1"},414:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var r=o(58),n=o(183),l=o(402),d=o(413),h=o(1),c={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}};class m extends r.a{constructor(e,t){super(e,t),this.handleDrop=async e=>{var t,o;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1});const r=await Object(d.a)(e.dataTransfer,{logDropError:e=>{this.uppy.log(e,"error")}});r.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(r)),null==(t=(o=this.opts).onDrop)||t.call(o,e)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=c;this.opts={target:null,inputName:"files[]",width:"100%",height:"100%",note:null,...t},this.i18nInit(),this.isDragDropSupported=Object(l.a)(),this.removeDragOverClassTimeout=null,this.onInputChange=this.onInputChange.bind(this),this.handleDragOver=this.handleDragOver.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this),this.handleDrop=this.handleDrop.bind(this),this.addFiles=this.addFiles.bind(this),this.render=this.render.bind(this)}addFiles(e){const t=e.map((e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}})));try{this.uppy.addFiles(t)}catch(e){this.uppy.log(e)}}onInputChange(e){const t=Object(n.a)(e.target.files);t.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(t)),e.target.value=null}handleDragOver(e){var t,o;e.preventDefault(),e.stopPropagation();const{types:r}=e.dataTransfer,n=r.some((e=>"Files"===e)),{allowNewUpload:l}=this.uppy.getState();if(!n||!l)return e.dataTransfer.dropEffect="none",void clearTimeout(this.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),null==(t=(o=this.opts).onDragOver)||t.call(o,e)}handleDragLeave(e){var t,o;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout((()=>{this.setPluginState({isDraggingOver:!1})}),50),null==(t=(o=this.opts).onDragLeave)||t.call(o,e)}renderHiddenFileInput(){const{restrictions:e}=this.uppy.opts;return Object(h.e)("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:e=>{this.fileInputRef=e},name:this.opts.inputName,multiple:1!==e.maxNumberOfFiles,accept:e.allowedFileTypes,onChange:this.onInputChange})}static renderArrowSvg(){return Object(h.e)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},Object(h.e)("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return Object(h.e)("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:Object(h.e)("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return Object(h.e)("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){const e=`uppy-u-reset\n      uppy-DragDrop-container\n      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}\n      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}\n    `,t={width:this.opts.width,height:this.opts.height};return Object(h.e)("button",{type:"button",className:e,style:t,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),Object(h.e)("div",{className:"uppy-DragDrop-inner"},m.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){const{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}}m.VERSION="3.0.1"},58:function(e,t,o){"use strict";o.d(t,"b",(function(){return me})),o.d(t,"a",(function(){return Ce}));var r=o(394),n=o(395),l=o.n(n);var d=o(279),h=o.n(d),c=o(812),m=o(416),f=o(280),y=o(396);function v(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const o=t[1];let[r,n]=o.split(".");return r=parseInt(r,10),n=parseInt(n,10),r<15||15===r&&n<15063||(r>18||18===r&&n>=18218)}var w=o(337);const O={debug:()=>{},warn:()=>{},error:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.error(`[Uppy] [${Object(w.a)()}]`,...t)}},F={debug:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.debug(`[Uppy] [${Object(w.a)()}]`,...t)},warn:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.warn(`[Uppy] [${Object(w.a)()}]`,...t)},error:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.error(`[Uppy] [${Object(w.a)()}]`,...t)}};var P=o(245),C=o.n(P),D=o(813),j=o.n(D);const S={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class T extends Error{constructor(){super(...arguments),this.isRestriction=!0}}class k{constructor(e,t){this.i18n=t,this.getOpts=()=>{const t=e();if(null!=t.restrictions.allowedFileTypes&&!Array.isArray(t.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return t}}validate(e,t){const{maxFileSize:o,minFileSize:r,maxTotalFileSize:n,maxNumberOfFiles:l,allowedFileTypes:d}=this.getOpts().restrictions;if(l){if(t.filter((e=>!e.isGhost)).length+1>l)throw new T(`${this.i18n("youCanOnlyUploadX",{smart_count:l})}`)}if(d){if(!d.some((t=>t.includes("/")?!!e.type&&j()(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()))){const e=d.join(", ");throw new T(this.i18n("youCanOnlyUploadFileTypes",{types:e}))}}if(n&&null!=e.size){if(t.reduce(((e,t)=>e+t.size),e.size)>n)throw new T(this.i18n("exceedsSize",{size:C()(n),file:e.name}))}if(o&&null!=e.size&&e.size>o)throw new T(this.i18n("exceedsSize",{size:C()(o),file:e.name}));if(r&&null!=e.size&&e.size<r)throw new T(this.i18n("inferiorSize",{size:C()(r)}))}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(Object.keys(e).length<t)throw new T(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new T(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:o}=this.getOpts().restrictions,r=[];for(const t of o)Object.hasOwn(e.meta,t)&&""!==e.meta[t]||r.push(t);return{missingFields:r,error:t}}}var A={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};let E,N;function I(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var M=0;function R(e){return"__private_"+M+++"_"+e}var U=R("plugins"),B=R("restricter"),L=R("storeUnsubscribe"),z=R("emitter"),x=R("preProcessors"),$=R("uploaders"),H=R("postProcessors"),_=R("informAndEmit"),V=R("checkRequiredMetaFieldsOnFile"),W=R("checkRequiredMetaFields"),K=R("assertNewUploadAllowed"),G=R("checkAndCreateFileStateObject"),Y=R("startIfAutoProceed"),X=R("addListeners"),J=R("updateOnlineStatus"),Q=R("createUpload"),Z=R("getUpload"),ee=R("removeUpload"),te=R("runUpload");E=Symbol.for("uppy test: getPlugins"),N=Symbol.for("uppy test: createUpload");class ie{constructor(e){Object.defineProperty(this,te,{value:ue}),Object.defineProperty(this,ee,{value:ce}),Object.defineProperty(this,Z,{value:he}),Object.defineProperty(this,Q,{value:pe}),Object.defineProperty(this,X,{value:de}),Object.defineProperty(this,Y,{value:le}),Object.defineProperty(this,G,{value:ne}),Object.defineProperty(this,K,{value:ae}),Object.defineProperty(this,W,{value:re}),Object.defineProperty(this,V,{value:oe}),Object.defineProperty(this,_,{value:se}),Object.defineProperty(this,U,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:l()()}),Object.defineProperty(this,x,{writable:!0,value:new Set}),Object.defineProperty(this,$,{writable:!0,value:new Set}),Object.defineProperty(this,H,{writable:!0,value:new Set}),Object.defineProperty(this,J,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=A;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:S,meta:{},onBeforeFileAdded:e=>e,onBeforeUpload:e=>e,store:new c.a,logger:O,infoTimeout:5e3};this.opts={...t,...e,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=F),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.calculateProgress=h()(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:v(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),I(this,B)[B]=new k((()=>this.opts),this.i18n),I(this,L)[L]=this.store.subscribe(((e,t,o)=>{this.emit("state-update",e,t,o),this.updateAll(t)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),I(this,X)[X]()}emit(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];I(this,z)[z].emit(e,...o)}on(e,t){return I(this,z)[z].on(e,t),this}once(e,t){return I(this,z)[z].once(e,t),this}off(e,t){return I(this,z)[z].off(e,t),this}updateAll(e){this.iteratePlugins((t=>{t.update(e)}))}setState(e){this.store.setState(e)}getState(){return this.store.getState()}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.setState({files:{...this.getState().files,[e]:{...this.getState().files[e],...t}}})}i18nInit(){const e=new r.a([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((e=>{e.setOptions()})),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},o={};Object.keys(t).forEach((r=>{const n={...t[r]};n.progress={...n.progress,...e},o[r]=n})),this.setState({files:o,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){I(this,x)[x].add(e)}removePreProcessor(e){return I(this,x)[x].delete(e)}addPostProcessor(e){I(this,H)[H].add(e)}removePostProcessor(e){return I(this,H)[H].delete(e)}addUploader(e){I(this,$)[$].add(e)}removeUploader(e){return I(this,$)[$].delete(e)}setMeta(data){const e={...this.getState().meta,...data},t={...this.getState().files};Object.keys(t).forEach((e=>{t[e]={...t[e],meta:{...t[e].meta,...data}}})),this.log("Adding metadata:"),this.log(data),this.setState({meta:e,files:t})}setFileMeta(e,data){const t={...this.getState().files};if(!t[e])return void this.log("Was trying to set metadata for a file that has been removed: ",e);const o={...t[e].meta,...data};t[e]={...t[e],meta:o},this.setState({files:t})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:o}=this.getState(),r=Object.values(e),n=r.filter((e=>{let{progress:progress}=e;return!progress.uploadComplete&&progress.uploadStarted})),l=r.filter((e=>!e.progress.uploadStarted)),d=r.filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess)),h=r.filter((e=>e.progress.uploadStarted)),c=r.filter((e=>e.isPaused)),m=r.filter((e=>e.progress.uploadComplete)),f=r.filter((e=>e.error)),y=n.filter((e=>!e.isPaused)),v=r.filter((e=>e.progress.preprocess||e.progress.postprocess));return{newFiles:l,startedFiles:d,uploadStartedFiles:h,pausedFiles:c,completeFiles:m,erroredFiles:f,inProgressFiles:n,inProgressNotPausedFiles:y,processingFiles:v,isUploadStarted:h.length>0,isAllComplete:100===t&&m.length===r.length&&0===v.length,isAllErrored:!!o&&f.length===r.length,isAllPaused:0!==n.length&&c.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:r.some((e=>e.isGhost))}}validateRestrictions(e,t){void 0===t&&(t=this.getFiles());try{I(this,B)[B].validate(e,t)}catch(e){return e}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!(!t[e]||t[e].isGhost)}addFile(e){I(this,K)[K](e);const{files:t}=this.getState();let o=I(this,G)[G](t,e);return t[o.id]&&t[o.id].isGhost&&(o={...t[o.id],data:e.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${o.name}, ${o.id}`)),this.setState({files:{...t,[o.id]:o}}),this.emit("file-added",o),this.emit("files-added",[o]),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),I(this,Y)[Y](),o.id}addFiles(e){I(this,K)[K]();const t={...this.getState().files},o=[],r=[];for(let i=0;i<e.length;i++)try{let r=I(this,G)[G](t,e[i]);t[r.id]&&t[r.id].isGhost&&(r={...t[r.id],data:e[i].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${r.name}, ${r.id}`)),t[r.id]=r,o.push(r)}catch(e){e.isRestriction||r.push(e)}if(this.setState({files:t}),o.forEach((e=>{this.emit("file-added",e)})),this.emit("files-added",o),o.length>5?this.log(`Added batch of ${o.length} files`):Object.keys(o).forEach((e=>{this.log(`Added file: ${o[e].name}\n id: ${o[e].id}\n type: ${o[e].type}`)})),o.length>0&&I(this,Y)[Y](),r.length>0){let e="Multiple errors occurred while adding files:\n";if(r.forEach((t=>{e+=`\n * ${t.message}`})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:r.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(r,e);{const t=new Error(e);throw t.errors=r,t}}}removeFiles(e,t){const{files:o,currentUploads:r}=this.getState(),n={...o},l={...r},d=Object.create(null);function h(e){return void 0===d[e]}e.forEach((e=>{o[e]&&(d[e]=o[e],delete n[e])})),Object.keys(l).forEach((e=>{const t=r[e].fileIDs.filter(h);if(0===t.length)return void delete l[e];const{capabilities:o}=this.getState();if(t.length!==r[e].fileIDs.length&&!o.individualCancellation)throw new Error("individualCancellation is disabled");l[e]={...r[e],fileIDs:t}}));const c={currentUploads:l,files:n};0===Object.keys(n).length&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),this.calculateTotalProgress();const m=Object.keys(d);m.forEach((e=>{this.emit("file-removed",d[e],t)})),m.length>5?this.log(`Removed ${m.length} files`):this.log(`Removed files: ${m.join(", ")}`)}removeFile(e,t){void 0===t&&(t=null),this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}pauseAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const o={...e[t],isPaused:!0};e[t]=o})),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const o={...e[t],isPaused:!1,error:null};e[t]=o})),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter((t=>e[t].error));if(t.forEach((t=>{const o={...e[t],isPaused:!1,error:null};e[t]=o})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});const o=I(this,Q)[Q](t,{forceAllowNewUpload:!0});return I(this,te)[te](o)}cancelAll(e){let{reason:t="user"}=void 0===e?{}:e;if(this.emit("cancel-all",{reason:t}),"user"===t){const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=I(this,Q)[Q]([e],{forceAllowNewUpload:!0});return I(this,te)[te](t)}logout(){this.iteratePlugins((e=>{e.provider&&e.provider.logout&&e.provider.logout()}))}calculateProgress(e,data){if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t=Number.isFinite(data.bytesTotal)&&data.bytesTotal>0;this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,bytesUploaded:data.bytesUploaded,bytesTotal:data.bytesTotal,percentage:t?Math.round(data.bytesUploaded/data.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const e=this.getFiles().filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});const t=e.filter((e=>null!=e.progress.bytesTotal)),o=e.filter((e=>null==e.progress.bytesTotal));if(0===t.length){const t=100*e.length,r=o.reduce(((e,t)=>e+t.progress.percentage),0),n=Math.round(r/t*100);return void this.setState({totalProgress:n})}let r=t.reduce(((e,t)=>e+t.progress.bytesTotal),0);const n=r/t.length;r+=n*o.length;let l=0;t.forEach((e=>{l+=e.progress.bytesUploaded})),o.forEach((e=>{l+=n*(e.progress.percentage||0)/100}));let d=0===r?0:Math.round(l/r*100);d>100&&(d=100),this.setState({totalProgress:d}),this.emit("progress",d)}updateOnlineStatus(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if("function"!=typeof e){throw new TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`)}const o=new e(this,t),r=o.id;if(!r)throw new Error("Your plugin must have an id");if(!o.type)throw new Error("Your plugin must have a type");const n=this.getPlugin(r);if(n){const e=`Already found a plugin named '${n.id}'. Tried to use: '${r}'.\nUppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(e)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),o.type in I(this,U)[U]?I(this,U)[U][o.type].push(o):I(this,U)[U][o.type]=[o],o.install(),this}getPlugin(e){for(const t of Object.values(I(this,U)[U])){const o=t.find((t=>t.id===e));if(null!=o)return o}}[E](e){return I(this,U)[U][e]}iteratePlugins(e){Object.values(I(this,U)[U]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=I(this,U)[U][e.type],o=t.findIndex((t=>t.id===e.id));-1!==o&&t.splice(o,1);const r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}close(e){let{reason:t}=void 0===e?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),I(this,L)[L](),this.iteratePlugins((e=>{this.removePlugin(e)})),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",I(this,J)[J]),window.removeEventListener("offline",I(this,J)[J]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,o){void 0===t&&(t="info"),void 0===o&&(o=3e3);const r="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout((()=>this.hideInfo()),o),this.emit("info-visible")}log(e,t){const{logger:o}=this.opts;switch(t){case"error":o.error(e);break;case"warning":o.warn(e);break;default:o.debug(e)}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?I(this,te)[te](e):(I(this,ee)[ee](e),Promise.reject(new Error("Nonexistent upload")))}[N](){return I(this,Q)[Q](...arguments)}addResultData(e,data){if(!I(this,Z)[Z](e))return void this.log(`Not setting result for an upload that has been removed: ${e}`);const{currentUploads:t}=this.getState(),o={...t[e],result:{...t[e].result,...data}};this.setState({currentUploads:{...t,[e]:o}})}upload(){var e;null!=(e=I(this,U)[U].uploader)&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const o=this.opts.onBeforeUpload(t);return!1===o?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(o&&"object"==typeof o&&(t=o,this.setState({files:t})),Promise.resolve().then((()=>I(this,B)[B].validateMinNumberOfFiles(t))).catch((e=>{throw I(this,_)[_](e),e})).then((()=>{if(!I(this,W)[W](t))throw new T(this.i18n("missingRequiredMetaField"))})).catch((e=>{throw e})).then((()=>{const{currentUploads:e}=this.getState(),o=Object.values(e).flatMap((e=>e.fileIDs)),r=[];Object.keys(t).forEach((e=>{const t=this.getFile(e);t.progress.uploadStarted||-1!==o.indexOf(e)||r.push(t.id)}));const n=I(this,Q)[Q](r);return I(this,te)[te](n)})).catch((e=>{throw this.emit("error",e),this.log(e,"error"),e})))}}function se(e,t){const{message:o,details:details=""}=e;e.isRestriction?this.emit("restriction-failed",t,e):this.emit("error",e),this.info({message:o,details:details},"error",this.opts.infoTimeout),this.log(`${o} ${details}`.trim(),"error")}function oe(e){const{missingFields:t,error:o}=I(this,B)[B].getMissingRequiredMetaFields(e);return!(t.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:t}),this.log(o.message),this.emit("restriction-failed",e,o),!1)}function re(e){let t=!0;for(const o of Object.values(e))I(this,V)[V](o)||(t=!1);return t}function ae(e){const{allowNewUpload:t}=this.getState();if(!1===t){const t=new T(this.i18n("noMoreFilesAllowed"));throw I(this,_)[_](t,e),t}}function ne(e,t){t instanceof File&&(t={name:t.name,type:t.type,size:t.size,data:t});const o=Object(m.a)(t),r=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}(o,t),n=Object(f.a)(r).extension,l=Boolean(t.isRemote),d=Object(y.a)({...t,type:o});if(this.checkIfFileAlreadyExists(d)){const e=new T(this.i18n("noDuplicates",{fileName:r}));throw I(this,_)[_](e,t),e}const meta=t.meta||{};meta.name=r,meta.type=o;const h=Number.isFinite(t.data.size)?t.data.size:null;let c={source:t.source||"",id:d,name:r,extension:n||"",meta:{...this.getState().meta,...meta},type:o,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:h,uploadComplete:!1,uploadStarted:null},size:h,isRemote:l,remote:t.remote||"",preview:t.preview};const v=this.opts.onBeforeFileAdded(c,e);if(!1===v){const e=new T("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",t,e),e}"object"==typeof v&&null!==v&&(c=v);try{const t=Object.keys(e).map((i=>e[i]));I(this,B)[B].validate(c,t)}catch(e){throw I(this,_)[_](e,c),e}return c}function le(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((()=>{this.scheduledAutoProceed=null,this.upload().catch((e=>{e.isRestriction||this.log(e.stack||e.message||e)}))}),4))}function de(){const e=(e,t,o)=>{let r=e.message||"Unknown error";e.details&&(r+=` ${e.details}`),this.setState({error:r}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:r,response:o})};this.on("error",e),this.on("upload-error",((t,o,r)=>{if(e(o,t,r),"object"==typeof o&&o.message){const e=new Error(o.message);e.details=o.message,o.details&&(e.details+=` ${o.details}`),e.message=this.i18n("failedToUpload",{file:null==t?void 0:t.name}),I(this,_)[_](e)}else I(this,_)[_](o)})),this.on("upload",(()=>{this.setState({error:null})})),this.on("upload-started",(e=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",((e,t)=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const o=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...o,postprocess:I(this,H)[H].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||o.bytesTotal}),this.calculateTotalProgress()})),this.on("preprocess-progress",((e,progress)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:progress}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("preprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})})),this.on("postprocess-progress",((e,progress)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:progress}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("postprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})})),this.on("restored",(()=>{this.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(e=>{e&&I(this,V)[V](e)})),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",I(this,J)[J]),window.addEventListener("offline",I(this,J)[J]),setTimeout(I(this,J)[J],3e3))}function pe(e,t){void 0===t&&(t={});const{forceAllowNewUpload:o=!1}=t,{allowNewUpload:r,currentUploads:n}=this.getState();if(!r&&!o)throw new Error("Cannot create a new upload: already uploading.");const l=((e=21)=>{let t="",i=e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t})();return this.emit("upload",{id:l,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...n,[l]:{fileIDs:e,step:0,result:{}}}}),l}function he(e){const{currentUploads:t}=this.getState();return t[e]}function ce(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async function ue(e){let{currentUploads:t}=this.getState(),o=t[e];const r=o.step||0,n=[...I(this,x)[x],...I(this,$)[$],...I(this,H)[H]];try{for(let l=r;l<n.length&&o;l++){const r=n[l],d={...o,step:l};this.setState({currentUploads:{...t,[e]:d}}),await r(d.fileIDs,e),t=this.getState().currentUploads,o=t[e]}}catch(t){throw I(this,ee)[ee](e),t}if(o){o.fileIDs.forEach((e=>{const t=this.getFile(e);t&&t.progress.postprocess&&this.emit("postprocess-complete",t)}));const r=o.fileIDs.map((e=>this.getFile(e))),n=r.filter((e=>!e.error)),l=r.filter((e=>e.error));await this.addResultData(e,{successful:n,failed:l,uploadID:e}),t=this.getState().currentUploads,o=t[e]}let l;return o&&(l=o.result,this.emit("complete",l),I(this,ee)[ee](e)),null==l&&this.log(`Not setting result for an upload that has been removed: ${e}`),l}ie.VERSION="3.0.2";var me=ie,ge=o(1),fe=o(814),be=o(398),ye=o(152);function ve(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var we=0;function Oe(e){return"__private_"+we+++"_"+e}var Fe=Oe("updateUI");class Pe extends ye.a{constructor(){super(...arguments),Object.defineProperty(this,Fe,{writable:!0,value:void 0})}mount(e,t){const o=t.id,r=Object(fe.a)(e);if(r){this.isTargetDOMEl=!0;const t=document.createElement("div");return t.classList.add("uppy-Root"),ve(this,Fe)[Fe]=function(e){let t=null,o=null;return function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return o=n,t||(t=Promise.resolve().then((()=>(t=null,e(...o))))),t}}((e=>{this.uppy.getPlugin(this.id)&&(Object(ge.f)(this.render(e),t),this.afterUpdate())})),this.uppy.log(`Installing ${o} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),Object(ge.f)(this.render(this.uppy.getState()),t),this.el=t,r.appendChild(t),t.dir=this.opts.direction||Object(be.a)(t)||"ltr",this.onMount(),this.el}let n;if("object"==typeof e&&e instanceof Pe)n=e;else if("function"==typeof e){const t=e;this.uppy.iteratePlugins((p=>{p instanceof t&&(n=p)}))}if(n)return this.uppy.log(`Installing ${o} to ${n.id}`),this.parent=n,this.el=n.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${o}`);let l=`Invalid target option given to ${o}.`;throw l+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}update(e){var t,o;null!=this.el&&(null==(t=(o=ve(this,Fe))[Fe])||t.call(o,e))}unmount(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}onMount(){}onUnmount(){}}var Ce=Pe},830:function(e,t){e.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),o.length-1);e=Number(e/Math.pow(1024,r));var n=o[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+n:(t?"-":"")+e.toFixed(1)+" "+n}}}]);