(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{2313:function(t,e,r){"use strict";r.r(e);var n=r(4),o=(r(29),r(30),r(67),r(50),r(18)),l=r(52),c={middleware:["geolocate-lang"],head:function(){return{title:this.$t("pageTitle.login")}},validations:{form:{email:{email:o.email,required:o.required},password:{required:o.required}}},data:function(){return{isLoading:!1,errorMessage:null,form:{email:null,password:null},lang:"pt"}},computed:{queryString:function(){return this.$route.fullPath.split("?")[1]?"?"+this.$route.fullPath.split("?")[1]:""},signupLink:function(){return"/signup".concat(this.queryString)}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lang=t.$route.query.lang?t.$route.query.lang:"pt",document.addEventListener("autocomplete",(function(t){t.target.hasAttribute("autocompleted"),console.log("AutoCompleted")}));case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){document.removeEventListener("autocomplete",(function(t){console.log("Autcomplete Removed")}))},methods:{signInUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.errorMessage=null,t.$v.form.$touch(),t.$v.form.$error){e.next=11;break}return t.isLoading=!0,e.next=7,t.$customAuth.login({email:t.form.email,password:t.form.password});case 7:e.sent,t.$store.commit("RESET_STORE"),setTimeout(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/".concat(l.p,"/register-event"),{fingerprint:t.$fingerprint,action:"login"});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),1e3),t.$router.push(decodeURIComponent(t.$route.query.redirect||"/loading"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.error?(r=e.t0.response.data.error.message,t.errorMessage="EMAIL_NOT_FOUND"===r?t.$t("auth.validations.noAccount"):"INVALID_PASSWORD"===r?t.$t("auth.validations.wrongPassword"):"USER_DISABLED"===r?t.$t("auth.validations.disabled"):"TOO_MANY_ATTEMPTS_TRY_LATER : Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later."===r?t.$t("auth.validations.tooManyTries"):"GENERIC_ERROR"===r?t.$t("auth.validations.genericError"):"RECAPTCHA_FAILED"===r?t.$t("auth.validations.recaptchaError"):r):t.errorMessage=e.t0.message||e.t0.code;case 16:return e.prev=16,t.isLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})))()},logout:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,t.$customAuth.signOut();case 4:e.sent,t.$store.commit("RESET_STORE"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,t.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()}}},d=r(0),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},[n("div",[n("div",{staticClass:"sm:mx-auto sm:w-full sm:max-w-md"},[n("img",{staticClass:"mx-auto h-12 w-auto",attrs:{src:r(568),alt:"Workflow"}}),t._v(" "),n("h2",{staticClass:"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900"},[t._v("\n        "+t._s(t.$t("auth.login.title"))+"\n      ")]),t._v(" "),n("p",{staticClass:"mt-2 text-center text-base leading-5 text-gray-600"},[t._v("\n        "+t._s(t.$t("defaults.dictionary.or"))+"\n        "),n("nuxt-link",{staticClass:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline transition ease-in-out duration-150",attrs:{to:t.signupLink}},[t._v("\n          "+t._s(t.$t("auth.login.description"))+"\n        ")])],1)]),t._v(" "),n("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[n("form",{staticClass:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},[n("div",[n("label",{staticClass:"block text-sm font-medium leading-5 mb-1 text-gray-700",attrs:{for:"email"}},[t._v("\n            "+t._s(t.$t("auth.form.email"))+"\n          ")]),t._v(" "),n("KInput",{attrs:{id:"email",name:"email",error:t.$v.form.email.$error,autocomplete:"username"},on:{onBlur:function(e){return t.$v.form.email.$touch()},valueChange:function(e){t.form.email=e}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),t.$v.form.email.$error?n("div",[t.$v.form.email.email?t._e():n("div",{staticClass:"text-xs text-red-500"},[t._v(t._s(t.$t("defaults.validations.email")))]),t._v(" "),t.$v.form.email.required?t._e():n("div",{staticClass:"text-xs text-red-500"},[t._v(t._s(t.$t("defaults.validations.required")))])]):t._e()],1),t._v(" "),n("div",{staticClass:"mt-6"},[n("label",{staticClass:"block text-sm font-medium leading-5 mb-1 text-gray-700",attrs:{for:"password"}},[t._v("\n          "+t._s(t.$t("auth.form.password"))+"\n          ")]),t._v(" "),n("KInput",{attrs:{type:"password",id:"password",name:"password",error:t.$v.form.password.$error,autocomplete:"current-password",required:""},on:{valueChange:function(e){t.form.password=e},onBlur:function(e){return t.$v.form.password.$touch()}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("div",{staticClass:"mt-2 flex items-center justify-end"},[n("div",{staticClass:"text-sm leading-5"},[n("nuxt-link",{staticClass:"font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline transition ease-in-out duration-150",attrs:{to:"/ResetPassword"+t.queryString}},[t._v("\n              "+t._s(t.$t("auth.login.forgot"))+"\n            ")])],1)]),t._v(" "),t.errorMessage?n("AlertBar",{staticClass:"mt-4",attrs:{color:"red",icon:"XIcon"}},[t._v("\n          "+t._s(t.errorMessage)+"\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"mt-6"},[n("span",{staticClass:"block w-full rounded-md shadow-sm"},[n("button",{staticClass:"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out",class:{"opacity-50":t.isLoading},attrs:{type:"button",disabled:t.isLoading},on:{click:t.signInUser}},[t.isLoading?n("LoadingSpinner"):t._e(),t._v(" "+t._s(t.$t("auth.login.primaryButtonText"))+"\n            ")],1)])])],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{KInput:r(57).default,AlertBar:r(252).default,LoadingSpinner:r(141).default})}}]);