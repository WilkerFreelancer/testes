(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1118:function(e,t,n){"use strict";n.r(t),n.d(t,"strict",(function(){return y})),n.d(t,"state",(function(){return k})),n.d(t,"mutations",(function(){return A})),n.d(t,"actions",(function(){return D}));n(17),n(26),n(20),n(27);var o=n(4),r=n(5),c=(n(29),n(35),n(128),n(40),n(50),n(13),n(38),n(21),n(114),n(255),n(197)),l=n(316),d=n(11),m=n.n(d),f=n(822),_=n.n(f),h=n(87),S=n.n(h),v=n(52);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=!1;function T(e){e.preventDefault(),e.returnValue=""}var I={"join-affiliate-id":"join-affiliate-id",flutter_embed:"flutter_embed",sso:"sso"},k=function(){return{country:"BR",dashboardRealtimeAnimate:!1,auth:{},isSuperAdminAccess:!1,showFestivalCover:!0,showCourseCover:!1,currency:"BRL",newOrders:[],newSubscriptions:[],affiliateRequestCount:0,pusherInstance:null,productBeingSaved:!1,dashboardRefresh:!1,productOptions:[{id:"all"}],bank:{bank:{document_type:null}},user:null,google_ads:[],facebook_domains:[{id:null,domain:"go.kiwify.com.br"}],profile:{isSeller:!0,isTeamMember:!0,myStore:{id:null}},activeTeam:localStorage.getItem("activeTeam")?JSON.parse(localStorage.getItem("activeTeam")):{permissions:{}},retry401:null,photoURL:null,teams:[],studentView:{primaryColor:"#F52F57"},token:null,dashboardType:"selling",render:!1,redirectRender:!1,fees:{mdr_1:null},signatures:{file:null,video:null},currentRoute:null,affiliatesList:[],superAdminOptions:{show_customer_details:!1},intl:{baseCurrencies:c.a,currencyFormats:c.b},defaultCertificate:{},statusLoginWithoutOtp:{}}},A={SET_COUNTRY:function(e,t){e.country=t},SET_AUTH:function(e,t){e.auth=t},SET_FESTIVAL_COVER:function(e,t){e.showFestivalCover=t},SET_COURSE_COVER:function(e,t){e.showCourseCover=t;var n=parseInt(localStorage.getItem("courseCoverBannerCount"),10)||0;n++,localStorage.setItem("courseCoverBannerCount",n.toString())},SHOW_CHAT:function(e,t){var n,o,r;if($crisp){var c=(null==e||null===(n=e.caching)||void 0===n||null===(o=n.store)||void 0===o?void 0:o.data)||{},l=(null==c||null===(r=c.category)||void 0===r?void 0:r.total_commission_earned)||0;if($crisp.push(["on","chat:opened",function(){$crisp.push(["set","session:data",[[["total_commission_earned",l]]]])}]),$crisp.is&&$crisp.is("chat:hidden")){var d,f,_=null===(d=e.activeTeam)||void 0===d?void 0:d.blacklist_chat_until;if(_)m()(_).isBefore(m()())&&l&&$crisp.push(["do","chat:show"]);else null!==(f=e.activeTeam)&&void 0!==f&&f.id&&l&&$crisp.push(["do","chat:show"])}}},SET_ROUTE:function(e,t){e.currentRoute=t},SET_AFFILIATE_REQUEST_COUNT:function(e,t){e.affiliateRequestCount=t},SET_AFFILIATES_LIST:function(e,t){e.affiliatesList=t},SET_DASHBOARD_REALTIME_ANIMATION_STATE:function(e,t){localStorage.setItem("dashboardRealtimeAnimate",t),e.dashboardRealtimeAnimate=t},SET_DASHBOARD_REFRESH:function(e,t){e.dashboardRefresh=t},PUSHER_INIT:function(e){var t=this;e.pusherInstance||(e.pusherInstance=new _.a("891582a04935e437c7b5",{cluster:"mt1"}),e.pusherInstance.bind("verification_status_updated",(function(data){"submitted"===data?t.app.$amplitude.logEvent("verification_submitted"):"approved"===data&&t.app.$amplitude.logEvent("identity_verified"),e.activeTeam.verification=E(E({},data),{},{background_check_approved:e.activeTeam.verification.background_check_approved})})),e.pusherInstance.bind("legal_representative_verification_status_updated",(function(data){e.activeTeam.verification=E(E({},data),{},"submitted"===data?{legal_representative_submitted:!0}:{legal_representative_submitted:!1})})),e.pusherInstance.bind("login_without_otp_status_updated",(function(data){e.statusLoginWithoutOtp={status:data.verification_status,id:data.verification_id?data.verification_id:null}})),e.pusherInstance.bind("orders_updated",(function(data){e.dashboardRefresh=!0})),e.pusherInstance.bind("paid_order_created",(function(data){-1===e.newOrders.indexOf(data.order_id)?e.newOrders.push(data.order_id):console.log("DUPLICATE_ORDER_EVENT")})),e.pusherInstance.bind("subscription_created",(function(data){-1===e.newSubscriptions.indexOf(data.subscription_id)?e.newSubscriptions.push(data.subscription_id):console.log("DUPLICATE_SUBSCRIPTION_EVENT")}))),e.pusherInstance.subscribe("store-"+e.activeTeam.id)},SET_NEW_ORDERS:function(e,data){e.newOrders=data},SET_NEW_SUBSCRIPTIONS:function(e,data){e.newSubscriptions=data},SET_PRODUCTS:function(e,t){e.productOptions=t},UNSHIFT_PRODUCTS:function(e,t){e.productOptions.unshift(t)},SET_BANK:function(e,t){e.bank=t},SET_GOOGLE_ADS:function(e,t){e.google_ads=t},SET_FACEBOOK_DOMAINS:function(e,t){e.facebook_domains=t},SET_USER:function(e,t){e.bank=t},SET_PROFILE_PHOTO:function(e,t){e.photoURL=t},SET_FEES:function(e,t){e.fees=t},SET_SHOW_PRODUCT_MODAL:function(e,t){e.activeTeam.show_product_modal=t,e.teams.map((function(n){n.id===e.activeTeam.id&&(n.show_product_modal=t)}))},SET_TICKETS_CLAIMED:function(e,t){e.activeTeam.tickets_claimed=t,e.teams.map((function(n){n.id===e.activeTeam.id&&(n.tickets_claimed=t)}))},SET_REFRESH:function(e,t){e.refresh401=t},CHANGE_BULK_IMPORT_LIMIT:function(e,t){e.activeTeam.bulk_import_students_total=t,e.teams.map((function(n){n.id===e.activeTeam.id&&(n.bulk_import_students_total=t)}))},CHANGE_VERIFICATION_STATUS_FACEBOOK_DOMAIN:function(e,t){e.facebook_domains=e.facebook_domains.map((function(e){return t.id===e.id&&(e.verified=t.verified),e}))},SET_PRIMARY_COLOR:function(e,t){e.studentView.primaryColor=t},SET_DASHBOARD_TYPE:function(e,t){if(console.log("STARTING - DASHBOARD TYPE SETTING",t),this.app.store.commit("videoUpload/SET_UPLOADING",!1),e.dashboardType=t,localStorage.setItem("dashboardType",t),"buying"===e.dashboardType)console.log("BUYER - STUDENT"),e.redirectRender=!0,setTimeout((function(){e.render=!0,console.log("RENDER - COMPLETED FOR STUDENT")}),1e3);else if(console.log("RENDER - COMPLETED FOR SELLER"),e.teams.length)if(localStorage.getItem("activeTeam")){var n=JSON.parse(localStorage.getItem("activeTeam")),o=e.teams.filter((function(e){return e.id===n.id}));0!==o.length?this.app.store.commit("SET_TEAM",o[0]):this.app.store.commit("SET_TEAM",n)}else this.app.store.commit("SET_TEAM",e.teams[0]);else e.redirectRender=!0,setTimeout((function(){e.render=!0,console.log("RENDER - COMPLETED FOR ONBOARDING")}),1e3);console.log("ENDED - DASHBOARD TYPE SETTING",t)},SET_PROFILE:function(e,t){e.profile=t},SET_SUPER_ADMIN_OPTIONS:function(e,t){e.superAdminOptions=t,localStorage.setItem("superAdminOptions",JSON.stringify(t))},ADD_TEAM:function(e,t){e.teams.push(t)},COMPANY_NAME_CHANGED:function(e,t){e.teams.map((function(n){n.id===e.activeTeam.id&&(n.name=t)}))},SET_TEAMS:function(e,t){e.teams=t},SET_RENDER:function(e,t){e.render=t},PRODUCT_IS_SAVING:function(e,t){e.productBeingSaved=t,e.productBeingSaved?window.addEventListener("beforeunload",T):window.removeEventListener("beforeunload",T)},BLOCK_REFRESH:function(e,t){t?window.addEventListener("beforeunload",T):window.removeEventListener("beforeunload",T)},SET_SIGNATURES:function(e,data){e.signatures={video:data.videoResponse.data,file:data.fileResponse.data}},SET_TEAM:function(e,t){e.render=!1,e.redirectRender=!1,this.app.store.commit("videoUpload/SET_UPLOADING",!1),e.videoUpload.uppyInstance&&this.app.store.commit("videoUpload/DESTROY_UPPY",!1);var p=e.profile.myStore?e.profile.myStore.id:0;if(t.id!==p?(this.$axios.setHeader("Store",t.id),this.$v2.setHeader("Store",t.id)):(this.$axios.setHeader("Store",null),this.$v2.setHeader("Store",null)),e.pusherInstance&&e.pusherInstance.unsubscribe("store-"+e.activeTeam.id),e.activeTeam=t,"submitted"===e.activeTeam.verification.verification_status&&this.app.store.commit("PUSHER_INIT",{}),"approved"===e.activeTeam.verification.verification_status&&e.caching.store.data.category.total_commission_earned>0&&this.app.store.commit("PUSHER_INIT",{}),localStorage.setItem("activeTeam",JSON.stringify(t)),this.app.store.commit("caching/LOAD_ALL_CACHE_FROM_LOCALSTORAGE",e.activeTeam.id),localStorage.getItem("kiwi_device_token_"+e.profile.user.external_id)){if(!I[e.currentRoute.name]){localStorage.getItem("finance_currency");var n=e.activeTeam.is_mor?"currency=".concat("BRL"):"currency=BRL";"admin"===e.activeTeam.permissions||"super-admin"===e.activeTeam.permissions?"selling"===e.dashboardType&&(this.app.store.commit("caching/FETCH",{type:"category",loading:!0}),this.app.store.commit("caching/FETCH",{type:"fees",loading:!0,query:n}),this.app.store.dispatch("fetchFacebookDomains"),this.app.store.dispatch("fetchAffiliateRequests"),this.app.store.commit("caching/FETCH",{type:"myAffiliations",query:"count=100000",loading:!0}),this.app.store.commit("caching/FETCH",{type:"products",loading:!0}),this.app.store.commit("caching/FETCH",{type:"coproductions",loading:!0}),this.app.store.commit("caching/FETCH",{type:"integrations",loading:!0}),this.app.store.commit("caching/FETCH",{type:"legalEntities",loading:!0})):(e.activeTeam.permissions.Products?"selling"===e.dashboardType&&(this.app.store.commit("caching/FETCH",{type:"products",loading:!0}),this.app.store.commit("caching/FETCH",{type:"coproductions",loading:!0}),this.app.store.dispatch("fetchFacebookDomains"),this.app.store.commit("caching/FETCH",{type:"myAffiliations",loading:!0})):e.activeTeam.permissions.Events&&"selling"===e.dashboardType&&this.app.store.commit("caching/FETCH",{type:"products",loading:!0}),e.activeTeam.permissions.Affiliates&&this.app.store.dispatch("fetchAffiliateRequests"),e.activeTeam.permissions.MembersArea&&this.app.store.commit("caching/FETCH",{type:"schools",loading:!0}),e.activeTeam.permissions.Apps&&"selling"===e.dashboardType&&this.app.store.commit("caching/FETCH",{type:"integrations",loading:!0}),e.activeTeam.permissions.TeamMembers&&(e.dashboardType,e.activeTeam.permissions.Sales,e.activeTeam.permissions.Finance&&"selling"===e.dashboardType&&(this.app.store.commit("caching/FETCH",{type:"fees",loading:!0,query:n}),this.app.store.commit("caching/FETCH",{type:"competition",loading:!0}),this.app.store.commit("caching/FETCH",{type:"legalEntities",loading:!0})))),this.app.store.dispatch("fetchSignatures")}"super-admin"===e.activeTeam.permissions?e.isSuperAdminAccess=!0:e.isSuperAdminAccess=!1}e.redirectRender=!0,setTimeout((function(){e.render=!0}),1e3)},SET_ACTIVE_TEAM:function(e,t){e.activeTeam=t},SET_ACCEPTED_TERMS:function(e,t){e.profile.myStore.accepted_terms=t},SET_TOKEN:function(e,t){this.$axios.setHeader("Authorization","Bearer ".concat(t)),this.$v2.setHeader("Authorization","Bearer ".concat(t))},RESET_STORE:function(e,t){e.teams=[],e.profile={isSeller:!0,isTeamMember:!0,isStudent:!1,myStore:{id:null}},e.activeTeam=localStorage.getItem("activeTeam")?JSON.parse(localStorage.getItem("activeTeam")):{permissions:{}},e.dashboardType="selling";var n=localStorage.getItem("utm_source"),o=localStorage.getItem("utm_campaign"),r=Object.keys(localStorage).filter((function(e){return e.startsWith("kiwi_device_token_")})).map((function(e){return{key:e,value:localStorage[e]}}));localStorage.clear(),r.map((function(e){localStorage.setItem(e.key,e.value)})),n&&localStorage.setItem("utm_source",n),o&&localStorage.setItem("utm_campaign",o),e.render=!1,e.redirectRender=!1,this.$axios.setHeader("Store"),this.$v2.setHeader("Store")},SET_FILE_SIGNATURE:function(e,t){e.signatures.file=t},SET_DEFAULT_CERTIFICATE:function(e,t){var n=this;setTimeout((function(){e.defaultCertificate={version:"4.3.0",objects:[{type:"i-text",version:"4.3.0",originX:"center",originY:"top",left:352.76,top:67.68,width:406.54,height:45.2,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1.29,scaleY:1.29,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.fields.title"),fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"center",textBackgroundColor:"",charSpacing:0,id:"ztx0u9e1ig0",styles:{}},{type:"i-text",version:"4.3.0",originX:"center",originY:"top",left:349.89,top:171.83,width:104.96,height:22.6,fill:"#222F3D",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1.18,scaleY:1.18,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.fields.student"),fontSize:20,fontWeight:"normal",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"njb1xismjl9",styles:{}},{type:"text",version:"4.3.0",originX:"center",originY:"top",left:353.9,top:198.99,width:240.31,height:33.9,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.template[2]"),fontSize:30,fontWeight:"bold",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"student_name",styles:{}},{type:"i-text",version:"4.3.0",originX:"center",originY:"top",left:356.51,top:259.45,width:147.74,height:22.6,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1.14,scaleY:1.12,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.fields.course"),fontSize:20,fontWeight:"normal",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"m12uuvs77ia",styles:{}},{type:"text",version:"4.3.0",originX:"center",originY:"top",left:351.91,top:288,width:128.66,height:33.9,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.template[8]"),fontSize:30,fontWeight:"bold",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"course_name",styles:{}},{type:"text",version:"4.3.0",originX:"center",originY:"top",left:352.93,top:377,width:139.81,height:22.6,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.template[5]"),fontSize:20,fontWeight:"normal",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"end_date",styles:{}},{type:"text",version:"4.3.0",originX:"center",originY:"top",left:351.91,top:412.02,width:131.06,height:22.6,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,text:n.app.i18n.t("membersArea.certificate.template[6]"),fontSize:20,fontWeight:"normal",fontFamily:"Times New Roman",fontStyle:"normal",lineHeight:1.16,underline:!1,overline:!1,linethrough:!1,textAlign:"left",textBackgroundColor:"",charSpacing:0,id:"course_owner",styles:{}}],backgroundImage:{type:"image",version:"4.3.0",originX:"left",originY:"top",left:0,top:0,width:639,height:452,fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeMiterLimit:4,scaleX:1.11,scaleY:1.13,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,cropX:0,cropY:0,src:"https://kiwify-assets-cdn.netlify.app/certificate-default.jpeg",crossOrigin:"anonymous",filters:[]}}}),1e3)}},D={fetchProducts:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=e.commit)("SET_PRODUCTS",[{id:"all",name:n.app.i18n.t("defaults.components.productsDropdown.default")}]),t.next=4,n.$axios.get("/".concat(v.l));case 4:(r=t.sent).data.products.sort((function(a,b){return a.name<b.name?-1:a.name>b.name?1:0})),c=n.app.i18n.t("defaults.components.productsDropdown.default"),o("SET_PRODUCTS",r.data.products),o("UNSHIFT_PRODUCTS",{id:"all",name:c});case 9:case"end":return t.stop()}}),t)})))()},fetchSignatures:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,n.next=3,t.$axios.get("uploads/signature");case 3:return r=n.sent,n.next=6,t.$axios.get("videos/signature?type=single");case 6:c=n.sent,o("SET_SIGNATURES",{fileResponse:r,videoResponse:c});case 8:case"end":return n.stop()}}),n)})))()},fetchAvatarSignature:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,n.next=3,t.$axios.get("uploads/signature");case 3:r=n.sent,o("SET_FILE_SIGNATURE",r.data);case 5:case"end":return n.stop()}}),n)})))()},nuxtClientInit:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function n(){var r,c,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.commit,e.dispatch,c=e.state,t.set,(d=t.context).$customAuth.currentUser&&(m=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,o,m,f,_,h,O,y,T,I,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROFILE",{isSeller:!0,isTeamMember:!0,myStore:{id:null,accepted_terms:!0}}),e.next=3,d.$axios.get("/".concat(v.p,"/profile"),null,{headers:[{Authorization:"Bearer ".concat(t)}]});case 3:n=e.sent,d.i18n.setLocale(n.data.data.user.language?n.data.data.user.language.toLowerCase():"pt"),r("SET_PROFILE",E({},n.data.data)),n.data.data.myStore?(o=(new S.a.Identify).setOnce("store_id",n.data.data.myStore.id),m=(new S.a.Identify).set("total_commission_earned",n.data.data.myStore.total_commission_earned),f=(new S.a.Identify).setOnce("cpf",n.data.data.myStore.director_cpf),_=(new S.a.Identify).setOnce("cnpj",n.data.data.myStore.company_cnpj),h=(new S.a.Identify).set("category",n.data.data.myStore.category),O=(new S.a.Identify).set("verification",n.data.data.verification.verification_status),y=(new S.a.Identify).set("mobile",n.data.data.verification.mobile),T=(new S.a.Identify).set("onboarded",!0),S.a.getInstance().identify(o),S.a.getInstance().identify(T),S.a.getInstance().identify(m),S.a.getInstance().identify(f),S.a.getInstance().identify(_),S.a.getInstance().identify(h),S.a.getInstance().identify(O),S.a.getInstance().identify(y)):(I=(new S.a.Identify).set("onboarded",!1),S.a.getInstance().identify(I)),localStorage.getItem("kiwi_device_token_"+n.data.data.user.external_id)&&(d.$axios.setHeader("kiwi-device-token",localStorage.getItem("kiwi_device_token_"+n.data.data.user.external_id)),d.$v2.setHeader("kiwi-device-token",localStorage.getItem("kiwi_device_token_"+n.data.data.user.external_id))),r("SET_TEAMS",[]),c.profile.myStore&&(r("ADD_TEAM",{id:c.profile.myStore.id,name:c.profile.myStore.company_name?c.profile.myStore.company_name:c.profile.user.email,fullyOnboarded:Object(l.a)(c.profile.myStore),director_name:c.profile.myStore.director_name,payment_only_products_allowed:c.profile.myStore.payment_only_products_allowed,bulk_import_students_allowed:c.profile.myStore.bulk_import_students_allowed,affiliates_enabled:c.profile.myStore.affiliates_enabled,force_block_referrals:c.profile.myStore.force_block_referrals,blacklist_chat_until:c.profile.myStore.blacklist_chat_until,bulk_import_students_limit:c.profile.myStore.bulk_import_students_limit,bulk_import_students_total:c.profile.myStore.bulk_import_students_total,allow_old_checkout:c.profile.myStore.allow_old_checkout,allow_new_checkout:c.profile.myStore.allow_new_checkout,allow_premium_members_area:c.profile.myStore.allow_premium_members_area,withdraw_allowed:c.profile.myStore.withdraw_allowed,referral_system_version:c.profile.myStore.referral_system_version,show_product_modal:c.profile.myStore.show_product_modal,products_custom_html_allowed:c.profile.myStore.products_custom_html_allowed,fraud_block:c.profile.myStore.fraud_block,compliance_block:c.profile.myStore.compliance_block,compliance_check_success:c.profile.myStore.compliance_check_success,links_blocked:c.profile.myStore.links_blocked,cnpj_compliance_status:c.profile.myStore.cnpj_compliance_status,verification:c.profile.verification,has_address_data:c.profile.myStore.has_address_data,has_international_ledgers:c.profile.myStore.has_international_ledgers,role:c.profile.myStore.role,gateway_type:c.profile.myStore.gateway_type,director_cpf:c.profile.myStore.director_cpf,company_cnpj:c.profile.myStore.company_cnpj,tickets_claimed:c.profile.myStore.tickets_claimed,permissions:"admin",country:c.profile.myStore.country?c.profile.myStore.country:"BR",is_mor:c.profile.myStore.is_mor,default_currency:c.profile.myStore.default_currency?c.profile.myStore.default_currency.toUpperCase():"BRL",qsa_analysis:c.profile.myStore.qsa_analysis,has_sales:c.profile.myStore.has_sales,allow_auto_currency_exchange:c.profile.myStore.allow_auto_currency_exchange,club_enabled:c.profile.myStore.club_enabled,physical_products_enabled:c.profile.myStore.physical_products_enabled}),console.log("MY STORE ADDED")),c.profile.team_member_accounts.length&&c.profile.team_member_accounts.map((function(e){r("ADD_TEAM",{id:e.Store.id,name:e.Store.company_name?e.Store.company_name:e.Store.email,fullyOnboarded:Object(l.a)(e.Store),director_name:e.Store.director_name,payment_only_products_allowed:e.Store.payment_only_products_allowed,bulk_import_students_allowed:e.Store.bulk_import_students_allowed,blacklist_chat_until:e.Store.blacklist_chat_until,affiliates_enabled:e.Store.affiliates_enabled,force_block_referrals:e.Store.force_block_referrals,bulk_import_students_limit:e.Store.bulk_import_students_limit,bulk_import_students_total:e.Store.bulk_import_students_total,allow_premium_members_area:e.Store.allow_premium_members_area,withdraw_allowed:e.Store.withdraw_allowed,referral_system_version:e.Store.referral_system_version,show_product_modal:e.Store.show_product_modal,allow_old_checkout:e.Store.allow_old_checkout,allow_new_checkout:e.Store.allow_new_checkout,products_custom_html_allowed:e.Store.products_custom_html_allowed,has_address_data:e.has_address_data,has_international_ledgers:e.has_international_ledgers,fraud_block:e.Store.fraud_block,compliance_block:e.Store.compliance_block,links_blocked:e.Store.links_blocked,compliance_check_success:e.Store.compliance_check_success,cnpj_compliance_status:e.Store.cnpj_compliance_status,permissions:e.permissions,verification:e.verification,director_cpf:e.Store.director_cpf,company_cnpj:e.Store.company_cnpj,gateway_type:e.Store.gateway_type,tickets_claimed:e.Store.tickets_claimed,role:e.Store.role,country:e.Store.country?e.Store.country:"BR",is_mor:e.Store.is_mor,default_currency:e.Store.default_currency?e.Store.default_currency.toUpperCase():"BRL",qsa_analysis:e.Store.qsa_analysis,has_sales:e.Store.has_sales,allow_auto_currency_exchange:e.Store.allow_auto_currency_exchange,club_enabled:e.Store.club_enabled,physical_products_enabled:e.Store.physical_products_enabled}),console.log("TEAM ADDED")})),localStorage.getItem("superAdminOptions")&&r("SET_SUPER_ADMIN_OPTIONS",JSON.parse(localStorage.getItem("superAdminOptions"))),r("SET_DEFAULT_CERTIFICATE"),localStorage.getItem("dashboardType")?(k=localStorage.getItem("dashboardType"),r("SET_DASHBOARD_TYPE",k),console.log("SET DASHBOARD TYPE",k)):!c.profile.isStudent||c.profile.isSeller||c.profile.isTeamMember?(r("SET_DASHBOARD_TYPE","selling"),console.log("SET DASHBOARD TYPE","selling")):(r("SET_DASHBOARD_TYPE","buying"),console.log("SET DASHBOARD TYPE","buying"));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.currentRoute&&"flutter_embed"!==c.currentRoute.name&&d.$customAuth.getIdToken().then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_TOKEN",t.data.access_token),e.next=3,m(t.data.access_token);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(parseInt(localStorage.getItem("courseCoverBannerCount"),10)||0)<=3&&(c.showCourseCover=!0));case 3:case"end":return n.stop()}}),n)})))()},fetchProfile:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state,o("SET_PROFILE",r.profile),n.next=4,t.$axios.get("/".concat(v.p,"/profile"));case 4:c=n.sent,o("SET_PROFILE",c.data.data);case 6:case"end":return n.stop()}}),n)})))()},fetchFees:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=e.commit)("SET_FEES",{}),t.next=4,n.$axios.get("/".concat(v.g));case 4:r=t.sent,o("SET_FEES",r.data);case 6:case"end":return t.stop()}}),t)})))()},fetchFacebookDomains:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.commit,t.prev=1,t.next=4,n.$axios.get("/pixels-domain");case 4:r=t.sent,(c=r.data.map((function(e){return E(E({},e),{},{domain:e.domain.substring(7)})}))).unshift({id:null,domain:"go.kiwify.com.br"}),o("SET_FACEBOOK_DOMAINS",c),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})))()},fetchAffiliateRequests:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.commit;case 1:case"end":return t.stop()}}),t)})))()}}},1119:function(e,t,n){"use strict";n.r(t),n.d(t,"strict",(function(){return l})),n.d(t,"state",(function(){return f})),n.d(t,"mutations",(function(){return _})),n.d(t,"actions",(function(){return h}));var o=n(4),r=n(5),c=(n(29),n(31),n(255),n(40),n(15)),l=!1,d=n(1120),m={products:{route:"products",response:"products"},competition:{route:"competition",response:"data"},category:{route:"stores/store-rewards",response:"data"},myAffiliations:{route:"affiliate/products",response:"products"},myAffiliates:{route:"affiliate/people",response:null},courses:{route:"courses",response:null},schools:{route:"schools",response:"schools"},coproductions:{route:"coproductions",response:"coproductions"},teamMembers:{route:"team-members",response:"data.team_members"},balance:{route:"financial/balance",response:null},balanceCPFPagarme:{route:"financial/balance?old_cpf_account=true",response:null},balanceKiwipay:{route:"financial/balance",response:null,v2:!0},balanceUSD:{route:"financial/balance",response:null,v2:!0},banks:{route:"banks",response:null},banksInternational:{route:"banks/international",response:null},transfers:{route:"financial/transfers",response:"transfers"},transfersKiwipay:{route:"financial/transfers",response:"transfers",v2:!0},transfersCPFPagarme:{route:"financial/transfers?old_cpf_account=true",response:"transfers"},transfersUSD:{route:"financial/transfers",response:"transfers",v2:!0},fees:{route:"fees",response:null},referralsConfig:{route:"users/referrals/config",response:null},referralsPayouts:{route:"users/referrals/payouts",response:"payouts"},sales:{route:"orders",response:"data",v2:!0},salesv2:{route:"orders",response:"data",v2:!0},subscriptions:{route:"subscriptions",response:""},integrations:{route:"integrations",response:""},upgradeInfo:{route:"stores/upgrade-info",response:""},legalEntities:{route:"financial/legal_entities",response:"data",v2:!0},clubs:{route:"clubs",response:"data"}},f=function(){return{store:{data:{products:[],competition:{},courses:[],schools:[],clubs:[],coproductions:[],category:{category:null,total_commission_earned:0},teamMembers:[],balance:{},balanceKiwipay:{},balanceCPFPagarme:{},balanceUSD:{},banks:{bank:{}},banksInternational:{bank:{}},transfers:[],transfersKiwipay:[],transfersCPFPagarme:[],fees:{},referralsConfig:{referrals_system_active:"space",referrals_system_description:"",tracking_custom_html:"",tracking_facebook_pixel:""},referralsPayouts:[],myAffiliations:[],myAffiliates:{},sales:{},salesv2:{},subscriptions:{rows:[]},integrations:[],upgradeInfo:{},legalEntities:[],transfersUSD:[]},loadingStates:Object(r.a)({products:!1,courses:!1,clubs:!1,coproductions:!1,teamMembers:!1,balance:!1,balanceUSD:!1,balanceCPFPagarme:!1,banks:!1,banksInternational:!1,transfers:!1,fees:!1,salesv2:!1,referralsConfig:!1,referralsPayouts:!1,myAffiliations:!1,myAffiliates:!1,sales:!1,subscriptions:!1,category:!1,integrations:!1,schools:!1,balanceKiwipay:!1,competition:!1,upgradeInfo:!1,transfersKiwipay:!1,transfersCPFPagarme:!1,transfersUSD:!1,legalEntities:!1,landingPages:!1},"balanceUSD",!1),animationState:{products:!1,courses:!1,clubs:!1,coproductions:!1,teamMembers:!1,balance:!1,balanceCPFPagarme:!1,balanceUSD:!1,banks:!1,banksInternational:!1,transfers:!1,referralsConfig:!1,referralsPayouts:!1,fees:!1,myAffiliations:!1,myAffiliates:!1,sales:!1,subscriptions:!1,category:!1,integrations:!1,schools:!1,salesv2:!1,balanceKiwipay:!1,competition:!1,upgradeInfo:!1,transfersKiwipay:!1,transfersCPFPagarme:!1,transfersUSD:!1,legalEntities:!1,landingPages:!1}}}},_={FETCH:function(e,t,n){var r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,f,_,h,S,v,O,E,y,T;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=t.type,f=t.query,_=t.loading,h=t.cache,S=void 0===h||h,v=t.reset,void 0===v||v,o.prev=1,O=m[l],_&&(e.store.loadingStates[l]=!0),E="".concat(O.route),f&&(E+="?".concat(f)),y=null,!O.v2){o.next=13;break}return o.next=10,r.$v2.get(E);case 10:y=o.sent,o.next=16;break;case 13:return o.next=15,r.$axios.get(E);case 15:y=o.sent;case 16:T=null,O.response&&(T=d(y.data,O.response)),Object(c.md5)(JSON.stringify(e.store.data[l]))!==Object(c.md5)(T?JSON.stringify(T):JSON.stringify(y.data))&&(e.store.animationState[l]=!0),O.response?(e.store.data[l]=T,r.app.store.commit("caching/AFTER_FETCH",{type:l,data:T}),S&&r.$localforage.setItem("".concat(l,"_").concat(r.app.store.state.activeTeam.id),T)):(e.store.data[l]=y.data,S&&r.$localforage.setItem("".concat(l,"_").concat(r.app.store.state.activeTeam.id),y.data),r.app.store.commit("caching/AFTER_FETCH",{type:l,data:y.data})),"function"==typeof n&&n(),o.next=26;break;case 23:o.prev=23,o.t0=o.catch(1),console.log(o.t0);case 26:return o.prev=26,_&&(e.store.loadingStates[l]=!1),o.finish(26);case 29:case"end":return o.stop()}}),o,null,[[1,23,26,29]])})))()},ANIMATE:function(e,t){var n=t.type,o=t.value;e.store.animationState[n]=o},LOAD_ALL_CACHE_FROM_LOCALSTORAGE:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(c in r=function(o){if(m.hasOwnProperty(o))n.$localforage.getItem("".concat(o,"_").concat(t)).then((function(data){data?e.store.data[o]=data:n.app.store.commit("caching/RESET_STATE",o)}))},m)r(c);case 2:case"end":return o.stop()}}),o)})))()},AFTER_FETCH:function(e,t){var n=t.type,data=t.data;"referralsConfig"===n?data.referrals_system_active&&this.app.store.commit("caching/FETCH",{type:"referralsPayouts"}):"products"===n?e.store.data.products.sort((function(a,b){return new Date(b.created_at)-new Date(a.created_at)})):"category"===n&&data.total_commission_earned>0&&(this.app.store.commit("PUSHER_INIT",{}),$crisp.push(["set","session:data",[[["total_commission_earned",data.total_commission_earned]]]]))},RESET_STATE:function(e,t){var data=null;data="banks"===t?{bank:{}}:"fees"===t||"balance"===t||"sales"===t||"salesv2"===t||"subscriptions"===t?{}:"referralsConfig"===t?{referrals_system_active:"space",referrals_system_description:"",tracking_custom_html:"",tracking_facebook_pixel:""}:"category"===t?{category:null,total_commission_earned:0}:[],e.store.data[t]=data},MAP_DATA:function(e,data){("sales"===data.type||"salesv2"===data.type)&&e.store.data[data.type].rows.map((function(e){data.mapper(e)}))}},h={}},1121:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return k})),n.d(t,"mutations",(function(){return A})),n.d(t,"actions",(function(){return D}));n(93),n(17),n(92),n(103),n(26),n(20),n(27);var o=n(4),r=n(5),c=(n(29),n(40),n(13),n(60),n(35),n(207),n(61),n(63),n(38),n(170),n(31),n(21),n(114),n(41)),l=n(10),d=n(58),m=n(68),f=n(15),_=n(118);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E=n(166);function y(e){return E(e).filter((function(e){return"gap"!==e.type})).map((function(e){return delete e.id,delete e.hoverState,e.columns.map((function(e){delete e.id,e.components=e.components.filter((function(e){return"gap"!==e.type})).map((function(component){return delete component.id,delete component.hoverState,component}))})),e}))}function T(e){var t=null,path=null;return Object(f.containsAWS)(e)?(t="https://aws-assets.kiwify.com.br",path=e.slice(49)):(t="https://assets.kiwify.com.br",path=e.slice(51)),t+path}function I(e){e.preventDefault(),e.returnValue=""}var k=function(){var e;return{initialHash:null,unsavedChanges:!1,drag:!1,confirmDeleteComponent:!1,checkout:{desktop:{data:{extra_components:[],configuration:{background:{color:"#fff",image:"",fixed:!1,expand:!1,repeat:!1},checkout:{logo:null},font_type:"Open Sans",font_color:"#000"},content:[(e={id:Object(c.v4)(),type:"row",hoverState:!1,rowColumnLayout:1},Object(r.a)(e,"type","checkout"),Object(r.a)(e,"rowColumnLayout",2),Object(r.a)(e,"columns",[{id:Object(c.v4)(),type:"column",width:"70",components:[{id:Object(c.v4)(),type:"gap",hoverState:!1},{id:Object(c.v4)(),type:"checkout",hoverState:!1}]},{id:Object(c.v4)(),type:"column",components:[{id:Object(c.v4)(),type:"gap",hoverState:!1}],width:"30"}]),e)]}},mobile:{data:{extra_components:[],configuration:{background:{color:"#fff",image:"",type:"expand"},checkout:{logo:null},font_type:"Open Sans",font_color:"#000"},content:[]}}},checkoutId:null,imgUpload:{uppyInstance:void 0,error:!1,images:[]},selectedComponent:{component:{}},selectedLayout:"desktop",loadingStates:{save:{isLoading:!1,text:"Salvar"}},images:{},templateId:"ee92473720604cbc8b21aae32ffe1ad3",notification:{show:!1,text:"",color:"red"}}},A={IMG_UPLOAD_INIT_UPPY:function(e,t){var n=this;e.imgUpload.uppyInstance=new d.b({id:"imgUploadBuilder",locale:_.default,metaFields:[],hidePauseResumeButton:!0,restrictions:{maxNumberOfFiles:100,minNumberOfFiles:1,allowedFileTypes:["image/*",".gif",".jpeg",".jpeg",".jpg",".png"]}}).use(m.a,{params:{auth:{key:"d01071d4a07644a29745671fc07b18e2",expires:t.expires},template_id:e.templateId,steps:{export:{path:t.store+"/${file.url_basename}_${file.id}.${file.ext}"}}},waitForEncoding:!0,signature:t.signature}),e.imgUpload.uppyInstance.on("complete",(function(e){n.app.store.commit("checkoutBuilder/UPDATE_IMAGES_IN_STRUCTURE",e)})),e.imgUpload.uppyInstance.on("upload-error",(function(e,t,o){n.app.store.commit("checkoutBuilder/SET_NOTIFICATION",{text:n.app.i18n.t("defaults.notifications.genericError"),color:"red"})}))},IMG_UPLOAD_ADD_FILE:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function n(){var b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t).then((function(e){return e.blob()}));case 2:b=n.sent,e.imgUpload.uppyInstance.addFile({name:"img_builder_".concat(Object(c.v4)(),".png"),type:"image/png",meta:{blob:t},data:b});case 4:case"end":return n.stop()}}),n)})))()},SET_EXTRA_COMPONENT:function(e,t){var n=t.componentKey,data=t.data;-1!==n?l.default.set(e.checkout[e.selectedLayout].data.extra_components,n,data):e.checkout[e.selectedLayout].data.extra_components.push(data),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SYNC_EXTRA_COMPONENT_TO_MOBILE:function(e,t){var n=t.componentKey,data=t.data;data?-1!==n?l.default.set(e.checkout.mobile.data.extra_components,n,data):e.checkout.mobile.data.extra_components.push(data):e.checkout.mobile.data.extra_components.splice(n,1),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},DELETE_EXTRA_COMPONENT:function(e,t){var n=t.componentKey;t.data;e.checkout[e.selectedLayout].data.extra_components.splice(n,1),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},UPDATE_IMAGES_IN_STRUCTURE:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0,r=v(t.successful),o.prev=2,l=regeneratorRuntime.mark((function o(){var r,meta,l,d,m,img,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=c.value,meta=r.meta,l=r.name,d=v(e.images[meta.blob]),o.prev=2,d.s();case 4:if((m=d.n()).done){o.next=13;break}return img=m.value,console.log(n.app),o.next=9,n.$axios.post("/uploads/moderate-image",{fileURL:Object(f.addCdn)(t.transloadit[0].uploads.filter((function(e){return e.name===l}))[0].ssl_url)});case 9:o.sent,"background"===img.type?e.checkout[img.device].data.configuration.background.image=Object(f.addCdn)(T(t.transloadit[0].uploads.filter((function(e){return e.name===l}))[0].ssl_url)):"exit-popup"===img.type?-1!==(_=e.checkout[img.device].data.extra_components.findIndex((function(e){return"exit-popup"===e.type})))&&(e.checkout[img.device].data.extra_components[_].props.img_url=Object(f.addCdn)(T(t.transloadit[0].uploads.filter((function(e){return e.name===l}))[0].ssl_url))):e.checkout[img.device].data.content[img.rowKey].columns[img.columnKey].components[img.componentKey].props[img.propKey]=Object(f.addCdn)(T(t.transloadit[0].uploads.filter((function(e){return e.name===l}))[0].ssl_url));case 11:o.next=4;break;case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),d.e(o.t0);case 18:return o.prev=18,d.f(),o.finish(18);case 21:case"end":return o.stop()}}),o,null,[[2,15,18,21]])})),r.s();case 5:if((c=r.n()).done){o.next=9;break}return o.delegateYield(l(),"t0",7);case 7:o.next=5;break;case 9:o.next=14;break;case 11:o.prev=11,o.t1=o.catch(2),r.e(o.t1);case 14:return o.prev=14,r.f(),o.finish(14);case 17:e.loadingStates.save.text=n.app.i18n.t("checkoutBuilder.topBar.saveButton.saving"),n.app.store.dispatch("checkoutBuilder/saveCheckout"),o.next=25;break;case 21:o.prev=21,o.t2=o.catch(0),n.app.store.commit("checkoutBuilder/SET_NOTIFICATION",{text:n.app.i18n.t("defaults.notifications.moderation"),color:"red"}),n.app.store.commit("checkoutBuilder/LOADING_STATE_SAVE_CHECKOUT",{value:!1});case 25:case"end":return o.stop()}}),o,null,[[0,21],[2,11,14,17]])})))()},START_IMG_UPLOAD:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.images=t,o.t0=regeneratorRuntime.keys(t);case 2:if((o.t1=o.t0()).done){o.next=10;break}return r=o.t1.value,o.next=6,fetch(r).then((function(e){return e.blob()}));case 6:l=o.sent,e.imgUpload.uppyInstance.addFile({name:"img_builder_".concat(Object(c.v4)(),".png"),type:"image/png",meta:{blob:r},data:l}),o.next=2;break;case 10:e.loadingStates.save.isLoading=!0,e.loadingStates.save.text="".concat(n.app.i18n.t("checkoutBuilder.topBar.saveButton.uploading",{x:Object.keys(t).length})," ").concat(1===Object.keys(t).length?n.app.i18n.t("checkoutBuilder.topBar.saveButton.image"):n.app.i18n.t("checkoutBuilder.topBar.saveButton.images")),e.imgUpload.uppyInstance.upload();case 13:case"end":return o.stop()}}),o)})))()},PUSH_TO_STRUCTURE:function(e,t){var data=t.data;"desktop"===e.selectedLayout?e.checkout.desktop.data.content.push(data):e.checkout.mobile.data.content.push(data),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},CONFIRM_DELETE_COMPONENT:function(e,data){e.confirmDeleteComponent=data},SET_EXIT_POPUP:function(e,data){data?(e.selectedLayout,l.default.set(e.checkout.desktop.data.extra_components,0,data)):"desktop"===e.selectedLayout?e.checkout.desktop.data.extra_components=[]:e.checkout.mobile.data.extra_components=[],this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SET_DRAG:function(e,t){e.drag=t},SET_CHECKOUT_DATA:function(e,data){e.checkout=data},SET_INITIAL_STATE:function(e,data){this.app.store.commit("checkoutBuilder/LOADING_STATE_SAVE_CHECKOUT",{value:!1}),delete data.product,e.initialHash=Object(f.md5)(JSON.stringify(data))},COMPARE_HASH:function(e){var t={name:e.checkout.name,desktop:{id:e.checkout.desktop.id,data:S(S({},e.checkout.desktop.data),{},{content:y(e.checkout.desktop.data.content)})},mobile:{id:e.checkout.mobile.id,data:S(S({},e.checkout.mobile.data),{},{content:y(e.checkout.mobile.data.content)})}},n=Object(f.md5)(JSON.stringify(t));e.initialHash&&(e.initialHash===n?(e.unsavedChanges=!1,window.removeEventListener("beforeunload",I)):(e.unsavedChanges=!0,window.addEventListener("beforeunload",I)))},SET_CONFIG:function(e,t){"desktop"===e.selectedLayout?e.checkout.desktop.data.configuration=t:e.checkout.mobile.data.configuration=t,this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SELECT_LAYOUT:function(e,t){e.selectedComponent={component:{}},e.selectedLayout=t},COPY_FROM_DESKTOP:function(e,t){e.checkout.mobile.data=this.$lodashCloneDeep(e.checkout.desktop.data),e.checkout.mobile.data.content.map((function(e){e.columns.map((function(e){e.components.map((function(e){"header"===e.type&&(e.props.font_size_title=e.props.font_size_title-4,e.props.font_size_subtitle=e.props.font_size_subtitle-2)}))}))})),e.checkout.mobile.data.extra_components=e.checkout.mobile.data.extra_components.filter((function(e){return"exit-popup"!==e.type})),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SELECT_COMPONENT:function(e,t){var component=t.component,n=t.context;e.selectedComponent={component:component,context:n}},SET_COMPONENT:function(e,t){var n=t.rowKey,o=t.columnKey,r=t.componentKey,data=t.data,c=t.select;(void 0===c||c)&&this.app.store.commit("checkoutBuilder/SELECT_COMPONENT",{component:data,context:{rowKey:n,columnKey:o,componentKey:r}}),"desktop"===e.selectedLayout?l.default.set(e.checkout.desktop.data.content[n].columns[o].components,r,data):l.default.set(e.checkout.mobile.data.content[n].columns[o].components,r,data),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SET_HOVER_STATE:function(e,t){var n=t.type,o=t.rowKey,r=t.columnKey,c=t.componentKey,data=t.data;"desktop"===e.selectedLayout?"row"===n?e.checkout.desktop.data.content[o].hoverState=data.hoverState:e.checkout.desktop.data.content[o].columns[r].components[c].hoverState=data.hoverState:"row"===n?e.checkout.mobile.data.content[o].hoverState=data.hoverState:e.checkout.mobile.data.content[o].columns[r].components[c].hoverState=data.hoverState},DELETE_ROW:function(e,t){var n=t.rowKey;"desktop"===e.selectedLayout?e.checkout.desktop.data.content.splice(n,1):e.checkout.mobile.data.content.splice(n,1),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},DELETE_COMPONENT:function(e,t){var n=t.rowKey,o=t.columnKey,r=t.componentKey;t.data;"desktop"===e.selectedLayout?e.checkout.desktop.data.content[n].columns[o].components.splice(r,1):e.checkout.mobile.data.content[n].columns[o].components.splice(r,1),this.app.store.commit("checkoutBuilder/COMPARE_HASH")},SET_STRUCTURE:function(e,t){var data=t.data;"desktop"===e.selectedLayout?e.checkout.desktop.data.content=data:e.checkout.mobile.data.content=data,this.app.store.commit("checkoutBuilder/COMPARE_HASH")},LOADING_STATE_SAVE_CHECKOUT:function(e,t){var n=t.value,label=t.label;e.loadingStates.save.isLoading=n,e.loadingStates.save.text=label||this.app.i18n.t("checkoutBuilder.topBar.saveButton.save")},SET_CHECKOUT_ID:function(e,t){e.checkoutId=t},SET_NOTIFICATION:function(e,t){var text=t.text,n=t.color,o=void 0===n?"red":n;e.notification={show:!0,text:text,color:o}},CLEAR_NOTIFICATION:function(e){e.notification={show:!1,text:"",color:"red"}}},D={saveCheckout:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state,n.prev=1,o("LOADING_STATE_SAVE_CHECKOUT",{value:!0,label:t.app.i18n.t("checkoutBuilder.topBar.saveButton.saving")}),c=y(r.checkout.desktop.data.content),l=y(r.checkout.mobile.data.content),data={name:r.checkout.name,desktop:{id:r.checkout.desktop.id,content:JSON.stringify(S(S({},r.checkout.desktop.data),{},{content:c}))},mobile:{id:r.checkout.mobile.id,content:JSON.stringify(S(S({},r.checkout.mobile.data),{},{content:l}))}},n.next=8,t.$axios.put("/checkouts/".concat(r.checkoutId),data);case 8:n.sent,o("SET_INITIAL_STATE",{name:r.checkout.name,desktop:{id:r.checkout.desktop.id,data:S(S({},r.checkout.desktop.data),{},{content:c})},mobile:{id:r.checkout.mobile.id,data:S(S({},r.checkout.mobile.data),{},{content:l})}}),o("COMPARE_HASH"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),n.t0.response.data.error&&"string"==typeof n.t0.response.data.error?n.t0.response.data.error.startsWith("Text moderation failed")&&t.app.store.commit("checkoutBuilder/SET_NOTIFICATION",{text:t.app.i18n.t("defaults.notifications.moderation"),color:"red"}):t.app.store.commit("checkoutBuilder/SET_NOTIFICATION",{text:t.app.i18n.t("defaults.notifications.genericError"),color:"red"});case 16:return n.prev=16,o("LOADING_STATE_SAVE_CHECKOUT",{value:!1}),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()}}},1139:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return h})),n.d(t,"getters",(function(){return S})),n.d(t,"mutations",(function(){return v})),n.d(t,"actions",(function(){return O}));n(21),n(17),n(13),n(26),n(20),n(27);var o=n(4),r=n(5),c=(n(29),n(436),n(437),n(31),n(40),n(38),n(52));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m="MISCONFIGURED";function f(e){var t=e.state,n=e.sectionIndex,o=e.modules.reduce((function(e,o,r){e[o.id]={sectionIndex:n,moduleIndex:r};var c=o.lessons.reduce((function(e,t,o){return e[t.id]={sectionIndex:n,moduleIndex:r,lessonIndex:o},e}),{});return t.lessonIdToIndexes=d(d({},t.lessonIdToIndexes),c),e}),{});t.moduleIdToIndexes=d(d({},t.moduleIdToIndexes),o)}function _(e){e.content.sections?e.sectionIdToIndexes=e.content.sections.reduce((function(t,section,n){return t[section.id]=n,f({state:e,sectionIndex:n,modules:section.modules}),t}),{}):f({state:e,modules:e.content.modules})}var h=function(){var e;return e={courseId:"",subcourseId:"",club:null,config:null,content:{version:"v2",modules:[]},sectionIdToIndexes:{},moduleIdToIndexes:{},lessonIdToIndexes:{},classes:[],plans:[]},Object(r.a)(e,"content",{}),Object(r.a)(e,"editor",{contentType:"view",isEditing:!1,module:null}),Object(r.a)(e,"selectedCourse",{}),Object(r.a)(e,"selectedRows",[]),Object(r.a)(e,"loading",{mount:!1,content:!1,club:!1,classes:!1,updateConfig:!1,deleteCourse:!1}),Object(r.a)(e,"domainMisconfigured",{clubId:null,isMisconfigured:!1}),e},S={courseId:function(e){return e.courseId},subcourseId:function(e){return e.subcourseId},club:function(e){return e.club},courses:function(e,t){var n;return null===(n=t.club)||void 0===n?void 0:n.courses},config:function(e){return e.config||{ebook_drm_metadata:{}}},isConfigLoaded:function(e,t){return Boolean(t.config.primary_color)},content:function(e){return e.content},version:function(e){return e.content.version},sections:function(e){return e.content.sections},modules:function(e,t){return function(n){if(n){var o=e.sectionIdToIndexes[n];return t.content.sections[o].modules}return t.content.modules}},allModules:function(e,t){return t.sectionEnabled?t.sections.flatMap((function(section){return section.modules})):t.content.modules},module:function(e,t){return function(n){var o=e.moduleIdToIndexes[n];return o?t.sectionEnabled?t.content.sections[o.sectionIndex].modules[o.moduleIndex]:t.content.modules[o.moduleIndex]:null}},lesson:function(e,t){return function(n){var o=e.lessonIdToIndexes[n];return o?t.sectionEnabled?t.content.sections[o.sectionIndex].modules[o.moduleIndex].lessons[o.lessonIndex]:t.content.modules[o.moduleIndex].lessons[o.lessonIndex]:null}},moduleIndexes:function(e){return function(t){return e.moduleIdToIndexes[t]}},classes:function(e){return e.classes},plans:function(e){return e.plans},isLoadingClub:function(e){return e.loading.club},isLoadingContent:function(e){return e.loading.content},isLoadingMount:function(e){return e.loading.mount},isLoadingClasses:function(e){return e.loading.classes},isUpdatingConfig:function(e){return e.loading.updateConfig},isDeletingCourse:function(e){return e.loading.deleteCourse},premiumEnabled:function(e,t){return t.config.premium_members_area_enabled},sectionEnabled:function(e,t){return t.config.premium_members_area_enabled&&"section"===t.config.premium_members_area_slider_type},selectedRows:function(e){return e.selectedRows},selectedContentType:function(e){return e.editor.contentType},selectedModule:function(e){return e.editor.module},isEditingContent:function(e){return e.editor.isEditing},isClub:function(e){return Boolean(e.club)},isLiteClub:function(e,t){return t.isClub&&"lite"===t.club.kind}},v={SET_COURSE_ID:function(e,t){e.courseId=t},SET_SUBCOURSE_ID:function(e,t){e.subcourseId=t},SET_CLUB:function(e,t){e.club=t},SET_CONFIG:function(e,t){e.config=t},SET_CLASSES:function(e,t){e.classes=t},SET_CONTENT:function(e,t){e.content=t,e.moduleIdToIndexes={},e.lessonIdToIndexes={},_(e)},SET_EDITOR_STATE:function(e,t){var n=t.contentType,o=t.isEditing,r=t.module;e.editor={contentType:n,isEditing:o,module:r}},RESET_EDITOR_STATE:function(e){e.editor={contentType:"view",isEditing:!1,module:null}},UPDATE_SECTIONS:function(e,t){e.content.sections=t,_(e)},UPDATE_MODULES:function(e,t){var n=t.sectionId,o=t.modules;if(n){var r=e.sectionIdToIndexes[n];e.content.sections[r].modules=o}else e.content.modules=o;_(e)},UPDATE_LESSONS:function(e,t){var n=t.moduleId,o=t.lessons,r=e.moduleIdToIndexes[n];void 0!==r.sectionIndex?e.content.sections[r.sectionIndex].modules[r.moduleIndex].lessons=o:e.content.modules[r.moduleIndex].lessons=o,_(e)},UPDATE_LESSON_TITLE:function(e,t){var n=t.id,title=t.title,o=e.lessonIdToIndexes[n];void 0!==o.sectionIndex?e.content.sections[o.sectionIndex].modules[o.moduleIndex].lessons[o.lessonIndex].title=title:e.content.modules[o.moduleIndex].lessons[o.lessonIndex].title=title},SET_PLANS:function(e,t){e.plans=t},SELECT_COURSE:function(e,t){e.selectedCourse=t},SET_LOADING:function(e,t){e.loading=d(d({},e.loading),t)},SELECT_ROWS:function(e,t){e.selectedRows=t},SET_DOMAIN_MISCONFIGURED:function(e,t){e.domainMisconfigured=t}},O={fetchConfig:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state.courseId,n.prev=1,o("SET_LOADING",{mount:!0}),n.next=5,t.$axios.get("".concat(c.d,"/").concat(r,"/config"));case 5:l=n.sent,(data=l.data).ebook_drm_metadata.copy_restricted||(data=d(d({},data),{},{ebook_drm_metadata:{copy_restricted:!1,print_restricted:!1,password_enabled:!1},school_id:data.school_id?data.school_id:null,premium_members_area_slider_type:data.premium_members_area_enabled?data.premium_members_area_slider_type:"section"})),o("SET_CONFIG",data);case 9:return n.prev=9,o("SET_LOADING",{mount:!1}),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,,9,12]])})))()},updateConfig:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,data;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,l=e.state.courseId,data=t.data,o.prev=2,r("SET_LOADING",{updateConfig:!0}),o.next=6,n.$axios.put("".concat(c.d,"/").concat(l,"/config"),data);case 6:return o.prev=6,r("SET_LOADING",{updateConfig:!1}),o.finish(6);case 9:case"end":return o.stop()}}),o,null,[[2,,6,9]])})))()},fetchClub:function(e){var t=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,c=e.state.courseId,l=t.length>1&&void 0!==t[1]?t[1]:{loading:!0},o.prev=2,l.loading&&r("SET_LOADING",{club:!0}),o.next=6,n.$axios.get("/clubs/".concat(c));case 6:d=o.sent,r("SET_CLUB",d.data.data);case 8:return o.prev=8,r("SET_LOADING",{club:!1}),o.finish(8);case 11:case"end":return o.stop()}}),o,null,[[2,,8,11]])})))()},fetchContent:function(e){var t=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,d,m,f,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,l=e.state,d=l.courseId,m=l.subcourseId,f=t.length>1&&void 0!==t[1]?t[1]:{loading:!0},o.prev=2,f.loading&&r("SET_LOADING",{content:!0}),o.next=6,n.$axios.get("".concat(c.d,"/").concat(m||d));case 6:(_=o.sent).data.sections&&_.data.sections.map((function(e){e.expand=!e.expand||e.expand})),r("SET_CONTENT",_.data);case 9:return o.prev=9,r("SET_LOADING",{content:!1}),o.finish(9);case 12:case"end":return o.stop()}}),o,null,[[2,,9,12]])})))()},putLessonOrder:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,m,f,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.dispatch,r=e.getters,l=e.state,d=l.courseId,m=l.subcourseId,f=r.sectionEnabled?r.content.sections.flatMap((function(section){return section.modules})):r.content.modules,data={lessons:f.flatMap((function(e){return e.lessons.map((function(t,n){return{id:t.id,order:n+1,module_id:e.id}}))}))},n.next=5,t.$axios.put("".concat(c.d,"/").concat(m||d,"/positions/lessons"),data);case 5:o("fetchContent",{loading:!1});case 6:case"end":return n.stop()}}),n)})))()},fetchClasses:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state.courseId,n.prev=1,o("SET_LOADING",{classes:!0}),n.next=5,t.$axios.get("".concat(c.d,"/").concat(r,"/classes"));case 5:l=n.sent,o("SET_CLASSES",l.data.classes);case 7:return n.prev=7,o("SET_LOADING",{classes:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[1,,7,10]])})))()},fetchPlans:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state.courseId,n.next=3,t.$axios.get("".concat(c.d,"/").concat(r,"/plans"));case 3:l=n.sent,o("SET_PLANS",l.data.plans);case 5:case"end":return n.stop()}}),n)})))()},updateLessonTitle:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,d,m,f,title;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,l=e.state,d=l.courseId,m=l.subcourseId,f=t.id,title=t.title,o.next=4,n.$axios.put("".concat(c.d,"/").concat(m||d,"/lessons/").concat(f),{title:title});case 4:r("UPDATE_LESSON_TITLE",{id:f,title:title});case 5:case"end":return o.stop()}}),o)})))()},putSectionsOrder:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.dispatch,r=e.getters,l=e.state,d=l.courseId,m=l.subcourseId,n.next=3,t.$axios.put("".concat(c.d,"/").concat(m||d,"/section/positions"),{sections:r.sections.map((function(section,e){return{id:section.id,order:e+1}}))});case 3:o("fetchContent",{loading:!1});case 4:case"end":return n.stop()}}),n)})))()},putModulesOrder:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,m,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.dispatch,r=e.getters,l=e.state,d=l.courseId,m=l.subcourseId,data=r.sectionEnabled?{modules:r.content.sections.flatMap((function(section){return section.modules.map((function(e,t){return{id:e.id,order:t+1,section_id:section.id}}))}))}:{modules:r.content.modules.map((function(e,t){return{id:e.id,order:t+1}}))},n.next=4,t.$axios.put("".concat(c.d,"/").concat(m||d,"/positions/modules"),data);case 4:o("fetchContent",{loading:!1});case 5:case"end":return n.stop()}}),n)})))()},addCourse:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.dispatch,c=e.state.courseId,l=t.name,o.next=4,n.$axios.post("/clubs/".concat(c,"/courses"),{name:l});case 4:r("fetchClub",{loading:!1});case 5:case"end":return o.stop()}}),o)})))()},updateSubcourseConfig:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,data;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.dispatch,l=t.subcourseId,data=t.data,o.next=4,n.$axios.put("".concat(c.d,"/").concat(l,"/config"),data);case 4:r("fetchClub",{loading:!1}),r("fetchContent",{loading:!1});case 6:case"end":return o.stop()}}),o)})))()},deleteCourse:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,c=e.dispatch,l=e.state.courseId,o.prev=1,r("SET_LOADING",{deleteCourse:!0}),o.next=5,n.$axios.delete("/clubs/".concat(l,"/courses/").concat(t));case 5:c("fetchClub",{loading:!1}),c("fetchContent",{loading:!1}),c("fetchClasses",{loading:!1});case 8:return o.prev=8,r("SET_LOADING",{deleteCourse:!1}),o.finish(8);case 11:case"end":return o.stop()}}),o,null,[[1,,8,11]])})))()},recheckClubDomain:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,d,code;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.commit,(r=e.state.club)&&"lite"!==r.kind){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,t.$axios.post("".concat(c.b,"/recheck"),{club_id:r.id});case 6:n.next=15;break;case 8:if(n.prev=8,n.t0=n.catch(3),(code=null===(l=n.t0.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)!==m){n.next=14;break}return o("SET_DOMAIN_MISCONFIGURED",{clubId:r.id,isMisconfigured:!0}),n.abrupt("return");case 14:code||console.error("Failed to recheck club domain",n.t0.stack);case 15:case"end":return n.stop()}}),n,null,[[3,8]])})))()}}},1141:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return S})),n.d(t,"mutations",(function(){return v})),n.d(t,"actions",(function(){return O}));var o=n(4),r=n(5),c=(n(29),n(40),n(13),n(38),n(170),n(207),n(21),n(17),n(26),n(20),n(27),n(41)),l=n(15);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=n(166);function _(e){e.preventDefault(),e.returnValue=""}function h(e,t){return f(e).filter((function(e){return"gap"!==e.type})).map((function(e){return t&&delete e.id,delete e.dragId,delete e.hoverState,e.courses=e.courses.filter((function(e){return"course-gap"!==e.type})).map((function(n){return t&&delete n.id,delete e.dragId,delete n.hoverState,n})),e}))}var S=function(){return{initialHash:null,schoolId:null,unsavedChanges:!1,errorValidationTriggered:!1,data:{config:{profile_image:"",cover_image:"",color_scheme:"light",name:"",primary_color:"#000"},content:[]},loadingStates:{save:{isLoading:!1,text:"Salvar"}},confirmDeleteComponent:!1,selectedCourse:{course:{}},coursesIndex:[],profilePhotoRaw:null,coverImageRaw:null}},v={UPLOAD_PROFILE_PHOTO:function(e,t){e.profilePhotoRaw=t},UPLOAD_COVER_IMAGE:function(e,t){e.coverImageRaw=t},SET_ERROR_VALIDATION:function(e,t){e.errorValidationTriggered=t},SET_INITIAL_STATE:function(e,data){var t={config:{profile_image:data.profile_image,cover_image:data.cover_image,color_scheme:data.color_scheme,name:data.name,primary_color:data.primary_color},content:h(data.sections,!0)},n=Object(l.md5)(JSON.stringify(t));e.initialHash=n},SET_CONFIG:function(e,t){e.data.config=t,this.app.store.commit("schoolEditor/COMPARE_HASH")},UPDATE_COURSE_INDEX:function(e,t){var n=t.action,data=t.data;if("push"===n)e.coursesIndex.push(data.course.id);else if("remove"===n){var i=e.coursesIndex.findIndex((function(e){return e==data.course.id}));e.coursesIndex.splice(i,1)}},SET_STRUCTURE:function(e,t){var data=t.data;e.data.content=data,this.app.store.commit("schoolEditor/COMPARE_HASH")},UPDATE_ROW:function(e,t){var data=t.data,n=t.index,o=t.field;e.data.content[n][o]=data[o],this.app.store.commit("schoolEditor/COMPARE_HASH")},SET_HOVER_STATE:function(e,t){var n=t.type,o=t.rowKey,r=t.courseKey,data=t.data;"row"===n?e.data.content[o].hoverState=data.hoverState:e.data.content[o].courses[r].hoverState=data.hoverState},DELETE_ROW:function(e,t){var n=this,o=t.rowKey,r=t.rowData;e.data.content.splice(o,1),r.items&&r.items.map((function(e){n.app.store.commit("schoolEditor/UPDATE_COURSE_INDEX",{action:"remove",data:e})})),this.app.store.commit("schoolEditor/COMPARE_HASH")},SELECT_COURSE:function(e,t){var n=t.course,o=t.context;e.selectedCourse={course:n,context:o},this.app.store.commit("schoolEditor/COMPARE_HASH")},SET_COURSE:function(e,t){var n=t.rowKey,o=t.courseKey,data=t.data;e.data.content[n].courses[o]=data,this.app.store.commit("schoolEditor/COMPARE_HASH")},DELETE_COURSE:function(e,t){var n=t.rowKey,o=t.courseKey,data=t.data;e.data.content[n].courses.splice(o,1),this.app.store.commit("schoolEditor/UPDATE_COURSE_INDEX",{action:"remove",data:data}),e.confirmDeleteComponent=!1,this.app.store.commit("schoolEditor/COMPARE_HASH")},CONFIRM_DELETE_COMPONENT:function(e,data){e.confirmDeleteComponent=data,this.app.store.commit("schoolEditor/COMPARE_HASH")},ADD_COURSE:function(e,t){var n=t.rowKey,data=t.data,o={dragId:Object(c.v4)(),course:data.course,product:m({},data),producer:data.producer,product_links:data.product_links,type:"course",hoverState:!1,popup_type:"checkout",redirect_url:null,link_id:null};o.product_links&&!o.link_id&&o.product_links.length&&(o.link_id=o.product_links[0].id),e.data.content[n].courses.push(o),this.app.store.commit("schoolEditor/UPDATE_COURSE_INDEX",{action:"push",data:o}),this.app.store.commit("schoolEditor/COMPARE_HASH")},COMPARE_HASH:function(e){var t=m(m({},e.data),{},{content:h(e.data.content,!0)}),n=Object(l.md5)(JSON.stringify(t));e.initialHash&&(e.initialHash===n?(e.unsavedChanges=!1,window.removeEventListener("beforeunload",_)):(e.unsavedChanges=!0,window.addEventListener("beforeunload",_)))},LOADING_STATE_SAVE_SCHOOL:function(e,t){var n=t.value,label=t.label;e.loadingStates.save.isLoading=n,e.loadingStates.save.text=label||"Salvar"},SET_SCHOOL_ID:function(e,t){e.schoolId=t},IMAGE_UPLOADING:function(e,t){t?this.app.store.commit("schoolEditor/LOADING_STATE_SAVE_SCHOOL",{value:!0,label:"Fazendo upload"}):this.app.store.commit("schoolEditor/LOADING_STATE_SAVE_SCHOOL",{value:!1})},SET_SCHOOL_DATA:function(e,t){e.data.config={profile_image:t.profile_image,cover_image:t.cover_image?t.cover_image:"",color_scheme:t.color_scheme,name:t.name,primary_color:t.primary_color},e.data.content=t.sections,e.data.content.map((function(t){t.courses.filter((function(e){return"course-gap"!==e.type})).map((function(t){e.coursesIndex.push(t.course.id)}))}))}},O={saveSchool:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.commit,r=e.state,n.prev=1,o("LOADING_STATE_SAVE_SCHOOL",{value:!0,label:"Salvando"}),c=h(r.data.content),data=m(m({},r.data.config),{},{sections:c.map((function(e,t){return{id:e.id?e.id:void 0,position:t,name:e.name,items:e.courses.map((function(e,t){return{id:e.id?e.id:void 0,position:t,course_id:e.course.id,popup_type:e.popup_type,link_id:e.link_id,redirect_url:e.redirect_url}}))}}))}),n.next=7,t.$axios.put("/schools/".concat(r.schoolId),data);case 7:n.sent,o("SET_INITIAL_STATE",m(m({},r.data.config),{},{sections:r.data.content})),o("COMPARE_HASH"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),alert(n.t0);case 15:return n.prev=15,o("LOADING_STATE_SAVE_SCHOOL",{value:!1}),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,12,15,18]])})))()}}},1142:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return f})),n.d(t,"mutations",(function(){return _}));var o=n(5),r=(n(40),n(38),n(13),n(21),n(17),n(26),n(20),n(27),n(58)),c=n(68),l=n(118);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=function(){return{imgUpload:{uppyInstance:void 0,error:!1,images:[],processedImages:{}},icons:{list:[],loading:!1}}},_={HEADLESS_IMG_UPLOAD_INIT:function(e){var t=this,n=this.app.store.state.signature;!e.imgUpload.uppyInstance&&n&&(e.imgUpload.uppyInstance=new r.b({id:"headlessImgUpload",locale:l.default,metaFields:[],hidePauseResumeButton:!0,restrictions:{maxNumberOfFiles:100,minNumberOfFiles:1,allowedFileTypes:["image/*",".gif",".jpeg",".jpeg",".jpg",".png"]}}).use(c.a,{params:{auth:{key:"d01071d4a07644a29745671fc07b18e2",expires:n.expires},template_id:"ee92473720604cbc8b21aae32ffe1ad3",steps:{export:{path:n.store+"/${file.url_basename}_${file.id}.${file.ext}"}}},waitForEncoding:!0,signature:n.signature}),e.imgUpload.uppyInstance.on("complete",(function(e){t.app.store.commit("utilities/PROCESS_IMAGES",e)})))},PROCESS_IMAGES:function(e,t){t.successful.map((function(n,o){var meta=n.meta,r=n.name;e.imgUpload.processedImages.push({id:meta.blob,img:t.transloadit[0].uploads.filter((function(e){return e.name===r}))[0]})}))},SET_ICONS_LIST:function(e,t){e.icons=m(m({},e.icons),{},{list:t||[],loading:!t})}}},1143:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return _})),n.d(t,"mutations",(function(){return S}));var o=n(19),r=n(4),c=(n(29),n(36),n(51),n(38),n(50),n(170),n(40),n(13),n(58)),l=n(68),d=n(218),m=n(220),f=n(158),_=(n(383),function(){return{uppyInstance:void 0,videos:[],isUploading:!1,error:!1,isModalOpen:!1,videoModerationWhitelist:["fdt8snwPPrxhqrd","dvdvvGN1eXmfkkI","hSuK5abYdK4VKaA","08pTW02eovVCsMa"]}});function h(e){e.preventDefault(),e.returnValue=""}var S={INIT_UPPY:function(e,t){var o=this,_={en:void 0,pt:n(118).default,es:n(164).default}[this.app.i18n.locale];e.uppyInstance=new c.b({id:"bulkVideo",locale:_,metaFields:[],hidePauseResumeButton:!0,restrictions:{maxNumberOfFiles:100,minNumberOfFiles:1,allowedFileTypes:["video/*"]}}).use(f.a,{id:"uppy-dashboard",inline:!0,target:"#uppy-bulk-video",height:300,theme:"light",doneButtonHandler:null}).use(d.a,{id:"StatusBar",target:"#status-bar",showProgressDetails:!0,hideUploadButton:!0,hideRetryButton:!0,hidePauseResumeButton:!0,hideCancelButton:!0,hideAfterFinish:!0}).use(l.a,{params:{auth:{key:"d01071d4a07644a29745671fc07b18e2",expires:t.expires},template_id:t.templateId,steps:{export:{path:t.store+"/${file.id}.${file.ext}"}}},waitForEncoding:!0,limit:1,signature:t.signature}).use(m.a,{target:f.a,companionUrl:l.a.COMPANION,companionAllowedHosts:l.a.COMPANION_PATTERN}),e.uppyInstance.on("upload-success",(function(e,t){})),e.uppyInstance.on("transloadit:result",function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r,c,l){var d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o.app.store.commit("videoUpload/ON_MODERATING",{id:c.localId,status:"pending"}),o.app.store.state.isSuperAdminAccess||e.videoModerationWhitelist.includes(t.store)){n.next=7;break}return n.next=5,o.app.$axios.get("/videos/video-moderation?fileURL=".concat(encodeURIComponent(c.ssl_url)));case 5:d=n.sent,d.data;case 7:return n.next=9,o.app.$axios.post("/videos/save",{url:c.ssl_url,name:c.name,size:c.size});case 9:n.sent,o.app.store.commit("videoUpload/ON_MODERATING",{id:c.localId,result:c,status:"success"}),n.next=21;break;case 13:if(n.prev=13,n.t0=n.catch(0),o.app.store.commit("videoUpload/ON_MODERATING",{id:c.localId,status:"failed"}),!n.t0.response||!n.t0.response.data||n.t0.response.data.success){n.next=21;break}if("ModerationFailed"!==n.t0.response.data.error){n.next=21;break}throw m=o.app.i18n.t("defaults.components.uppy.errorModeration"),alert(m),new Error(m);case 21:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e,t,o){return n.apply(this,arguments)}}()),e.uppyInstance.on("error",(function(t){t.assembly&&"ASSEMBLY_STEP_NO_ROBOT"===t.assembly.error&&(o.app.store.dispatch("fetchSignatures"),setTimeout((function(){e.uppyInstance.retryAll()}),500))})),e.uppyInstance.on("upload-progress",(function(e,progress){o.app.store.commit("videoUpload/VIDEO_ERROR",!1),o.app.store.commit("videoUpload/VIDEO_PROGRESS",{id:e.id,bytesUploaded:progress.bytesUploaded})})),e.uppyInstance.on("upload-error",(function(e,t,n){o.app.store.commit("videoUpload/VIDEO_ERROR",!0)})),e.uppyInstance.on("upload",(function(e){o.app.store.commit("videoUpload/CLOSE_MODAL"),o.app.store.commit("videoUpload/ADD_VIDEO")})),e.uppyInstance.on("file-removed",(function(e,t){o.app.store.commit("videoUpload/REMOVE_VIDEO",e)}))},ON_MODERATING:function(e,t){var i=e.videos.findIndex((function(video){return video.id===t.id}));e.videos[i].moderation_status=t.status,"success"===t.status&&(e.videos[i].isCompleted=!0),"failed"===t.status&&this.app.store.commit("videoUpload/VIDEO_ERROR",!0)},ADD_VIDEO:function(e,t){var n=e.uppyInstance.getFiles(),r=Object(o.a)(n);n.map((function(t,n){e.videos.length&&e.videos.map((function(e,o){t.id===e.id&&delete r[n]}))})),r.map((function(t,i){e.videos.push({id:t.id,name:t.name,progress:t.progress,size:t.size,isCompleted:!1,moderation_status:"not_started"})})),this.app.store.commit("videoUpload/SET_UPLOADING",!0)},VIDEO_PROGRESS:function(e,t){var i=e.videos.findIndex((function(video){return video.id===t.id}));e.videos[i].progress.bytesUploaded=t.bytesUploaded},VIDEO_ERROR:function(e,t){e.error=t},ON_UPLOADED:function(e,t){var i=e.videos.findIndex((function(video){return video.id===t.id}));e.videos[i].isCompleted=!0,this.app.store.commit("videoUpload/SET_UPLOADING",e.videos.some((function(e){return!1===e.isCompleted})))},REMOVE_VIDEO:function(e,t){e.videos=e.videos.filter((function(video){return video.id!==t.id})),Array.isArray(e.videos)&&e.videos.length||this.app.store.commit("videoUpload/SET_UPLOADING",!1)},CANCEL_VIDEO:function(e,t){e.uppyInstance.removeFile(t)},CANCEL_ALL:function(e,t){e.uppyInstance.cancelAll()},SET_UPLOADING:function(e,t){e.isUploading=t,e.isUploading?window.addEventListener("beforeunload",h):window.removeEventListener("beforeunload",h)},OPEN_MODAL:function(e,t){e.isModalOpen=!0},DESTROY_UPPY:function(e,t){e.uppyInstance.cancelAll(),e.uppyInstance=null},CLOSE_MODAL:function(e,t){e.isModalOpen=!1}}},968:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return L})),n.d(t,"getters",(function(){return P})),n.d(t,"mutations",(function(){return j})),n.d(t,"adaptPayload",(function(){return M})),n.d(t,"actions",(function(){return H}));n(21),n(17),n(26),n(20),n(27);var o=n(4),r=n(59),c=n(78),l=n(19),d=n(5),m=(n(29),n(122),n(170),n(31),n(60),n(13),n(40),n(38),n(30),n(67),n(36),n(10)),f=n(166),_=n.n(f),h=n(120),S=["itemsRaw"],v=["course_id","module_id"],O=["items","itemsRaw","items_variant","lessons","slides","slides_delay","title","type"],E=["id"];function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(d.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function I(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",i=0;i<6;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function k(e,title){var t=e.courses||[],n=null!=t&&t.length?[t[0].id]:[];return{id:I(),title:title,type:"modules",slides_delay:h.g,slides:[T({id:I()},h.h)],items:n,itemsRaw:JSON.parse(JSON.stringify(n)),items_variant:"content_over"}}function A(e,t){e.editorState=t,e.editorStateData=_()(N[t])}function D(e,t){return e.clubData.sections.find((function(section){return section.id===t}))}function w(e,t){var n=e.clubData.sections.findIndex((function(section){return section.id===t})),section=D(e,t),o=_()(section);o.id=I(),e.clubData.sections=[].concat(Object(l.a)(e.clubData.sections.slice(0,n+1)),[o],Object(l.a)(e.clubData.sections.slice(n+1)))}function C(e,t){e.clubData.sections=e.clubData.sections.filter((function(section){return section.id!==t})),j.resetEditorState(e)}function R(e){var t=JSON.parse(JSON.stringify(e.clubData));e.history.redoStack=[],e.history.undoStack.push(t)}function x(e,t){var n=(t||{}).id,o=e.courses||[],r=n?o.find((function(e){return e.id===n})):null,c=null;!r&&n&&o.length&&o.some((function(e){var t;return!!(c=null===(t=e.modules)||void 0===t?void 0:t.find((function(e){return e.id===n})))&&(r=T({},e),!0)})),e.managingCoverOf=r?JSON.parse(JSON.stringify({id:n,courseRef:r,moduleRef:c})):null}var N={INITIAL:{editingData:function(e){return null},toolbarSectionId:null},SECTIONS:{editingData:function(e){var section=D(e,e.editorStateData.selectedSectionId);return e.editorStateData.submanager?void 0!==e.editorStateData.submanagerData.index?section[e.editorStateData.submanagerData.prop][e.editorStateData.submanagerData.index]:section[e.editorStateData.submanagerData.prop]:section},selectedSectionId:null,selectingCourses:!1,submanager:null,submanagerData:null},MENU:{editingData:function(e){return e.clubData}},LOGIN:{editingData:function(e){return e.clubData.login}},SETTINGS:{editingData:function(e){return e.clubData.settings}}},L=function(){return{clubData:{sections:[],menu:[T({},h.c)],login:T({},h.b),settings:T({},h.e),mock_lessons:[]},courses:[],editorState:"INITIAL",editorStateData:_()(N.INITIAL),editorLayout:"desktop",history:{undoStack:[],redoStack:[]},managingCoverOf:null,loadedNav:{section:null,submanager:null},contentLoaded:!1}},P={sections:function(e){return e.clubData.sections},menu:function(e){return e.clubData.menu},settings:function(e){return e.clubData.settings},editingData:function(e){return e.editorStateData.editingData(e)},selectedSectionId:function(e){return e.editorStateData.selectedSectionId},isSidebarVisible:function(e){return"INITIAL"!==e.editorState},isEditingMenu:function(e){return"MENU"===e.editorState},isEditingLogin:function(e){return"LOGIN"===e.editorState},isEditingSettings:function(e){return"SETTINGS"===e.editorState},isSelectingCourses:function(e){return e.editorStateData.selectingCourses},hasCustomDomain:function(e){var t;return!(null===(t=e.clubData.settings.custom_domain)||void 0===t||!t.domain)},canUndo:function(e){return e.history.undoStack.length>0},canRedo:function(e){return e.history.redoStack.length>0},sidebarContentFactory:function(e){return e.editorStateData.submanager?h.f.submanagers[e.editorStateData.submanager]:h.f[e.editorState]},selectedEditorLayout:function(e){return e.editorLayout},selectedCoursesForCurrentSection:function(e){return e.editorStateData.selectedSectionId&&D(e,e.editorStateData.selectedSectionId).content_selection||[]},courses:function(e){return e.courses},hasContinueWatching:function(e){return e.clubData.sections.some((function(section){return"continue_watching"===section.type}))},loadedNav:function(e){return e.loadedNav},contentLoaded:function(e){return e.contentLoaded}},j={resetEditorState:function(e){A(e,"INITIAL")},addSection:function(e,t){R(e);var n=k(e,t);e.clubData.sections=[].concat(Object(l.a)(e.clubData.sections),[n]),j.selectSection(e,n.id)},selectSection:function(e,t){A(e,"SECTIONS"),e.editorStateData.selectedSectionId=t},updateData:function(e,t){var n=t.prop,o=t.subprop,r=t.index,c=t.value;R(e);var l=P.editingData(e);null!==l&&(void 0!==r&&(l=l[n],n=r),o?m.default.set(l,n,T(T({},l[n]),{},Object(d.a)({},o,c))):m.default.set(l,n,c),"type"===n&&("banner"===c?(m.default.set(l,"slides",l.slides||[T({id:I()},h.h)]),m.default.set(l,"slides_delay",l.slides_delay||h.g)):("courses"===c||"modules"===c)&&m.default.set(l,"items",l.items||[])))},removeItemFromEditingData:function(e,t){var n=t.prop,o=t.itemId,r=t.index;R(e);var c=P.editingData(e),l=c[n],d="number"==typeof r?l.filter((function(e,t){return t!==r})):o?l.filter((function(e){return e.id!==o})):l;m.default.set(c,n,d)},addItemToEditingData:function(e,t){var n=t.prop,o=t.value;R(e);var r=P.editingData(e),c=T({id:I()},o);m.default.set(r,n,[].concat(Object(l.a)(r[n]),[c]))},duplicateSelectedSection:function(e){R(e),w(e,e.editorStateData.selectedSectionId)},deleteSelectedSection:function(e){R(e),C(e,e.editorStateData.selectedSectionId)},updateSections:function(e,t){R(e);var n=(t||[]).map((function(e){var t=e.itemsRaw,section=Object(c.a)(e,S);if("courses"===(null==section?void 0:section.type)){var n=(section.items||[]).map((function(e){return e.id||e}));return T(T({},section),{},{items:n})}if("modules"===(null==section?void 0:section.type)){var o=JSON.parse(JSON.stringify(t||[]));return T(T({},section),{},{items:o})}return section}));e.clubData.sections=n},updateMenu:function(e,menu){R(e),e.clubData.menu=menu},updateLogin:function(e,t){R(e),e.clubData.login=t},updateSettings:function(e,t){R(e),e.clubData.settings=t},showToolbar:function(e,t){e.editorStateData.toolbarSectionId=t},hideToolbar:function(e){e.editorStateData.toolbarSectionId=null},selectToolbarElement:function(e){j.selectSection(e,e.editorStateData.toolbarSectionId)},duplicateToolbarElement:function(e){R(e),w(e,e.editorStateData.toolbarSectionId)},deleteToolbarElement:function(e){R(e),C(e,e.editorStateData.toolbarSectionId)},inputClubName:function(e,t){R(e),e.clubData.name=t,e.clubData.settings.name=t},inputSectionTitle:function(e,t){var n=t.id,o=t.value;n&&(R(e),e.clubData.sections.some((function(section){return section.id===n&&(section.title=o,!0)})))},moveUpToolbarElement:function(e){R(e);var t=e.clubData.sections.findIndex((function(section){return section.id===e.editorStateData.toolbarSectionId}));0!==t&&(e.clubData.sections=[].concat(Object(l.a)(e.clubData.sections.slice(0,t-1)),[e.clubData.sections[t],e.clubData.sections[t-1]],Object(l.a)(e.clubData.sections.slice(t+1))))},moveDownToolbarElement:function(e){R(e);var t=e.clubData.sections.findIndex((function(section){return section.id===e.editorStateData.toolbarSectionId}));t!==e.clubData.sections.length-1&&(e.clubData.sections=[].concat(Object(l.a)(e.clubData.sections.slice(0,t)),[e.clubData.sections[t+1],e.clubData.sections[t]],Object(l.a)(e.clubData.sections.slice(t+2))))},addSectionBelowToolbarElement:function(e,t){R(e);var n=e.clubData.sections.findIndex((function(section){return section.id===e.editorStateData.toolbarSectionId})),o=k(e,t);e.clubData.sections=[].concat(Object(l.a)(e.clubData.sections.slice(0,n+1)),[o],Object(l.a)(e.clubData.sections.slice(n+1))),j.selectSection(e,o.id)},showSelectCoursesModal:function(e){e.editorStateData.selectingCourses=!0},hideSelectCoursesModal:function(e){e.editorStateData.selectingCourses=!1},toggleCourseInSelectedSection:function(e,t){R(e);var section=P.editingData(e),n=section.content_selection.findIndex((function(e){return e.id===t.id}));section.content_selection=-1===n?[].concat(Object(l.a)(section.content_selection),[t]):section.content_selection.filter((function(e){return e.id!==t.id}))},loadCourses:function(e,t){e.courses=t},toggleEditMenu:function(e){"MENU"===e.editorState?A(e,"INITIAL"):A(e,"MENU")},toggleEditLogin:function(e){"LOGIN"===e.editorState?A(e,"INITIAL"):A(e,"LOGIN")},toggleEditSettings:function(e){"SETTINGS"===e.editorState?A(e,"INITIAL"):A(e,"SETTINGS")},activateSubmanager:function(e,t){var n=t.submanager,o=t.prop,r=t.index;e.editorStateData.submanager=n,e.editorStateData.submanagerData={prop:o,index:r}},closeSubmanager:function(e){e.editorStateData.submanager=null,e.editorStateData.submanagerData=null},setEditorLayout:function(e,t){e.editorLayout=t},undo:function(e){if(e.history.undoStack.length>0){var t=e.history.undoStack.pop();e.history.redoStack.push(_()(e.clubData)),e.clubData=_()(t)}},redo:function(e){if(e.history.redoStack.length>0){var t=e.history.redoStack.pop();e.history.undoStack.push(_()(e.clubData)),e.clubData=_()(t)}},historyReset:function(e){e.history.undoStack=[],e.history.redoStack=[]},loadMockLessons:function(e,t){e.clubData.mock_lessons=t},manageCover:x,optmisticCourse:function(e,t){var n=t||{},o=n.course_id,r=n.module_id,l=Object(c.a)(n,v);o&&(e.courses&&e.courses.length&&(e.courses=e.courses.map((function(e){return o!==(null==e?void 0:e.id)?e:r?T(T({},e),{},{modules:(e.modules||[]).map((function(e){return r!==e.id?e:T(T({},e),l)}))}):T(T({},e),l)}))),e.managingCoverOf&&e.managingCoverOf.courseRef&&e.managingCoverOf.courseRef.id===o&&x(e,{id:r||o}))},parseNavigationQuery:function(e,t){var nav=t.nav;if(nav){var n=nav.split("__"),o=Object(r.a)(n,2),section=o[0],c=o[1];e.loadedNav={section:section,submanager:c},"settings"===section&&A(e,"SETTINGS")}},setContentAsLoaded:function(e,t){e.contentLoaded=t}};function U(section){var data,e=section.items,t=(section.itemsRaw,section.items_variant),n=(section.lessons,section.slides),o=section.slides_delay,title=section.title,r=section.type;return"banner"===r?data={slides:n,slides_delay:o}:"courses"===r||"modules"===r?data={items:e,items_variant:t,title:title}:"continue_watching"===r&&(data={items_variant:t}),T(T({type:r},Object(c.a)(section,O)),data)}function M(e,t,n){var o,r,l,d,m,f,_,h,S,v={content:{menu:[],sections:[]},name:(null==e||null===(o=e.settings)||void 0===o?void 0:o.name)||(null==e?void 0:e.name),settings:{globalSettings:{image_favicon:(null==e||null===(r=e.settings)||void 0===r?void 0:r.image_favicon)||null,image_logo:(null==e||null===(l=e.settings)||void 0===l?void 0:l.image_logo)||null,image_share:(null==e||null===(d=e.settings)||void 0===d?void 0:d.image_share)||null,primary_color:(null==e||null===(m=e.settings)||void 0===m?void 0:m.primary_color)||null,theme:(null==e||null===(f=e.settings)||void 0===f?void 0:f.theme)||null},login:{image_background:(null==e||null===(_=e.login)||void 0===_?void 0:_.image_background)||null,image_header:(null==e||null===(h=e.login)||void 0===h?void 0:h.image_header)||null,variant:(null==e||null===(S=e.login)||void 0===S?void 0:S.variant)||null}}};return t?(v.content.menu=JSON.parse(JSON.stringify((null==e?void 0:e.menu)||[])),v.content.mock_lessons=JSON.parse(JSON.stringify(n||[])),v.content.sections=JSON.parse(JSON.stringify(e.sections||[])).map((function(section){var e=JSON.parse(JSON.stringify(section.items||[]));if("courses"===(null==section?void 0:section.type)){var n=e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean).map((function(e){return T(T({},e||{}),{},{progress:50,visible:!0})}));return T(T({},section),{},{items:n})}if("modules"===(null==section?void 0:section.type)){var o=e[0],r=((t.find((function(e){return e.id===o}))||{}).modules||[]).map((function(e){return T(T({},e||{}),{},{progress:50,visible:!0})}));return T(T({},section),{},{items:r,itemsRaw:JSON.parse(JSON.stringify(e))})}return section}))):(v.content.menu=JSON.parse(JSON.stringify((null==e?void 0:e.menu)||[])).map((function(e){e.id;return Object(c.a)(e,E)})),v.content.sections=JSON.parse(JSON.stringify((null==e?void 0:e.sections)||[])).map(U)),v}var H={adaptPayload:M,save:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.state,o.next=3,n.$axios.put("/clubs/".concat(t),M(r.clubData));case 3:case"end":return o.stop()}}),o)})))()},loadData:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,data,l,d,m,f,content,_,S,v,O,E,y,I,menu,A,D,w,C;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,o.next=3,n.$axios.get("/clubs/".concat(t));case 3:return c=o.sent,data=c.data.data,d=(l=data||{}).name,m=l.settings,f=l.content,content=void 0===f?{}:f,_=l.courses,S=void 0===_?[]:_,v=l.mock_lessons,O=void 0===v?[]:v,E=T(T(T(T(T({},h.e),m||{}),(m||{}).globalSettings||{}),null!=data&&data.domain?{custom_domain:data.domain}:{}),{},{name:d}),I=(y=content||{}).menu,menu=void 0===I?[T({},h.c)]:I,A=y.sections,D=(E||{}).login,w=T(T({},h.b),D||{}),C=(A||[]).map((function(section){return T(T({},section),{},{itemsRaw:JSON.parse(JSON.stringify(section.items||[]))},["courses","modules","continue_watching"].includes(section.type)?{items_variant:section.items_variant||k({}).items_variant}:{})})),r("updateSections",C),r("updateMenu",menu),r("updateLogin",w),r("updateSettings",E),r("loadCourses",S),r("loadMockLessons",O),o.abrupt("return",{name:d,settings:E,login:w,sections:C,menu:menu,courses:S,mock_lessons:O});case 18:case"end":return o.stop()}}),o)})))()},addCustomDomain:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l,d,m,f,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,c=t.domain,l=t.prop,d=t.index,m=t.clubId,f={domain:c,club_id:m},o.next=5,n.$axios.post("/club-domains",f);case 5:_=o.sent,r("updateData",{prop:l,index:d,value:{id:_.data.data.id,domain:c,verified:_.data.data.verified}});case 7:case"end":return o.stop()}}),o)})))()},getEntriToken:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.domain,e.next=3,n.$axios.post("/club-domains/entri",{domain:o});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))()},verifyDomain:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l,d,m,f,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,c=e.getters,l=t.prop,d=t.index,m=c.editingData[l],d&&(m=m[d]),o.next=6,n.$axios.put("/club-domains/".concat(m.id,"/verify"));case 6:f=o.sent,_=f.data.data.verified,r("updateData",{prop:l,index:d,subprop:"verified",value:_});case 9:case"end":return o.stop()}}),o)})))()},deleteDomain:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,c,l,d,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,c=e.getters,l=t.prop,d=t.index,m=c.editingData[l],d&&(m=m[d]),o.next=6,n.$axios.delete("/club-domains/".concat(m.id));case 6:r("updateData",{prop:l,index:d,value:{domain:"",verified:!1}});case 7:case"end":return o.stop()}}),o)})))()},clean:function(e){var t=e.commit;t("updateSections",[]),t("updateMenu",[]),t("updateLogin",h.b),t("updateSettings",h.e),t("loadCourses",[])}}}},[[1925,209,79,84,81,85,83,86,80,82,1,66,48,45,47,8,60,53,21,27,57,15,6,17,65,40,7,34,44,22,5,50,32,59,12,38,30,54,49,11,20,56,10,4,23,14,42,58,2,51,39,61,35,26,24,33,43,63,37,25,9,19,46,64,28,52,36,3,13,55,31,29,41,0,18,16,62,78,76,72,73,77,71,70,75,68,69]]]);